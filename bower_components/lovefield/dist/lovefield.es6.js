if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function k(a){return function(){return a}}var m,ca=this;function n(a){return void 0!==a}function da(a){return"string"==typeof a}function ea(){}
function ha(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ia(a){return null!=a}function ja(a){var b=ha(a);return"array"==b||"object"==b&&"number"==typeof a.length}function la(a){return"function"==ha(a)}function ma(a){return a[na]||(a[na]=++oa)}var na="closure_uid_"+(1E9*Math.random()>>>0),oa=0;function pa(a,b,c){return a.call.apply(a.bind,arguments)}
function qa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ra(a,b,c){ra=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pa:qa;return ra.apply(null,arguments)}
function sa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function q(a,b){a=a.split(".");var c=ca;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&n(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}}
function r(a,b){function c(){}c.prototype=b.prototype;a.eb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Qg=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function ta(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ta);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}r(ta,Error);ta.prototype.name="CustomError";var ua=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(da(a))return da(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},va=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=da(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},wa=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var c=
a.length,d=Array(c),e=da(a)?a.split(""):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d},xa=Array.prototype.reduce?function(a,b,c){return Array.prototype.reduce.call(a,b,c)}:function(a,b,c){var d=c;va(a,function(c,f){d=b.call(void 0,d,c,f,a)});return d},ya=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=da(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;return!1};
function za(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Aa(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ba(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==ha(d))for(var e=0;e<d.length;e+=8192)for(var f=Ba.apply(null,za(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Ca(a,b){this.mg=100;this.Jf=a;this.Fg=b;this.kd=0;this.ad=null}Ca.prototype.get=function(){if(0<this.kd){this.kd--;var a=this.ad;this.ad=a.next;a.next=null}else a=this.Jf();return a};Ca.prototype.put=function(a){this.Fg(a);this.kd<this.mg&&(this.kd++,a.next=this.ad,this.ad=a)};var Da=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function Ea(a,b){return-1!=a.indexOf(b)}
function Fa(a){var b=0;a=Da(String(a)).split(".");for(var c=Da("10").split("."),d=Math.max(a.length,c.length),e=0;0==b&&e<d;e++){var f=a[e]||"",h=c[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];if(0==f[0].length&&0==h[0].length)break;b=Ga(0==f[1].length?0:parseInt(f[1],10),0==h[1].length?0:parseInt(h[1],10))||Ga(0==f[2].length,0==h[2].length)||Ga(f[2],h[2]);f=f[3];h=h[3]}while(0==b)}return b}function Ga(a,b){return a<b?-1:a>b?1:0};var Ha;a:{var Ia=ca.navigator;if(Ia){var Ja=Ia.userAgent;if(Ja){Ha=Ja;break a}}Ha=""}function t(a){return Ea(Ha,a)};function Ka(){return t("Safari")&&!(Ma()||t("Coast")||t("Opera")||t("Edge")||t("Silk")||t("Android"))}function Ma(){return(t("Chrome")||t("CriOS"))&&!t("Edge")};function Na(a){ca.setTimeout(function(){throw a;},0)}var Oa;
function Pa(){var a=ca.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!t("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow;a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host;a=ra(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!t("Trident")&&!t("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(n(c.next)){c=c.next;var a=c.ze;c.ze=null;a()}};return function(a){d.next={ze:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){ca.setTimeout(a,0)}};function Qa(){this.vd=this.mc=null}var Sa=new Ca(function(){return new Ra},function(a){a.reset()});Qa.prototype.add=function(a,b){var c=Sa.get();c.set(a,b);this.vd?this.vd.next=c:this.mc=c;this.vd=c};Qa.prototype.remove=function(){var a=null;this.mc&&(a=this.mc,this.mc=this.mc.next,this.mc||(this.vd=null),a.next=null);return a};function Ra(){this.next=this.scope=this.Nd=null}Ra.prototype.set=function(a,b){this.Nd=a;this.scope=b;this.next=null};
Ra.prototype.reset=function(){this.next=this.scope=this.Nd=null};function Ta(a,b){Ua||Va();Wa||(Ua(),Wa=!0);Xa.add(a,b)}var Ua;function Va(){if(-1!=String(ca.Promise).indexOf("[native code]")){var a=ca.Promise.resolve(void 0);Ua=function(){a.then(Ya)}}else Ua=function(){var a=Ya;!la(ca.setImmediate)||ca.Window&&ca.Window.prototype&&!t("Edge")&&ca.Window.prototype.setImmediate==ca.setImmediate?(Oa||(Oa=Pa()),Oa(a)):ca.setImmediate(a)}}var Wa=!1,Xa=new Qa;function Ya(){for(var a;a=Xa.remove();){try{a.Nd.call(a.scope)}catch(b){Na(b)}Sa.put(a)}Wa=!1};function u(a,b){this.Ra=0;this.gf=void 0;this.Qc=this.ac=this.B=null;this.$c=this.Ld=!1;if(a!=ea)try{var c=this;a.call(b,function(a){Za(c,2,a)},function(a){Za(c,3,a)})}catch(d){Za(this,3,d)}}function $a(){this.next=this.context=this.fc=this.Dc=this.child=null;this.yd=!1}$a.prototype.reset=function(){this.context=this.fc=this.Dc=this.child=null;this.yd=!1};var ab=new Ca(function(){return new $a},function(a){a.reset()});function bb(a,b,c){var d=ab.get();d.Dc=a;d.fc=b;d.context=c;return d}
function v(a){if(a instanceof u)return a;var b=new u(ea);Za(b,2,a);return b}function cb(a){return new u(function(b,c){c(a)})}function db(a,b,c){eb(a,b,c,null)||Ta(sa(b,a))}function fb(a){return new u(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},l=0,p;l<a.length;l++)p=a[l],db(p,sa(f,l),h);else b(e)})}function w(){var a,b,c=new u(function(c,e){a=c;b=e});return new gb(c,a,b)}
u.prototype.then=function(a,b,c){return hb(this,la(a)?a:null,la(b)?b:null,c)};u.prototype.then=u.prototype.then;u.prototype.$goog_Thenable=!0;u.prototype.oe=function(a,b){return hb(this,null,a,b)};function ib(a,b){a.ac||2!=a.Ra&&3!=a.Ra||jb(a);a.Qc?a.Qc.next=b:a.ac=b;a.Qc=b}
function hb(a,b,c,d){var e=bb(null,null,null);e.child=new u(function(a,h){e.Dc=b?function(c){try{var e=b.call(d,c);a(e)}catch(L){h(L)}}:a;e.fc=c?function(b){try{var e=c.call(d,b);!n(e)&&b instanceof kb?h(b):a(e)}catch(L){h(L)}}:h});e.child.B=a;ib(a,e);return e.child}u.prototype.Lg=function(a){this.Ra=0;Za(this,2,a)};u.prototype.Mg=function(a){this.Ra=0;Za(this,3,a)};
function Za(a,b,c){0==a.Ra&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ra=1,eb(c,a.Lg,a.Mg,a)||(a.gf=c,a.Ra=b,a.B=null,jb(a),3!=b||c instanceof kb||lb(a,c)))}function eb(a,b,c,d){if(a instanceof u)return ib(a,bb(b||ea,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(la(f))return mb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function mb(a,b,c,d,e){function f(a){l||(l=!0,d.call(e,a))}function h(a){l||(l=!0,c.call(e,a))}var l=!1;try{b.call(a,h,f)}catch(p){f(p)}}function jb(a){a.Ld||(a.Ld=!0,Ta(a.Qf,a))}function nb(a){var b=null;a.ac&&(b=a.ac,a.ac=b.next,b.next=null);a.ac||(a.Qc=null);return b}
u.prototype.Qf=function(){for(var a;a=nb(this);){var b=this.Ra,c=this.gf;if(3==b&&a.fc&&!a.yd){var d;for(d=this;d&&d.$c;d=d.B)d.$c=!1}if(a.child)a.child.B=null,ob(a,b,c);else try{a.yd?a.Dc.call(a.context):ob(a,b,c)}catch(e){pb.call(null,e)}ab.put(a)}this.Ld=!1};function ob(a,b,c){2==b?a.Dc.call(a.context,c):a.fc&&a.fc.call(a.context,c)}function lb(a,b){a.$c=!0;Ta(function(){a.$c&&pb.call(null,b)})}var pb=Na;function kb(a){ta.call(this,a)}r(kb,ta);kb.prototype.name="cancel";
function gb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};function qb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],l=0;l<e+1;l++)h[l]=[],h[l][0]=0;for(var p=0;p<f+1;p++)h[0][p]=0;for(l=1;l<=e;l++)for(p=1;p<=f;p++)c(a[l-1],b[p-1])?h[l][p]=h[l-1][p-1]+1:h[l][p]=Math.max(h[l-1][p],h[l][p-1]);var L=[];l=e;for(p=f;0<l&&0<p;)c(a[l-1],b[p-1])?(L.unshift(d(l-1,p-1)),l--,p--):h[l-1][p]>h[l][p-1]?l--:p--;return L}function rb(a){return xa(arguments,function(a,c){return a+c},0)}
function sb(a){return rb.apply(null,arguments)/arguments.length}function tb(a){var b=arguments.length;if(2>b)return 0;var c=sb.apply(null,arguments);return rb.apply(null,wa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function ub(a){return Math.sqrt(tb.apply(null,arguments))};var vb="StopIteration"in ca?ca.StopIteration:{message:"StopIteration",stack:""};function wb(){}wb.prototype.next=function(){throw vb;};wb.prototype.se=function(){return this};function xb(a){if(a instanceof wb)return a;if("function"==typeof a.se)return a.se(!1);if(ja(a)){var b=0,c=new wb;c.next=function(){for(;;){if(b>=a.length)throw vb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Ab(a,b){if(ja(a))try{va(a,b,void 0)}catch(c){if(c!==vb)throw c;}else{a=xb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==vb)throw c;}}}function Bb(a){if(ya(arguments,function(a){return!a.length})||!arguments.length)return new wb;var b=new wb,c=arguments,d=Aa(c.length);b.next=function(){if(d){for(var a=wa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw vb;};return b};function Cb(a){Db(a);return a.a.concat()}function Db(a){if(a.Ff!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Eb(a.$,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.Ff!=a.a.length){var e={};for(c=b=0;b<a.a.length;)d=a.a[b],Eb(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}function Eb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Fb(){return t("iPhone")&&!t("iPod")&&!t("iPad")};function Gb(a){var b=Hb;return Object.prototype.hasOwnProperty.call(b,10)?b[10]:b[10]=a(10)};var Ib=t("Opera"),Jb=t("Trident")||t("MSIE"),Kb=t("Edge"),Lb=t("Gecko")&&!(Ea(Ha.toLowerCase(),"webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),Mb=Ea(Ha.toLowerCase(),"webkit")&&!t("Edge"),Nb=t("Macintosh"),Ob=t("Windows"),Pb=t("Android"),Qb=Fb(),Rb=t("iPad"),Sb=t("iPod"),Tb;
a:{var Ub="",Vb=function(){var a=Ha;if(Lb)return/rv:([^\);]+)(\)|;)/.exec(a);if(Kb)return/Edge\/([\d\.]+)/.exec(a);if(Jb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Mb)return/WebKit\/(\S+)/.exec(a);if(Ib)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Vb&&(Ub=Vb?Vb[1]:"");if(Jb){var Wb,Xb=ca.document;Wb=Xb?Xb.documentMode:void 0;if(null!=Wb&&Wb>parseFloat(Ub)){Tb=String(Wb);break a}}Tb=Ub}var Yb=Tb,Hb={};function Zb(){return Gb(function(){return 0<=Fa(Yb)})};var $b=function(){if(Ob){var a=/Windows NT ([0-9.]+)/;return(a=a.exec(Ha))?a[1]:"0"}return Nb?(a=/10[_.][0-9_.]+/,(a=a.exec(Ha))?a[0].replace(/_/g,"."):"10"):Pb?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(Ha))?a[1]:""):Qb||Rb||Sb?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(Ha))?a[1].replace(/_/g,"."):""):""}();var ac=Fb()||t("iPod"),bc=t("iPad");/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function cc(){var a;!(a=Ka()&&!Zb())&&(a=bc||ac)&&(a=!(0<=Fa($b)));this.lg=a;this.ag=!(this.lg||Jb&&!Zb());this.Pg=Ma()||Ka()}var dc;function x(){return new window.Map}function ec(a){var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function y(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function fc(a,b){this.ra=a;this.l=b||this.Ee()}var gc=0;m=fc.prototype;m.id=g("ra");m.Ee=function(){return{}};m.qf=g("l");m.Ia=function(){return{id:this.ra,value:this.qf()}};m.lb=function(a){return"#"==a.substr(-1)?this.ra:null};function hc(a){return new fc(a.id,a.value)}function ic(a){return new fc(gc++,a||{})}function jc(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);b+=2>d.length?"0"+d:d}return b};var kc={};q("lf.TransactionType",kc);kc.READ_ONLY=0;kc.READ_WRITE=1;function z(a,b,c,d,e){this.qd=a;this.eg=b;this.Og=c;this.Lf=d;this.Df=e}q("lf.TransactionStats",z);z.prototype.Jg=g("qd");z.prototype.success=z.prototype.Jg;z.prototype.dg=g("eg");z.prototype.insertedRowCount=z.prototype.dg;z.prototype.Ng=g("Og");z.prototype.updatedRowCount=z.prototype.Ng;z.prototype.Kf=g("Lf");z.prototype.deletedRowCount=z.prototype.Kf;z.prototype.Cf=g("Df");z.prototype.changedTableCount=z.prototype.Cf;function lc(a,b){this.sd=a;this.Pa=b||null;this.O=w();this.qd=!1;this.ya=null}lc.prototype.ka=function(){return(0==this.sd?this.oc():mc(this)).then(function(a){this.qd=!0;return a}.bind(this))};function mc(a){try{nc(a.Pa)}catch(b){return cb(b)}return oc(a).then(function(a){this.Pa.ka();return a}.bind(a))}function oc(a){pc(a);qc(a);return a.oc()}
function pc(a){a.Pa.fb.forEach(function(a,c){c=this.Pa.da().get(c);c=this.H(c.getName(),c.ib.bind(c),0);var b=y(a.va).map(function(a){return a.id()});a=y(a.la).map(function(a){return a[1]}).concat(y(a.ua));var e=0<a.length;0<b.length&&c.remove(b,e).oe(this.Ne,this);c.put(a).oe(this.Ne,this)},a)}function qc(a){rc(a.Pa).forEach(function(a){var b=this.H(a.getName(),hc,1);b.remove([]);b.put(a.Ia())},a)}lc.prototype.Ne=function(a){this.O.reject(a)};
lc.prototype.X=function(){if(null===this.ya)if(this.qd)if(0==this.sd)this.ya=new z(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Pa.fb.forEach(function(e){d++;a+=e.ua.size;c+=e.la.size;b+=e.va.size});this.ya=new z(!0,a,c,b,d)}else this.ya=new z(!1,0,0,0,0);return this.ya};function sc(a){this.Gg=a}sc.prototype.toString=g("Gg");var tc=new sc("backstore"),uc=new sc("cache"),vc=new sc("indexstore"),wc=new sc("engine"),xc=new sc("runner"),yc=new sc("observerregistry"),A=new sc("schema");function B(a){return n(a)?new window.Set(a):new window.Set}function C(a){var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function zc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function Ac(a,b){this.ra=a;this.l=b||{}}function Bc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}Ac.prototype.V=g("ra");function Cc(a,b){b.forEach(function(a){this.l[a.id()]=a.Ia()},a)}function Dc(a,b){b.forEach(function(a){delete this.l[a]},a)}Ac.prototype.Ia=function(){return{id:this.ra,value:JSON.stringify(this.l)}};function Ec(a){return new Ac(a.id,JSON.parse(a.value))};function Fc(a,b,c){this.Y=a;this.Eb=b;this.hf=c}m=Fc.prototype;m.get=function(a){if(0==a.length)return this.Pd();var b=this.Eb;return Gc(this,a).then(function(c){return a.map(function(a){var d=c.get(a>>9);return b(d.l[a])})})};function Gc(a,b){var c=x(),d=w();a=Bc(b).map(function(a){return new u(function(b,d){try{var e=this.Y.get(a)}catch(p){d(p);return}e.onerror=d;e.onsuccess=function(a){a=Ec(a.target.result);c.set(a.V(),a);b()}},this)},a);fb(a).then(function(){d.resolve(c)});return d.ha}
m.Pd=function(){return new u(function(a,b){var c=[];try{var d=this.Y.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f=Ec(b.value).l,h;for(h in f)c.push(this.Eb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Rb=function(a){return new u(function(b,c){try{var d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return v();var b=x();a.forEach(function(a){var c=a.id()>>9,e=b.get(c)||null;null===e&&(e=this.hf(this.Y.name,c));Cc(e,[a]);b.set(c,e)},this);a=y(b).map(function(a){return this.Rb(function(){return this.Y.put(a.Ia())}.bind(this))},this);return fb(a)};
m.remove=function(a){if(0==a.length)return this.Rb(function(){return this.Y.clear()}.bind(this));var b=x();a.forEach(function(a){var c=a>>9,e=b.get(c)||null;null===e&&(e=this.hf(this.Y.name,c));Dc(e,[a]);b.set(c,e)},this);a=y(b).map(function(a){return this.Rb(function(){return 0==Object.keys(a.l).length?this.Y.delete(a.V()):this.Y.put(a.Ia())}.bind(this))},this);return fb(a)};function Hc(a,b,c){a=a.b(uc);var d=[c<<9,(c+1<<9)-1];b=a.Sa(b,d[0],d[1]);c=new Ac(c);Cc(c,b);return c}
function Ic(a,b){return new Ac(b)};function Jc(a){this.U=a.b(uc);this.A=a.b(vc);this.g=a.b(A)}Jc.prototype.update=function(a){a.forEach(function(a){Kc(this,a);Lc(this,a)},this)};function Lc(a,b){var c=b.getName();b.va.forEach(function(a,b){this.U.remove(c,b)},a);b.ua.forEach(function(a){this.U.set(c,a)},a);b.la.forEach(function(a){this.U.set(c,a[1])},a)}function Kc(a,b){var c=a.g.table(b.getName());Mc(b).forEach(function(a){Oc(this,c,a)},a)}
function Oc(a,b,c){var d=a.A.ic.get(b.getName())||[],e=0;d.forEach(function(a){try{Pc(a,c),e++}catch(h){throw d.slice(0,e).forEach(function(a){Pc(a,[c[1],c[0]])},this),h;}},a)}function Pc(a,b){var c=null===b[1]?void 0:b[1].lb(a.getName()),d=null===b[0]?void 0:b[0].lb(a.getName());if(!n(d)&&n(c))a.add(c,b[1].id());else if(n(d)&&n(c)){if(null===c||null===d){if(c==d)return}else if(0==a.gb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else n(d)&&!n(c)&&a.remove(d,b[0].id())};var Qc={};q("lf.ConstraintAction",Qc);Qc.RESTRICT=0;Qc.CASCADE=1;var Rc={};q("lf.ConstraintTiming",Rc);Rc.IMMEDIATE=0;Rc.DEFERRABLE=1;var Sc={};q("lf.Order",Sc);Sc.DESC=0;Sc.ASC=1;var Tc={};q("lf.Type",Tc);Tc.ARRAY_BUFFER=0;Tc.BOOLEAN=1;Tc.DATE_TIME=2;Tc.INTEGER=3;Tc.NUMBER=4;Tc.STRING=5;Tc.OBJECT=6;var Uc={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};q("lf.type.DEFAULT_VALUES",Uc);function D(a,b){this.code=a;this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}r(D,Error);function Vc(){this.$=x();this.size=0}m=Vc.prototype;m.has=function(a){return this.$.has(a)};m.set=function(a,b){var c=this.$.get(a)||null;null===c&&(c=B(),this.$.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Ub=function(a,b){var c=this.$.get(a)||null;null===c&&(c=B(),this.$.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this)};m.Vd=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Ub(b,c)},this)};
m.delete=function(a,b){var c=this.$.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.$.delete(a);return b};m.get=function(a){a=this.$.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.$.clear();this.size=0};m.keys=function(){return ec(this.$)};m.values=function(){var a=[];this.$.forEach(function(b){a.push.apply(a,C(b))});return a};function Wc(a){this.A=a.b(vc);this.g=a.b(A);this.U=a.b(uc);this.Vc=null}function Xc(a,b,c){var d=b.Kb.sg;c.forEach(function(a){d.forEach(function(b){if(null==a.l[b.getName()])throw new D(202,b.j());},this)},a)}function Yc(a,b,c,d){b.Kb.Od.forEach(function(a){a.timing==d&&Zc(this,a,c)},a)}function Zc(a,b,c){var d=$c(a,b);c.forEach(function(a){if(ad(a[0],a[1],b.name)&&(a=a[1].lb(b.name),null!==a&&!d.hb(a)))throw new D(203,b.name);},a)}
function $c(a,b){null===a.Vc&&(a.Vc=x());var c=a.Vc.get(b.name)||null;null===c&&(c=a.g.table(b.Ua)[b.Ec].Ba(),c=a.A.get(c.j()),a.Vc.set(b.name,c));return c}function ad(a,b,c){return(null===a?null!==b:null===b)||a.lb(c)!=b.lb(c)}function bd(a,b,c,d){b=cd(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&dd(a,b,c,function(a,b,c){if(b.hb(c))throw new D(203,a.name);}))}
function ed(a,b,c){b=cd(a.g.info(),b.getName(),1);if(null===b)return null;var d=new Vc;dd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Ub(a.Ae,b)});return d}function fd(a,b,c){var d=new Vc;dd(a,c,b,function(a,b,c,l){b.get(c).forEach(function(b){d.set(b,{Md:a,xg:l[1]})})});return d}function dd(a,b,c,d){b.forEach(function(a){var b=this.A.get(a.name),e=$c(this,a);c.forEach(function(c){if(ad(c[0],c[1],e.getName())){var f=c[0].lb(e.getName());d(a,b,f,c)}},this)},a)}
function gd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),Yc(a,b,c,d))}function hd(a,b,c,d){0!=c.length&&(Yc(a,b,c,d),bd(a,b,c,d))}function id(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),bd(a,b,c,d))}
function jd(a,b,c){var d={ne:[],kf:new Vc},e=new Vc;e.Ub(b.getName(),c.map(function(a){return a.id()}));do{var f=new Vc;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.U.get(a),null]},this);b=ed(this,b,a);null!==b&&(d.ne.unshift.apply(d.ne,b.keys()),f.Vd(b))},a);e=f;d.kf.Vd(e)}while(0<e.size);return d};function kd(a){this.ua=x();this.la=x();this.va=x();this.w=a}m=kd.prototype;m.getName=g("w");m.add=function(a){if(this.va.has(a.id())){var b=[this.va.get(a.id()),a];this.la.set(a.id(),b);this.va.delete(a.id())}else this.ua.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.ua.has(c)?this.ua.set(c,b):(this.la.has(c)&&(a=[this.la.get(a[0].id())[0],b]),this.la.set(c,a))};
m.delete=function(a){if(this.ua.has(a.id()))this.ua.delete(a.id());else if(this.la.has(a.id())){var b=this.la.get(a.id())[0];this.la.delete(a.id());this.va.set(a.id(),b)}else this.va.set(a.id(),a)};m.Vd=function(a){a.ua.forEach(function(a){this.add(a)},this);a.la.forEach(function(a){this.modify(a)},this);a.va.forEach(function(a){this.delete(a)},this)};
function Mc(a){var b=[];a.ua.forEach(function(a){b.push([null,a])});a.la.forEach(function(a){b.push(a)});a.va.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+ec(this.ua).toString()+"], ["+ec(this.la).toString()+"], ["+ec(this.va).toString()+"]"};function ld(a){var b=new kd(a.w);a.ua.forEach(function(a){b.delete(a)});a.va.forEach(function(a){b.add(a)});a.la.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.gg=function(){return 0==this.ua.size&&0==this.va.size&&0==this.la.size};function md(a,b){this.aa=x();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.b(A);this.U=a.b(uc);this.A=a.b(vc);this.za=new Wc(a);this.bd=new Jc(a);this.fb=x()}function rc(a){var b=[];ec(a.fb).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Bb()&&(a.Ca().forEach(function(a){b.push(this.A.get(a.j()))},this),b.push(this.A.get(a.getName()+".#")))},a);return b}m=md.prototype;m.da=g("aa");
m.zb=function(a,b){nd(this,a);Xc(this.za,a,b);gd(this.za,a,b,0);for(var c=0;c<b.length;c++)od(this,a,[null,b[c]])};function od(a,b,c){var d=b.getName(),e=a.fb.get(d)||new kd(d);a.fb.set(d,e);try{Oc(a.bd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.U.set(d,f),e.add(f)):null!==b&&null!==f?(a.U.set(d,f),e.modify(c)):null!==b&&null===f&&(a.U.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){nd(this,a);Xc(this.za,a,b);b=b.map(function(a){return[this.U.get(a.id()),a]},this);pd(this,a,b);hd(this.za,a,b,0);b.forEach(function(b){od(this,a,b)},this)};m.Qd=function(a,b){nd(this,a);Xc(this.za,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f=a.Kb.md;if(null===f)var h=null;else{h=this.za;f=f.j();var l=d.lb(f);h=h.A.get(f).get(l);h=0==h.length?null:h[0]}null!=h?(e=this.U.get(h),d.ra=h,hd(this.za,a,[[e,d]],0)):gd(this.za,a,[d],0);od(this,a,[e,d])}};
m.remove=function(a,b){nd(this,a);qd(this,a,b);id(this.za,a,b,0);for(var c=0;c<b.length;c++)od(this,a,[b[c],null])};function pd(a,b,c){b=cd(a.g.info(),b.getName(),1);if(null!==b){var d=fd(a.za,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Md.Ae),d=this.U.get(a),e=c.ib(d.Ia());e.l[b.Md.tb]=b.xg.l[b.Md.Ec];od(this,c,[d,e])},this)},a)}}
function qd(a,b,c){if(null!==cd(a.g.info(),b.getName(),1)){b=jd(a.za,b,c);var d=b.kf;b.ne.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.U.get(a)},this);id(this.za,b,a,0);a.forEach(function(a){od(this,b,[a,null])},this)},a)}}function nc(a){a.fb.forEach(function(a){var b=this.aa.get(a.getName());gd(this.za,b,y(a.ua),1);id(this.za,b,y(a.va),1);hd(this.za,b,y(a.la),1)},a)}m.ka=aa();m.Hb=function(){var a=y(this.fb).map(function(a){return ld(a)});this.bd.update(a)};
function nd(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.from=a;this.m=b;this.ea=this.from==F?!1:c;this.na=this.m==F?!1:d}var F=new (aa());E.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==F?"unbound":this.from)+", "+(this.m==F?"unbound":this.m)+(this.na?")":"]")};function rd(a){if(sd(a))return[];var b=null,c=null;a.from==F||(b=new E(F,a.from,!1,!a.ea));a.m==F||(c=new E(a.m,F,!a.na,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.m,this.from,this.na,this.ea)};
function td(a,b){var c=ud(a.from,b.from,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.m==F||d.m>a.from||d.m==a.from&&!d.na&&!a.ea}function vd(){return new E(F,F,!1,!1)}function sd(a){return a.from==F&&a.m==F}function wd(a){return a.from==a.m&&a.from!=F&&!a.ea&&!a.na}E.prototype.contains=function(a){var b=this.m==F||a<this.m||a==this.m&&!this.na;return(this.from==F||a>this.from||a==this.from&&!this.ea)&&b};
function ud(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function xd(a,b){var c=ud(a.from,b.from,!0,a.ea,b.ea);0==c&&(c=ud(a.m,b.m,!1,a.na,b.na));return c}function yd(a){if(0==a.length)return[];a.sort(xd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].from,!1,!0):c==b.length-1?new E(a[c-1].m,F,!0,!1):new E(a[c-1].m,a[c].from,!0,!0);return b};function zd(a){this.hc=[];n(a)&&this.add(a)}zd.prototype.toString=function(){return this.hc.map(function(a){return a.toString()}).join(",")};zd.prototype.hb=function(a){return this.hc.some(function(b){return b.contains(a)})};zd.prototype.yb=g("hc");
zd.prototype.add=function(a){if(0!=a.length)if(a=this.hc.concat(a),1==a.length)this.hc=a;else{a.sort(xd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(td(c,a[d])){var e=a[d],f=vd();if(c.from!=F&&e.from!=F){var h=ud(c.from,e.from,!0);1!=h?(f.from=c.from,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.from=e.from,f.ea=e.ea)}c.m!=F&&e.m!=F&&(h=ud(c.m,e.m,!1),-1!=h?(f.m=c.m,f.na=0!=h?c.na:c.na&&e.na):(f.m=e.m,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.hc=b}};
function Ad(a,b){var c=[];a.yb().map(function(a){return b.yb().map(function(b){if(td(a,b)){var c=vd();var d=ud(a.from,b.from,!0);d=0==d?a.ea?a:b:-1!=d?a:b;c.from=d.from;c.ea=d.ea;a.m==F||b.m==F?b=a.m==F?b:a:(d=ud(a.m,b.m,!1),b=0==d?a.na?a:b:-1==d?a:b);c.m=b.m;c.na=b.na}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new zd(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.L=B(b);this.Xa=null}G.prototype.o=function(){return C(this.L)};function Bd(a){return a.entries.map(function(a){return a.ta.l})}function Cd(a){return a.entries.map(function(a){return a.ta.id()})}function Dd(a,b){return a.Xa.get(b.j())}var Ed=null;function Fd(){null===Ed&&(Ed=new G([],[]));return Ed}
function Gd(a){if(0==a.length)return Fd();var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0;b=a.map(function(a){var b=x();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b});for(var e=x(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(y(e),C(a[0].L))}function Hd(a){if(0==a.length)return Fd();var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(y(b),C(a[0].L))}
function Id(a,b){var c=1<b.length;a=a.map(function(a){return new Jd(a,c)});return new G(a,b)}function Jd(a,b){this.ta=a;this.id=Kd++;this.Sd=b}var Kd=0;function H(a,b){var c=b.Ja;return null!==c&&a.ta.l.hasOwnProperty(c)?a.ta.l[c]:a.Sd?a.ta.l[Ld(b.H())][b.getName()]:a.ta.l[b.getName()]}function Md(a,b,c){var d=b.Ja;if(null!=d)a.ta.l[d]=c;else if(a.Sd){d=Ld(b.H());var e=a.ta.l[d];null==e&&(e={},a.ta.l[d]=e);e[b.getName()]=c}else a.ta.l[b.getName()]=c}
function Nd(a,b,c,d){function e(a,b){if(a.Sd){a=a.ta.l;for(var c in a)f[c]=a[c]}else f[b[0]]=a.ta.l}var f={};e(a,b);e(c,d);a=new fc(-1,f);return new Jd(a,!0)};q("lf.bind",function(a){return new Od(a)});function Od(a){this.fa=a}q("lf.Binder",Od);Od.prototype.Ba=g("fa");function Pd(){this.Te=Qd();var a=Rd();this.Mb=x();this.Mb.set(1,Sd());this.Mb.set(2,Td());this.Mb.set(4,a);this.Mb.set(3,a);this.Mb.set(5,Ud());this.Mb.set(6,Vd())}var Wd;function Xd(){null!=Wd||(Wd=new Pd);return Wd}function Yd(a,b,c){a=a.Mb.get(b)||null;if(null===a)throw new D(550);c=a.get(c)||null;if(null===c)throw new D(550);return c}
function Qd(){function a(a){return a}var b=x();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function Sd(){var a=x();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function Rd(){var a=Sd();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function Ud(){var a=Rd();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}function Vd(){var a=x();a.set("eq",function(a,c){if(null!==c)throw new D(550);return null===a});a.set("neq",function(a,c){if(null!==c)throw new D(550);return null!==a});return a}
function Td(){var a=x();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(b){return b.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function I(){this.h=this.B=null}var Zd=[];I.prototype.getParent=g("B");I.prototype.Za=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function $d(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function J(a){return a.h||Zd}function ae(a,b){return J(a)[b]||null}function be(a,b,c){b.B=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function K(a,b){b.B=a;null===a.h?a.h=[b]:a.h.push(b)}
function ce(a,b){var c=a.h&&a.h[b];return c?(c.B=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}I.prototype.removeChild=function(a){return ce(this,J(this).indexOf(a))};function de(a,b,c){ae(a,c).B=null;b.B=a;a.h[c]=b}function ee(a,b,c){!1!==b.call(c,a)&&J(a).forEach(function(a){ee(a,b,c)})};function ge(){I.call(this);this.ra=he++}r(ge,I);var he=0;ge.prototype.V=g("ra");function ie(a,b,c){ge.call(this);this.I=a;this.value=b;this.D=c;this.rc=Yd(Xd(),this.I.F(),this.D);this.Ta=!1;this.$b=b}r(ie,ge);m=ie.prototype;m.Lb=function(){var a=new ie(this.I,this.value,this.D);a.$b=this.$b;a.pd(this.Ta);var b=this.V();a.ra=b;return a};m.jb=function(a){return null!=a?(a.push(this.I),a):[this.I]};m.o=function(a){a=null!=a?a:B();a.add(this.I.H());return a};m.pd=ba("Ta");
function je(a){var b=!1;a.value instanceof Od||(b="array"==ha(a.value)?!a.value.some(function(a){return a instanceof Od}):!0);if(!b)throw new D(501);}m.eval=function(a){je(this);if("in"==this.D)return ke(this,a);var b=a.entries.filter(function(a){return this.rc(H(a,this.I),this.value)!=this.Ta},this);return new G(b,a.o())};
m.bind=function(a){if(this.$b instanceof Od){var b=this.$b.Ba();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==ha(this.$b)&&(this.value=this.$b.map(function(b){if(b instanceof Od){var c=b.Ba();if(a.length<=c)throw new D(510);return a[b.Ba()]}return b}))};function ke(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Ta}.bind(a);a=b.entries.filter(function(a){return d(H(a,this.I))},a);return new G(a,b.o())}
m.toString=function(){return"value_pred("+this.I.j()+" "+this.D+(this.Ta?"(complement)":"")+" "+this.value+")"};m.ed=function(){je(this);return null!==this.value&&("between"==this.D||"in"==this.D||"eq"==this.D||"gt"==this.D||"gte"==this.D||"lt"==this.D||"lte"==this.D)};
m.pe=function(){var a=null;if("between"==this.D)a=new E(le(this,this.value[0]),le(this,this.value[1]),!1,!1);else{if("in"==this.D)return a=this.value.map(function(a){return new E(a,a,!1,!1)}),new zd(this.Ta?yd(a):a);a=le(this,this.value);a="eq"==this.D?new E(a,a,!1,!1):"gte"==this.D?new E(a,F,!1,!1):"gt"==this.D?new E(a,F,!0,!1):"lte"==this.D?new E(F,a,!1,!1):new E(F,a,!1,!0)}return new zd(this.Ta?rd(a):[a])};function le(a,b){return 2==a.I.F()?b.getTime():b};function me(a){this.ba=a;this.Rc=this.Fa=null}function ne(a,b){null===a.Fa&&null!=a.u&&(a.Fa=oe(a.u));return a.Fa.get(b)||null}function oe(a){var b=x();ee(a,function(a){b.set(a.V(),a)});return b}function pe(a,b){b.u&&(a.u=b.u.Lb());a.Rc=b}me.prototype.bind=function(){return this};function qe(a,b){a=a.u;null!=a&&ee(a,function(a){a instanceof ie&&a.bind(b)})};function re(a){me.call(this,a)}r(re,me);function se(a){var b="";a.forEach(function(c,d){b+=c.I.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}re.prototype.da=function(){return B(this.from)};re.prototype.clone=function(){var a=new re(this.ba);pe(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.W=this.W;a.K=this.K;this.M&&(a.M=this.M.slice());this.qa&&(a.qa=this.qa.slice());this.Qb&&(a.Qb=this.Qb);this.Wb&&(a.Wb=this.Wb);a.ab=this.ab;return a};
re.prototype.bind=function(a){re.eb.bind.call(this,a);null!=this.Qb&&(this.W=a[this.Qb.Ba()]);null!=this.Wb&&(this.K=a[this.Wb.Ba()]);qe(this,a);return this};function te(a,b){this.Ga=a;this.aa=b}te.prototype.Za=g("Ga");te.prototype.da=g("aa");function ue(a){var b=B();a.forEach(function(a){a.da().forEach(b.add.bind(b))});return b};function ve(a,b){this.global=a;this.Na=a.b(tc);this.nd=b.map(function(a){return a.context});this.cf=b.map(function(a){return a.ce});this.Gd=ue(this.cf);this.qe=we(this);this.Cb=w()}function we(a){return a.nd.some(function(a){return!(a instanceof re)})?1:0}m=ve.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.Za().exec(b,h).then(function(b){c.push(b[0]);return a()})}return v()}var b=0==this.qe?void 0:new md(this.global,this.Gd),c=[],d=this.cf.slice(),e=this.nd;return a().then(function(){this.ja=this.Na.Db(this.qe,C(this.Gd),b);return this.ja.ka()}.bind(this)).then(function(){this.$d(c);return c}.bind(this),function(a){null!=b&&b.Hb();throw a;})};m.F=g("qe");m.da=g("Gd");m.V=function(){return ma(this)};m.$d=aa();
m.X=function(){var a=null;null!=this.ja&&(a=this.ja.X());return null===a?new z(!1,0,0,0,0):a};function xe(a,b){ve.call(this,a,b);this.Gb=a.b(yc)}r(xe,ve);xe.prototype.getPriority=k(0);xe.prototype.$d=function(a){this.nd.forEach(function(b,c){ye(this.Gb,b,a[c])},this)};function ze(a,b){this.c=a;this.Gb=a.b(yc);this.Ha=a.b(xc);this.bd=new Jc(a);this.fb=b;var c=a.b(A);a=this.fb.map(function(a){return c.table(a.getName())});this.aa=B(a);this.Cb=w()}m=ze.prototype;m.exec=function(){this.bd.update(this.fb);this.Hc();return v()};m.F=k(1);m.da=g("aa");m.V=function(){return ma(this)};m.getPriority=k(1);m.Hc=function(){var a=Ae(this.Gb,this.aa);0!=a.length&&(a=new xe(this.c,a),Be(this.Ha,a))};function Ce(a){this.c=a;this.Na=a.b(tc);this.Ha=a.b(xc)}Ce.prototype.Yd=function(a){a=new ze(this.c,a);Be(this.Ha,a)};function M(a,b){this.Xb=a;this.i=b;this.Wa=x()}q("lf.backstore.FirebaseRawBackStore",M);M.prototype.Yc=g("i");M.prototype.Zc=function(){throw new D(351);};function De(a,b){var c=w(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function Ee(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=w();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Da=function(a){return De(this.i,"@rev/R").then(function(a){this.Qa=a;return De(this.i,"@table")}.bind(this)).then(function(b){var c=0;for(d in b)this.Wa.set(d,b[d]),b[d]>c&&(c=b[d]);a.oa().forEach(function(a){this.Wa.has(a.getName())||(b[a.getName()]=++c)},this);var d=this.i.child("@table");return Ee(d,b)}.bind(this))};
function Fe(a,b,c){var d=a.Wa.get(b);return null!=d?function(){var a={},b=w();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Qa};return Ee(this.i,a)}.bind(a)):v()}M.prototype.pc=function(a){return Fe(this,a,k(null)).then(function(){this.Wa.delete(a);return Ee(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.pc;
M.prototype.nc=function(a,b,c){return Fe(this,a,function(a){var d=a.P;d[b]=c;return{R:this.Qa+1,T:a.T,P:d}}.bind(this))};M.prototype.addTableColumn=M.prototype.nc;M.prototype.qc=function(a,b){return Fe(this,a,function(a){var c=a.P;delete c[b];return{R:this.Qa+1,T:a.T,P:c}}.bind(this))};M.prototype.dropTableColumn=M.prototype.qc;M.prototype.Gc=function(a,b,c){return Fe(this,a,function(a){var d=a.P;d[c]=d[b];delete d[b];return{R:this.Qa+1,T:a.T,P:d}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Gc;
M.prototype.vb=function(){throw new D(351);};M.prototype.createRow=M.prototype.vb;M.prototype.xc=g("Xb");M.prototype.getVersion=M.prototype.xc;M.prototype.bc=function(a){var b=w();a=this.Wa.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var c=[];a.forEach(function(a){c.push(a.val().P)});b.resolve(c)});return b.ha};M.prototype.dump=function(){var a={},b=ec(this.Wa).map(function(b){return this.bc(b).then(function(c){a[b]=c})}.bind(this));return fb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Ge(a,b,c){lc.call(this,b,c);this.i=a}r(Ge,lc);Ge.prototype.H=function(a){return this.i.vc(a)};
Ge.prototype.oc=function(){if(0==this.sd)return this.O.resolve(),this.O.ha;var a=this.Pa.fb;if(0==a.size)this.O.resolve();else{var b=this.i.Qa+1;this.i.Qa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var d=this.i.Wa.get(e);a.ua.forEach(function(a,e){c[e]={R:b,T:d,P:a.l}});a.la.forEach(function(a,e){c[e]={R:b,T:d,P:a[1].l}});a.va.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.O.resolve():(this.i.Qa=b-1,c=y(a).map(function(a){return He(this.i,a.getName())},this),
fb(c).then(this.O.reject.bind(this.O),this.O.reject.bind(this.O)))}.bind(this))}return this.O.ha};function Ie(){this.Aa=x()}function Je(a,b){if(0==b.length)return y(a.Aa);var c=[];b.forEach(function(a){a=this.Aa.get(a)||null;null===a||c.push(a)},a);return c}Ie.prototype.getData=g("Aa");Ie.prototype.get=function(a){return v(Je(this,a))};function Ke(a,b){b.forEach(function(a){this.Aa.set(a.id(),a)},a)}Ie.prototype.put=function(a){Ke(this,a);return v()};function Le(a,b){0==b.length||b.length==a.Aa.size?a.Aa.clear():b.forEach(function(a){this.Aa.delete(a)},a)}
Ie.prototype.remove=function(a){Le(this,a);return v()};function Me(a){return 0==a.Aa.size?0:ec(a.Aa).reduce(function(a,c){return a>c?a:c},0)};function Ne(a,b){this.g=a;this.xf=b;this.Fc=x();this.Qa=-1;this.L=x();this.Wa=x();this.Dd=null}m=Ne.prototype;
m.Da=function(a){this.i=this.xf.child(this.g.name());var b=a||function(){return v()};return De(this.i,"@db/version").then(function(a){return null===a?Ee(this.i,Oe(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)).then(function(){return this.Da()}.bind(this)):a==this.g.version()?De(this.i,"@rev/R").then(function(a){this.Qa=a;return De(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Wa.set(b,a[b]);a=this.g.oa().map(function(a){return He(this,a.getName())},this);
return fb(a)}.bind(this)).then(function(){Pe(this);Qe(this);return v()}.bind(this)):this.ae(a,b).then(function(){return this.Da()}.bind(this))}.bind(this))};m.ae=function(a,b){var c=new M(a,this.i);return c.Da(this.g).then(function(){return v()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return Ee(a,{version:this.g.version()},!0)}.bind(this))};
function Qe(a){a.i.off();a.i.on("child_removed",a.ug.bind(a));a.Ed&&(a.Ed.off(),a.Fc.clear());a.Ed=a.i.orderByChild("R").startAt(a.Qa+1);a.Ed.on("value",a.Yd.bind(a))}function Pe(a){gc=y(a.L).map(function(a){return Me(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.ug=function(a){var b=a.val(),c=this.Fc.get(b.T)||null;null===c&&(c=B(),this.Fc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.Yd=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Qa&&(this.Qa=b,a=Re(this,a),a.forEach(function(a){var b=this.L.get(a.getName()),c=ec(a.va);0<c.length&&Le(b,c);var f=y(a.ua);a.la.forEach(function(a){f.push(a[1])});Ke(b,f)},this),0<a.length&&this.Bc(a),Qe(this))};
function Re(a,b){var c=B(),d=x();a.Wa.forEach(function(a,b){var e=this.L.get(b),f=new kd(b);this.Fc.has(a)&&(b=C(this.Fc.get(a)),b.forEach(function(a){c.add(a)}),Je(e,b).forEach(function(a){f.delete(a)}));d.set(a,f)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var e=a.val();a=d.get(e.T);var l=this.L.get(a.getName());e=this.g.table(a.getName()).ib({id:b,value:e.P});l.getData().has(b)?a.modify([Je(l,[b])[0],e]):a.add(e)}}}.bind(a));return y(d).filter(function(a){return!a.gg()})}
function He(a,b){var c=w(),d=a.Wa.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new Ie,f=[];a.forEach(function(a){f.push(e.ib({id:parseInt(a.key(),10),value:a.val().P}))});Ke(d,f);this.L.set(b,d);c.resolve()}.bind(a));return c.ha}function Oe(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Qa=1;b["@table"]={};a.g.oa().forEach(function(a,d){a=a.getName();b["@table"][a]=d;this.L.set(a,new Ie);this.Wa.set(a,d)},a);return b}
m.Db=function(a,b,c){return new Ge(this,a,c)};m.vc=function(a){var b=this.L.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Dd");m.Bc=function(a){null!=this.Dd&&this.Dd(a)};function N(a,b,c,d){this.i=b;this.ja=c;this.Xb=a;this.Pc=d}q("lf.backstore.IndexedDBRawBackStore",N);N.prototype.Yc=g("i");N.prototype.getRawDBInstance=N.prototype.Yc;N.prototype.Zc=g("ja");N.prototype.getRawTransaction=N.prototype.Zc;N.prototype.pc=function(a){return new u(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.pc;
function Se(a,b,c,d){return new u(function(a,f){try{var e=this.ja.objectStore(b);var l=e.openCursor()}catch(p){f(p);return}l.onsuccess=function(){var b=l.result;b?(c(b),b.continue()):(d(e),a())};l.onerror=f},a)}function Te(a){return a instanceof ArrayBuffer?jc(a):a instanceof Date?a.getTime():a}function Ue(a,b,c){function d(a){var b=Ec(a.value),d=b.l,e;for(e in d){var f=hc(d[e]);c(f);d[e]=f.Ia()}a.update(b.Ia())}function e(a){var b=hc(a.value);c(b);a.update(b.Ia())}return Se(a,b,a.Pc?d:e,aa())}
N.prototype.nc=function(a,b,c){var d=Te(c);return Ue(this,a,function(a){a.l[b]=d})};N.prototype.addTableColumn=N.prototype.nc;N.prototype.qc=function(a,b){return Ue(this,a,function(a){delete a.l[b]})};N.prototype.dropTableColumn=N.prototype.qc;N.prototype.Gc=function(a,b,c){return Ue(this,a,function(a){a.l[c]=a.l[b];delete a.l[b]})};N.prototype.renameTableColumn=N.prototype.Gc;
function Ve(a,b){var c=[];return new u(function(a,e){try{var d=this.ja.objectStore(b).openCursor()}catch(h){e(h);return}d.onsuccess=function(){var b=d.result;if(b){if(this.Pc){var e=Ec(b.value).l,f;for(f in e)c.push(e[f])}else c.push(b.value);b.continue()}else a(c)}.bind(this);d.onerror=e},a)}N.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Te(a[c]);return ic(b)};N.prototype.createRow=N.prototype.vb;N.prototype.xc=g("Xb");N.prototype.getVersion=N.prototype.xc;
N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.bc(d))}return fb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.bc=function(a){return Ve(this,a).then(function(a){return a.map(function(a){return a.value})})};function We(a,b){this.Y=a;this.Eb=b}We.prototype.get=function(a){if(0==a.length)return null!=this.Y.getAll?Xe(this):Ye(this);a=a.map(function(a){return new u(function(b,d){try{var c=this.Y.get(a)}catch(f){d(f);return}c.onerror=d;c.onsuccess=function(a){b(this.Eb(a.target.result))}.bind(this)},this)},this);return fb(a)};
function Ye(a){return new u(function(a,c){var b=[];try{var e=this.Y.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(b.push(this.Eb(c.value)),c.continue()):a(b)}.bind(this)},a)}function Xe(a){return new u(function(a,c){try{var b=this.Y.getAll()}catch(e){c(e);return}b.onerror=c;b.onsuccess=function(){var c=b.result.map(function(a){return this.Eb(a)},this);a(c)}.bind(this)},a)}
We.prototype.Rb=function(a){return new u(function(b,c){try{var d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};We.prototype.put=function(a){if(0==a.length)return v();a=a.map(function(a){return this.Rb(function(){return this.Y.put(a.Ia())}.bind(this))},this);return fb(a)};
We.prototype.remove=function(a,b){function c(){var b=a.map(function(a){return d.Rb(function(){return d.Y.delete(a)})});return fb(b)}var d=this;return b?c():new u(function(b,f){var e=d.Y.count();e.onsuccess=function(e){0==a.length||e.target.result==a.length?d.Rb(function(){return d.Y.clear()}).then(b,f):c().then(b,f)};e.onerror=f})};function Ze(a,b,c,d,e){lc.call(this,c,e);this.c=a;this.ja=b;this.Pc=d;this.ja.oncomplete=this.O.resolve.bind(this.O);this.ja.onabort=this.O.reject.bind(this.O)}r(Ze,lc);Ze.prototype.H=function(a,b,c){return this.Pc?(c=null!=c?c:0,a=this.ja.objectStore(a),new Fc(a,b,0==c?sa(Hc,this.c):Ic)):new We(this.ja.objectStore(a),b)};Ze.prototype.oc=function(){return this.O.ha};function $e(a,b){this.c=a;this.g=b;this.Ad=b.de.Nf||!1}m=$e.prototype;
m.Da=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return v()};return new u(function(a,e){try{var d=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}d.onerror=function(a){a=a.target.error;e(new D(361,a.name,a.message))};d.onupgradeneeded=function(a){af(this,c,a).then(aa(),e)}.bind(this);d.onsuccess=function(b){this.i=b.target.result;this.je().then(function(b){gc=Math.max(gc,b+1);a(this.i)}.bind(this))}.bind(this)},
this)};function af(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Ad);bf(d);a.g.oa().forEach(sa(a.Gf,d),a);return b(c)}function bf(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(f){}})}
m.Gf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Bb()&&(b.Ca().forEach(function(b){cf(a,b.j())},this),cf(a,df(b)))};function cf(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Db=function(a,b,c){b=this.i.transaction(ef(b),0==a?"readonly":"readwrite");return new Ze(this.c,b,a,this.Ad,c)};
function ef(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Bb()&&(a.Ca().forEach(function(a){b.add(a.j())}),b.add(df(a)))});return C(b)}
m.je=function(){function a(){if(0==c.length)return v();var d=c.shift();return b(d).then(a)}function b(a){return new u(function(b,c){try{var h=d.transaction([a]).objectStore(a).openCursor(null,"prev")}catch(ka){c(ka);return}h.onsuccess=function(a){(a=a.target.result)&&(e=Math.max(e,f(a)));b(e)};h.onerror=function(){b(e)}})}var c=this.g.oa().map(function(a){return a.getName()}),d=this.i,e=0,f=function(a){return this.Ad?(a=Ec(a.value),Object.keys(a.l).reduce(function(a,b){return Math.max(a,b)},0)):a.key}.bind(this);
return new u(function(b){a().then(function(){b(e)})})};m.close=function(){this.i.close()};m.vc=function(){throw new D(511);};m.subscribe=aa();m.Bc=aa();function ff(a,b,c){lc.call(this,b,c);this.Y=a;0==b&&this.O.resolve()}r(ff,lc);ff.prototype.H=function(a){return this.Y.vc(a)};ff.prototype.oc=function(){this.O.resolve();return this.O.ha};function gf(a){this.g=a;this.L=x()}m=gf.prototype;m.Da=function(){this.g.oa().forEach(this.bg,this);return v()};m.vc=function(a){var b=this.L.get(a)||null;if(null===b)throw new D(101,a);return b};m.Db=function(a,b,c){return new ff(this,a,c)};function hf(a,b){if(!a.L.has(b)){var c=new Ie;a.L.set(b,c)}}m.bg=function(a){hf(this,a.getName());a.Bb()&&(a.Ca().forEach(function(a){hf(this,a.j())},this),hf(this,df(a)))};m.close=aa();m.subscribe=aa();m.Bc=aa();function jf(a){gf.call(this,a);this.jd=null}r(jf,gf);jf.prototype.subscribe=function(a){null===this.jd&&(this.jd=a)};jf.prototype.Bc=function(a){null===this.jd||this.jd(a)};function kf(a,b,c){this.ja=a;this.w='"'+b+'"';this.Eb=c}kf.prototype.get=function(a){var b=this.Eb;return mf(this.ja,"SELECT id, value FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var c=a.rows.length,e=Array(c),f=0;f<c;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
kf.prototype.put=function(a){if(0==a.length)return v();var b="INSERT OR REPLACE INTO "+this.w+"(id, value) VALUES (?, ?)";a.forEach(function(a){mf(this.ja,b,[a.id(),JSON.stringify(a.l)])},this);return v()};kf.prototype.remove=function(a){mf(this.ja,"DELETE FROM "+this.w+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return v()};function nf(a,b,c){lc.call(this,b,c);this.i=a;this.L=x();this.Hd=[]}r(nf,lc);function of(a){return a.replace(".","__d__").replace("#","__s__")}nf.prototype.H=function(a,b){var c=this.L.get(a)||null;null===c&&(c=new kf(this,of(a),b),this.L.set(a,c));return c};function mf(a,b,c,d){var e=w();a.Hd.push({Ig:b,yg:c,transform:d,O:e});return e.ha}
nf.prototype.oc=function(){var a=null,b=this.O.reject.bind(this.O),c=function(a,b){this.O.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var f=h;null!=a.transform&&null!=h&&(f=a.transform(h));d.push(f);a.O.resolve(f)}0<this.Hd.length?(a=h=this.Hd.shift(),b.executeSql(h.Ig,h.yg,e,c)):this.O.resolve(d)}.bind(this);0==this.sd?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.O.ha};function O(a,b,c){this.i=c;this.c=a;this.Xb=b}q("lf.backstore.WebSqlRawBackStore",O);O.prototype.Yc=g("i");O.prototype.getRawDBInstance=O.prototype.Yc;O.prototype.Zc=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.Zc;function pf(a){return new nf(a.i,1,new md(a.c,B()))}O.prototype.pc=function(a){var b=pf(this);mf(b,"DROP TABLE "+a,[]);return b.ka()};O.prototype.dropTable=O.prototype.pc;
O.prototype.bc=function(a){var b=pf(this);mf(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,c=Array(b),f=0;f<b;++f)c[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return v(c)})};function qf(a,b,c){var d=pf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.bc(b).then(function(a){a.forEach(function(a){a=c(a);mf(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
O.prototype.nc=function(a,b,c){var d=Te(c);return qf(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.nc;O.prototype.qc=function(a,b){return qf(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.qc;O.prototype.Gc=function(a,b,c){return qf(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Gc;O.prototype.vb=function(a){var b={},c;for(c in a)b[c]=Te(a[c]);return ic(b)};
O.prototype.createRow=O.prototype.vb;O.prototype.xc=g("Xb");O.prototype.getVersion=O.prototype.xc;function rf(a){mf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var b=Array(a.rows.length),d=0;d<b.length;++d)b[d]=a.rows.item(d).tbl_name;return b})}
O.prototype.dump=function(){var a=w(),b=pf(this);rf(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.bc(a).then(function(b){c[a]=b})},this);fb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function sf(a,b,c){this.c=a;this.g=b;this.Hg=c||1}m=sf.prototype;m.Da=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return v()};return new u(function(a,d){var c=window.openDatabase(this.g.name(),"",this.g.name(),this.Hg);if(null!=c)this.i=c,tf(this,b).then(function(){this.je().then(a,d)}.bind(this),function(a){if(a instanceof D)throw a;throw new D(354,a.message);});else throw new D(354);},this)};
function tf(a,b){var c=w(),d=new nf(a.i,1,new md(a.c,B()));mf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);mf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.ae(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ha}m.Db=function(a,b,c){if(null!=this.i)return new nf(this.i,a,c);throw new D(2);};m.close=aa();
m.vc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Bc=function(){throw new D(355);};m.ae=function(a,b){return uf(this).then(function(){return a(new O(this.c,b,this.i))}.bind(this))};
function uf(a){var b=a.g.oa(),c=new nf(a.i,1,new md(a.c,B())),d=new nf(a.i,1,new md(a.c,B()));mf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);rf(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){mf(d,"DROP TABLE "+('"'+a+'"'),[])});var e=[],l=[],p=[];b.map(function(a){-1==c.indexOf(a.getName())&&e.push(a.getName());a.Bb&&(a.Ca().forEach(function(a){a=of(a.j());e.push(a);l.push(a)}),a=of(df(a)),e.push(a),p.push(a))});
e.forEach(function(a){mf(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.je=function(){var a=0,b=w(),c=function(b){var c=new nf(this.i,0);mf(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ka().then(function(b){b=b[0].rows.item(0)["MAX(id)"];a=Math.max(b,a)})}.bind(this),d=this.g.oa().map(function(a){return c(a.getName())});fb(d).then(function(){gc=Math.max(gc,a+1);b.resolve()},function(a){b.reject(a)});return b.ha};function vf(a){this.$=x();this.kc=x();a.oa().forEach(function(a){this.kc.set(a.getName(),B())},this)}m=vf.prototype;m.set=function(a,b){this.$.set(b.id(),b);this.kc.get(a).add(b.id())};m.Ub=function(a,b){var c=this.kc.get(a);b.forEach(function(a){this.$.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.$.get(a)||null};function wf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Sa=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.kc.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.$.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.$.get(b),d.push(c));return d};m.remove=function(a,b){this.$.delete(b);this.kc.get(a).delete(b)};m.Rg=function(){return this.$.size};m.clear=function(){this.$.clear();this.kc.clear()};function xf(a,b,c){var d=0,e=a.length;for(c=c||yf;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function yf(a,b){return a-b}function zf(a,b,c){c=xf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Af(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(n(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Bf(){this.ia=0;this.Ac=null}Bf.prototype.add=function(a,b){this.ia+=b;this.Ac=null===this.Ac?a:a>this.Ac?a:this.Ac};Bf.prototype.remove=function(a,b){this.ia-=b};Bf.prototype.clear=function(){this.ia=0};function Cf(a,b){a.clear();b.forEach(function(a){this.ia+=a.ia},a)};function Df(a,b,c){this.w=a;this.Z=b;this.sf=c;this.ya=new Bf;this.clear()}var Ef=[];m=Df.prototype;m.getName=g("w");m.toString=function(){return this.xa.toString()};m.add=function(a,b){this.xa=this.xa.zb(a,b)};m.set=function(a,b){this.xa=this.xa.zb(a,b,!0)};m.remove=function(a,b){this.xa=this.xa.remove(a,b)};m.get=function(a){return this.xa.get(a)};m.Uc=function(a){if(null==a)return this.X().ia;if(a instanceof E){if(sd(a))return this.X().ia;if(wd(a))return this.get(a.from).length}return this.Sa([a]).length};
m.X=g("ya");m.Pd=function(a,b,c){var d=Array(a);this.xa.fill({offset:b?this.ya.ia-a-c:c,count:a,me:0},d);return b?d.reverse():d};
m.Sa=function(a,b,c,d){var e=Ff(this.xa).a[0];if(!n(e)||0==c)return Ef;b=b||!1;c=null!=c?Math.min(c,this.ya.ia):this.ya.ia;d=d||0;var f=Math.min(Math.max(this.ya.ia-d,0),c);if(0==f)return Ef;if(!n(a)||1==a.length&&a[0]instanceof E&&sd(a[0]))return this.Pd(f,b,d);a=this.Z.nf(a);var h=Array(b?this.ya.ia:f),l={count:0,W:h.length,reverse:b,K:d},p=1<this.gb().Td();a.forEach(function(a){var b=this.Z.od(a);b=this.Z.Rd(a)?e:b[0];b=this.xa.Tf(b);for(var c=0;null!=b&&l.count<l.W;){if(p){for(var d=b,f=a,L=l,
zb=h,Nc=d.s.gb(),fe=-1,La=0;La<d.a.length;++La)if(Nc.Ab(d.a[La],f)){fe=La;break}if(-1!=fe)for(La=fe;La<d.a.length&&L.count<L.W;++La)Nc.Ab(d.a[La],f)&&Gf(d,L,zb,La)}else b.Sa(a,l,h);0!=l.K||b.dd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>l.count&&h.splice(l.count,h.length-l.count);return b?Af(h,b,c,d):h};m.clear=function(){this.xa=Hf(this);this.ya.clear()};m.hb=function(a){return this.xa.hb(a)};m.min=function(){return this.Fb(this.Z.min.bind(this.Z))};m.max=function(){return this.Fb(this.Z.max.bind(this.Z))};
function If(a,b,c){if(!a.Z.Id(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.sf?[b.C[c]]:b.C[c]]}m.Fb=function(a){a:{var b=Ff(this.xa);var c=0;do if(c>=b.a.length)b=b.wa,c=0;else{var d=If(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Jf(this.xa);d=c.a.length-1;do if(0>d)c=c.ob,d=0;else{var e=If(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.La=g("sf");m.gb=g("Z");
m.Oa=function(a,b){return null!=a?0==this.Z.compare(a,b):!1};m.Ia=function(){for(var a=[],b=Ff(this.xa);b;)a.push(new fc(b.ra,[b.a,b.C])),b=b.wa;return a};function Kf(a,b,c,d){a=new Df(b,a,c);d=Lf(d,a);a.xa=d;return a}function Mf(a,b){this.ra=a;this.s=b;this.kb=0;this.wa=this.ob=this.B=null;this.a=[];this.C=[];this.h=[];this.Tf=1==b.gb().Td()?this.Je:this.Ie}function Hf(a){return new Mf(gc++,a)}function P(a){return 0==a.kb}m=Mf.prototype;m.next=g("wa");
function Nf(a){function b(a){return null!=a?a.ra.toString():"_"}var c=a.ra+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.ra}).join("|"),e=a.C.join("/"),f=b(a.ob)+"{";f=P(a)?f+e:f+d;f=f+"}"+b(a.B);a.wa&&(a=Nf(a.wa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Nf(this);a+=b[0]+"\n"+b[1]+"\n";this.h.length&&(a+=this.h[0].toString());return a};function Ff(a){return P(a)?a:Ff(a.h[0])}function Jf(a){return P(a)?a:Jf(a.h[a.h.length-1])}
function Of(a,b){b&&(b.ob=a);a&&(a.wa=b)}function Pf(a){var b=a[0],c=Hf(b.s);c.kb=b.kb+1;c.h=a;for(b=0;b<a.length;++b)a[b].B=c,0<b&&c.a.push(a[b].a[0]);return c}function Qf(a){var b=a,c=[];do c.push(b),b=b.wa;while(b);if(512>=c.length)b=Pf(c);else{var d=c.length,e=0;b=Hf(a.s);for(b.kb=a.kb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Pf(f);h.B=b;b.h.length&&(b.a.push(f[0].a[0]),Of(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}
m.get=function(a){var b=Rf(this,a);if(P(this)){var c=Ef;this.s.Oa(this.a[b],a)&&(c=c.concat(this.C[b]));return c}b=this.s.Oa(this.a[b],a)?b+1:b;return this.h[b].get(a)};m.hb=function(a){var b=Rf(this,a);return this.s.Oa(this.a[b],a)?!0:P(this)?!1:this.h[b].hb(a)};m.remove=function(a,b){Sf(this,a,-1,b);return null===this.B?(a=this,1==this.h.length&&(a=this.h[0],a.B=null),a):this};function Tf(a){return P(a)?a.a[0]:Tf(a.h[0])}function Uf(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(Tf(a.h[b]))}
function Sf(a,b,c,d){var e=Rf(a,b),f=P(a);if(!f){var h=a.s.Oa(a.a[e],b)?e+1:e;if(Sf(a.h[h],b,h,d))Uf(a);else return!1}else if(!a.s.Oa(a.a[e],b))return!1;if(a.a.length>e&&a.s.Oa(a.a[e],b)){if(n(d)&&!a.s.La()&&f&&(h=a.C[e],d=xf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.s.X().remove(b,1),a.C[e].length))return!1;a.a.splice(e,1);f&&(f=a.s.La()?1:a.C[e].length,a.C.splice(e,1),a.s.X().remove(b,f))}if(256>a.a.length&&null!==a.B){a:{if(a.wa&&256<a.wa.a.length)b=a.wa,e=d=0,f=a.a.length+1;else if(a.ob&&
256<a.ob.a.length)b=a.ob,d=a.ob.a.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=P(a)?a.C:a.h;P(a)?h=b.C:(h=b.h,h[e].B=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(Uf(b),Uf(a));b=!0}b||Vf(a,c)}return!0}
function Vf(a,b){var c;if(a.wa&&511>a.wa.a.length){var d=a.wa;var e=c=0}else a.ob&&(d=a.ob,c=d.a.length,e=P(d)?d.C.length:d.h.length);c=[c,0].concat(a.a);Array.prototype.splice.apply(d.a,c);c=null;P(a)?c=a.C:(c=a.h,c.forEach(function(a){a.B=d}));c=[e,0].concat(c);Array.prototype.splice.apply(P(d)?d.C:d.h,c);Of(a.ob,a.wa);P(d)||Uf(d);-1!=b&&(a.B.a.splice(b,1),a.B.h.splice(b,1))}
m.zb=function(a,b,c){var d=Rf(this,a);if(P(this)){if(this.s.Oa(this.a[d],a)){if(c)this.s.X().remove(a,this.s.La()?1:this.C[d].length),this.C[d]=this.s.La()?b:[b];else{if(this.s.La())throw new D(201,this.s.getName(),JSON.stringify(a));if(!zf(this.C[d],b))throw new D(109);}this.s.X().add(a,1);return this}this.a.splice(d,0,a);this.C.splice(d,0,this.s.La()?b:[b]);this.s.X().add(a,1);512==this.a.length?(d=Hf(this.s),a=Hf(this.s),a.kb=1,a.a=[this.a[256]],a.h=[this,d],a.B=this.B,this.B=a,d.a=this.a.splice(256),
d.C=this.C.splice(256),d.B=a,Of(d,this.wa),Of(this,d),d=a):d=this;return d}d=this.s.Oa(this.a[d],a)?d+1:d;a=this.h[d].zb(a,b,c);P(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].B=this,a.h[0].B=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?Xf(this):this};
function Xf(a){var b=Hf(a.s),c=Hf(a.s);b.B=a.B;b.kb=a.kb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.B=b;c.kb=a.kb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.B=c});a.B=b;Of(c,a.wa);Of(a,c);return b}function Rf(a,b){for(var c=0,d=a.a.length,e=a.s.gb();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Je=function(a){if(!P(this)){var b=Rf(this,a);this.s.Oa(this.a[b],a)&&b++;return this.h[b].Je(a)}return this};
m.Ie=function(a){if(!P(this)){var b=Rf(this,a);this.s.Oa(this.a[b],a)&&(a.some(function(a){return a==F})||b++);return this.h[b].Ie(a)}return this};
m.Sa=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.s.gb(),f=0,h=this.a.length-1,l=this.a,p=d(e.ub(l[f],a)),L=d(e.ub(l[h],a));if(1!=p&&(-1!=p||-1!=L)){var ka=function(a,b){b=a+b>>1;return b==a?b+1:b},fa=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.ub(l[b],a));if(0==h)return b;if(1==h)return-1;h=ka(b,c);if(h==c)return 0==f?c:-1;var p=d(e.ub(l[h],a));return 0==p?fa(b,h,p):-1==p?fa(h+1,c,f):fa(b+1,h,p)},yb=function(b,c){if(b>=c)return b;var f=d(e.ub(l[c],a));if(0==f)return c;
if(-1==f)return b;f=ka(b,c);if(f==c)return b;var h=d(e.ub(l[f],a));return 0==h?yb(f,c):1==h?yb(b,f-1):-1};0!=p&&(f=fa(f+1,h,L));-1!=f&&(h=yb(f,h),-1!=h&&h>=f&&Yf(this,b,c,f,h+1))}};function Gf(a,b,c,d){if(a.s.La())!b.reverse&&b.K?b.K--:c[b.count++]=a.C[d];else for(var e=0;e<a.C[d].length&&b.count<c.length;++e)!b.reverse&&b.K?b.K--:c[b.count++]=a.C[d][e]}function Yf(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.W));++d)Gf(a,b,c,d)}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.C.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.s.La()?1:this.C[c].length,0>a.offset)for(var d=this.C[c].length+a.offset;d<this.C[c].length&&0<a.count;++d)b[a.me++]=this.C[c][d],a.count--}else if(this.s.La())b[a.me++]=this.C[c],a.count--;else for(d=0;d<this.C[c].length&&0<a.count;++d)b[a.me++]=this.C[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Lf(a,b){var c=b.X();a=a.map(function(a){var d=new Mf(a.id(),b);d.a=a.l[0];d.C=a.l[1];d.a.forEach(function(a,e){c.add(a,b.La()?1:d.C[e].length)});return d});for(var d=0;d<a.length-1;++d)Of(a[d],a[d+1]);return 1<a.length?Qf(a[0]):a[0]}m.dd=function(a){return this.s.gb().dd(this.a[0],a)};function Zf(a){this.Sc=0==a?$f:ag;this.Wd=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.be=0==a?bg:cg}function ag(a,b){return a>b?1:a<b?-1:0}function $f(a,b){return ag(b,a)}function cg(a,b){return xd(a,b)}function bg(a,b){return xd(b,a)}m=Zf.prototype;m.ub=function(a,b){b=this.Wd(b);var c=[b.from==F,b.m==F];if(!c[0]){var d=this.Sc(a,b.from);c[0]=b.ea?1==d:-1!=d}c[1]||(d=this.Sc(a,b.m),c[1]=b.na?-1==d:1!=d);return c};m.compare=function(a,b){return this.Sc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Ab=function(a,b){a=this.ub(a,b);return a[0]&&a[1]};m.dd=function(a,b){return this.Ab(a,b)};m.nf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.be(a,c)}.bind(this))};m.Rd=function(a){return this.Wd(a).from==F};m.od=function(a){a=this.Wd(a);return[a.from,a.m]};m.Id=function(a){return null!==a};m.Td=k(1);
m.toString=function(){return this.compare==$f?"SimpleComparator_DESC":"SimpleComparator_ASC"};function dg(a){Zf.call(this,a);this.Sc=0==a?eg:fg}r(dg,Zf);function fg(a,b){return null===a?null===b?0:-1:null===b?1:ag(a,b)}function eg(a,b){return fg(b,a)}dg.prototype.Ab=function(a,b){return null===a?sd(b):dg.eb.Ab.call(this,a,b)};dg.prototype.Fb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};dg.prototype.min=function(a,b){var c=this.Fb(a,b);null===c&&(c=dg.eb.min.call(this,a,b));return c};
dg.prototype.max=function(a,b){var c=this.Fb(a,b);null===c&&(c=dg.eb.max.call(this,a,b));return c};function gg(a){this.pa=a.map(function(a){return new Zf(a)})}function hg(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}m=gg.prototype;m.compare=function(a,b){return hg(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return hg(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return hg(this,a,b,function(a,b,e){return a.max(b,e)})};
m.ub=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].ub(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Ab=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].Ab(a[d],b[d]);return c};m.dd=function(a,b){return this.pa[0].Ab(a[0],b[0])};
m.nf=function(a){var b=a.filter(function(a){return a.every(ia)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.pa[b].be(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,d=0;d<this.pa.length&&0==c;++d)c=this.pa[d].be(a[d],b[d]);return c}.bind(this))};m.Rd=function(a){return this.pa[0].Rd(a[0])};
m.od=function(a){var b=a.map(function(a,b){return this.pa[b].od(a)[0]},this);a=a.map(function(a,b){return this.pa[b].od(a)[1]},this);return[b,a]};m.Id=function(a){return a.every(function(a,c){return this.pa[c].Id(a)},this)};m.Td=function(){return this.pa.length};function ig(a){gg.call(this,a);this.pa=a.map(function(a){return new dg(a)})}r(ig,gg);function jg(a){if(1==a.f.length)return new Zf(a.f[0].order);var b=a.f.map(function(a){return a.order});return a.f.some(function(a){return a.ba.ec()})?new ig(b):new gg(b)};function kg(a){this.fa=a;this.mb=B();this.Jc=new Bf;this.ya=new Bf}m=kg.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.mb.add(b),this.Jc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.mb.clear(),this.Jc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.mb.delete(b),this.Jc.remove(a,1)):(this.mb.clear(),this.Jc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?C(this.mb):this.fa.get(a)};m.Uc=function(a){return this.fa.Uc(a)};
m.X=function(){Cf(this.ya,[this.fa.X(),this.Jc]);return this.ya};m.Sa=function(a,b,c,d){b=this.fa.Sa(a,b,c,d);return null!=a?b:b.concat(C(this.mb))};m.clear=function(){this.mb.clear();this.fa.clear()};m.hb=function(a){return null===a?0!=this.mb.size:this.fa.hb(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ia=function(){return[new fc(-2,C(this.mb))].concat(this.fa.Ia())};m.gb=function(){return this.fa.gb()};
function lg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);d=b[c].l;b=b.slice(0);b.splice(c,1);a=a(b);var e=new kg(a);d.forEach(function(a){e.mb.add(a)});return e}m.La=function(){return this.fa.La()};function mg(a){this.w=a;this.qb=B();this.Z=new Zf(1)}m=mg.prototype;m.getName=g("w");m.add=function(a){if("number"!=typeof a)throw new D(103);this.qb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.qb.delete(a)};m.get=function(a){return this.hb(a)?[a]:[]};m.min=function(){return this.Fb(this.Z.min.bind(this.Z))};m.max=function(){return this.Fb(this.Z.max.bind(this.Z))};
m.Fb=function(a){if(0==this.qb.size)return null;var b=C(this.qb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Uc=function(){return this.qb.size};m.Sa=function(a,b,c,d){var e=a||[vd()];a=C(this.qb).filter(function(a){return e.some(function(b){return this.Z.Ab(a,b)},this)},this);return Af(a,b,c,d)};m.clear=function(){this.qb.clear()};m.hb=function(a){return this.qb.has(a)};m.Ia=function(){return[new fc(0,C(this.qb))]};m.gb=g("Z");
function ng(a,b){var c=new mg(a);b[0].l.forEach(function(a){c.add(a,a)});return c}m.La=k(!0);m.X=function(){var a=new Bf;a.ia=this.qb.size;return a};function og(a){this.Na=a.b(tc);this.A=a.b(vc);this.U=a.b(uc)}og.prototype.Da=function(a){var b=a.oa(),c=function(){if(0==b.length)return v();var a=b.shift();return(a.Bb()?pg(this,a):qg(this,a)).then(c)}.bind(this);return c()};function qg(a,b){var c=a.Na.Db(0,[b]);a=c.H(b.getName(),b.ib.bind(b),0).get([]).then(function(a){this.U.Ub(b.getName(),a);rg(this,b,a)}.bind(a));c.ka();return a}
function rg(a,b,c){var d=a.A.ic.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.lb(b.getName());b.add(c,a.id())})})}function pg(a,b){var c=a.Na.Db(0,[b]),d=c.H(b.getName(),b.ib,0).get([]).then(function(a){this.U.Ub(b.getName(),a)}.bind(a));a=b.Ca().map(function(a){return sg(this,a,c)},a).concat(tg(a,b,c));c.ka();return fb(a.concat(d))}
function sg(a,b,c){c=c.H(b.j(),hc,1);var d=jg(b);return c.get([]).then(function(a){if(0<a.length){if(ug(b)){var c=Kf.bind(void 0,d,b.j(),b.yc);a=lg(c,a)}else a=Kf(d,b.j(),b.yc,a);this.A.set(b.jc,a)}}.bind(a))}function tg(a,b,c){return c.H(df(b),hc,1).get([]).then(function(a){0<a.length&&(a=ng(df(b),a),this.A.set(b.getName(),a))}.bind(a))};function vg(){this.Y=x();this.ic=x()}vg.prototype.Da=function(a){a.oa().forEach(function(a){var b=[];this.ic.set(a.getName(),b);var d=df(a);if(null===this.get(d)){var e=new mg(d);b.push(e);this.Y.set(d,e)}a.Ca().forEach(function(a){var c=jg(a);c=new Df(a.j(),c,a.yc);c=ug(a)&&1==a.f.length?new kg(c):c;b.push(c);this.Y.set(a.j(),c)},this)},this);return v()};vg.prototype.get=function(a){return this.Y.get(a)||null};
vg.prototype.set=function(a,b){var c=this.ic.get(a)||null;null===c&&(c=[],this.ic.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.Y.set(b.getName(),b)};function wg(a,b){var c=[],d=null,e=null;ee(a,function(a){var f=b(a);null==a.getParent()?e=f:K(d,f);var l=a.getParent();null!==l&&J(l).length==J(d).length&&(l=c.indexOf(d),-1!=l&&c.splice(l,1));1<J(a).length&&c.push(f);d=null===a.h?c[c.length-1]:f});return e}function xg(a){return yg(a,function(a){return null===a.h})}
function zg(a){var b=a.getParent(),c=0;null!==b&&(c=J(b).indexOf(a),b.removeChild(a));var d=J(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||be(b,d,c+f)});return{parent:b,children:d}}function Ag(a,b){J(a).slice().forEach(function(c){a.removeChild(c);K(b,c)});K(a,b)}function Bg(a){var b=ae(a,0);zg(a);Ag(b,a);return b}
function Cg(a,b,c){var d=ae(a,0),e=J(d).slice();if(!e.some(function(a){return b(a)}))return a;zg(a);e.forEach(function(e,h){if(b(e)){var f=c(a);ce(d,h);K(f,e);be(d,f,h)}});return d}function Dg(a,b,c,d){var e=a.getParent();null!==e&&(a=J(e).indexOf(a),ce(e,a),be(e,c,a));J(b).slice().forEach(function(a){b.removeChild(a);K(d,a)});return c}function yg(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||J(a).forEach(d)}var e=[];d(a);return e}
function Eg(a,b){var c=b||function(a){return a.toString()+"\n"},d="";ee(a,function(a){for(var b=0;b<$d(a);b++)d+="-";d+=c(a)});return d};function Fg(a){ge.call(this);this.nb=a;this.Ta=!1}r(Fg,ge);m=Fg.prototype;m.Lb=function(){return wg(this,function(a){if(a instanceof Fg){var b=new Fg(a.nb);b.Ta=a.Ta;a=a.V();b.ra=a;return b}return a.Lb()})};m.jb=function(a){var b=a||[];ee(this,function(a){a!=this&&a.jb(b)}.bind(this));a=B(b);return C(a)};m.o=function(a){var b=null!=a?a:B();ee(this,function(a){a!=this&&a.o(b)}.bind(this));return b};m.pd=function(a){this.Ta!=a&&(this.Ta=a,this.nb="and"==this.nb?"or":"and",J(this).forEach(function(b){return b.pd(a)}))};
m.eval=function(a){var b=J(this).map(function(b){return b.eval(a)});return Gg(this,b)};function Gg(a,b){return"and"==a.nb?Gd(b):Hd(b)}m.toString=function(){return"combined_pred_"+this.nb.toString()};m.pe=function(){if("or"==this.nb){var a=new zd;J(this).forEach(function(b){b=b.pe().yb();a.add(b)});return a}return new zd};m.ed=function(){return"or"==this.nb?Hg(this):!1};
function Hg(a){var b=null;return J(a).every(function(a){if(!(a instanceof ie&&a.ed()))return!1;null===b&&(b=a.I);return b.j()==a.I.j()})};function Ig(a,b,c){ge.call(this);this.ga=a;this.ma=b;this.D=c;this.Xd=null;a=Xd();this.rc=Yd(a,this.ga.F(),this.D);this.jg=a.Te.get(this.ga.F())||null}r(Ig,ge);m=Ig.prototype;m.Lb=function(){var a=new Ig(this.ga,this.ma,this.D),b=this.V();a.ra=b;return a};m.jb=function(a){return null!=a?(a.push(this.ga),a.push(this.ma),a):[this.ga,this.ma]};m.o=function(a){a=null!=a?a:B();a.add(this.ga.H());a.add(this.ma.H());return a};
m.reverse=function(){var a=this.D;switch(this.D){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Ig(this.ma,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.ma);return this.rc(b,a)},this);return new G(b,a.o())};m.toString=function(){return"join_pred("+this.ga.j()+" "+this.D+" "+this.ma.j()+")"};
function Jg(a,b,c){if(-1!=b.o().indexOf(Ld(a.ga.H()))){var d=b;b=c}else d=c;if(d.entries.length>b.entries.length){a:{c=a.ga;a.ga=a.ma;a.ma=c;switch(a.D){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.D=c;a.rc=Yd(Xd(),a.ga.F(),a.D)}return[b,d]}return[d,b]}function Kg(a){var b={};a.jb().forEach(function(a){b[a.getName()]=null});return b}
function Lg(a,b,c){null===a.Xd&&(a.Xd=Kg(a.ma.H()));var d=new Jd(new fc(-1,a.Xd),!1);return Nd(b,c,d,[Ld(a.ma.H())])}
function Mg(a,b,c,d){var e=[b,c];d||(e=Jg(a,b,c));b=e[0];c=e[1];e=b;var f=c,h=a.ga,l=a.ma;d&&(e=c,f=b,h=a.ma,l=a.ga);var p=new Vc,L=[];e.entries.forEach(function(a){var b=String(H(a,h));p.set(b,a)});var ka=e.o(),fa=f.o();f.entries.forEach(function(a){var b=H(a,l),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=Nd(a,fa,b,ka);L.push(b)}):d&&L.push(Lg(this,a,fa))}.bind(a));a=b.o().concat(c.o());return new G(L,a)}
function Ng(a,b,c,d,e){function f(a,b){b=new Jd(b,1<ka.length);a=Nd(a,fa,b,ka);L.push(a)}var h=d.Zf.H(),l=b,p=c;-1!=b.o().indexOf(Ld(h))&&(l=c,p=b);var L=[],ka=p.o(),fa=l.o();l.entries.forEach(function(a){var b=this.jg(H(a,d.rg));b=d.index.get(b);0!=b.length&&(d.index.La()?f(a,e.get(b[0])):wf(e,b).forEach(f.bind(null,a)))},a);a=l.o().concat(p.o());return new G(L,a)};function Og(a,b,c){return null===b?new ie(a,b,c):n(b.j)?new Ig(a,b,c):new ie(a,b,c)};var Pg={};q("lf.schema.DataStoreType",Pg);Pg.INDEXED_DB=0;Pg.MEMORY=1;Pg.LOCAL_STORAGE=2;Pg.FIREBASE=3;Pg.WEB_SQL=4;Pg.OBSERVABLE_STORE=5;function Qg(a,b,c,d){this.jc=a;this.name=b;this.yc=c;this.f=d}Qg.prototype.j=function(){return this.jc+"."+this.name};function ug(a){return a.f.some(function(a){return a.ba.ec()})}function Q(a,b,c,d){this.w=a;this.sa=c;this.J=b;this.ld=d;this.Ja=null}q("lf.schema.Table",Q);Q.prototype.getName=g("w");Q.prototype.getName=Q.prototype.getName;
function Ld(a){return a.Ja||a.w}Q.prototype.as=function(a){var b=new this.constructor(this.w);b.Ja=a;b.Dg=this.Dg;return b};Q.prototype.as=Q.prototype.as;Q.prototype.createRow=Q.prototype.vb;Q.prototype.deserializeRow=Q.prototype.ib;Q.prototype.Ca=g("sa");Q.prototype.getIndices=Q.prototype.Ca;Q.prototype.jb=g("J");Q.prototype.getColumns=Q.prototype.jb;Q.prototype.getConstraint=Q.prototype.He;Q.prototype.Bb=g("ld");Q.prototype.persistentIndex=Q.prototype.Bb;function df(a){return a.w+".#"};function R(a,b){this.child=a;this.Jb=b;this.Ja=null}m=R.prototype;m.getName=function(){return this.Jb+"("+this.child.getName()+")"};m.j=function(){return this.Jb+"("+this.child.j()+")"};m.H=function(){return this.child.H()};m.toString=function(){return this.j()};m.F=function(){return this.child.F()};m.Ca=function(){return[]};m.Ba=k(null);m.ec=k(!1);m.as=function(a){this.Ja=a;return this};R.prototype.as=R.prototype.as;
function Rg(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function Sg(){this.Ja=null;this.S=new Q("#UnknownTable",[],[],!1)}m=Sg.prototype;m.getName=k("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.H=g("S");m.F=k(4);m.Ca=function(){return[]};m.Ba=k(null);m.ec=k(!1);q("lf.fn.avg",function(a){return new R(a,"AVG")});function Tg(a){return new R(a||new Sg,"COUNT")}q("lf.fn.count",Tg);function Ug(a){return new R(a,"DISTINCT")}q("lf.fn.distinct",Ug);q("lf.fn.max",function(a){return new R(a,"MAX")});q("lf.fn.min",function(a){return new R(a,"MIN")});q("lf.fn.stddev",function(a){return new R(a,"STDDEV")});q("lf.fn.sum",function(a){return new R(a,"SUM")});q("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){I.call(this);this.Pf=b}r(S,I);S.prototype.exec=function(a,b){switch(this.Pf){case 1:return Vg(this,a,b);case 0:return Wg(this,a,b);default:return Xg(this,a,b)}};S.prototype.toString=k("dummy_node");S.prototype.Kc=function(){return this.toString()};function Xg(a,b,c){return new u(function(a){a(this.ca([],b,c))}.bind(a))}function Vg(a,b,c){return ae(a,0).exec(b,c).then(function(a){return this.ca(a,b,c)}.bind(a))}
function Wg(a,b,c){var d=J(a).map(function(a){return a.exec(b,c)});return fb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ca(d,b,c)}.bind(a))};function Yg(a){S.call(this,-1,1);this.we=a}r(Yg,S);Yg.prototype.toString=function(){return"aggregation("+this.we.map(function(a){return a.j()}).toString()+")"};Yg.prototype.ca=function(a){a.forEach(function(a){Zg(new $g(a,this.we))},this);return a};function $g(a,b){this.Ma=a;this.J=b}
function Zg(a){a.J.forEach(function(a){a=Rg(a).reverse();for(var b=1;b<a.length;b++){var d=a[b],e=Rg(d).slice(-1)[0],f=d.child instanceof R?Dd(this.Ma,d.child):this.Ma;if(null!==f.Xa&&f.Xa.has(d.j()))break;f=ah(d.Jb,f,e);e=this.Ma;null===e.Xa&&(e.Xa=x());e.Xa.set(d.j(),f)}},a)}
function ah(a,b,c){var d=null;switch(a){case "MIN":d=bh(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=bh(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=ch(b,c);break;case "COUNT":d=dh(b,c);break;case "SUM":d=eh(b,c);break;case "AVG":a=dh(b,c);0<a&&(d=eh(b,c)/a);break;case "GEOMEAN":d=fh(b,c);break;default:d=gh(b,c)}return d}function bh(a,b,c){return a.entries.reduce(function(a,e){e=H(e,b);return null===e?a:null===a?e:c(a,e)},null)}
function dh(a,b){return b instanceof Sg?a.entries.length:a.entries.reduce(function(a,d){return a+(null===H(d,b)?0:1)},0)}function eh(a,b){return bh(a,b,function(a,b){return b+a})}function gh(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:ub.apply(null,c)}function fh(a,b){var c=0;a=a.entries.reduce(function(a,e){e=H(e,b);if(0==e||null===e)return a;c++;return a+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function ch(a,b){var c=x();a.entries.forEach(function(a){var d=H(a,b);c.set(d,a)});return new G(y(c),a.o())};function hh(a,b){this.Ga=a;this.aa=b}hh.prototype.Za=g("Ga");hh.prototype.da=g("aa");function ih(){I.call(this)}r(ih,I);function jh(a,b){I.call(this);this.table=a;this.values=b}r(jh,ih);function kh(a,b){jh.call(this,a,b)}r(kh,jh);function lh(a){I.call(this);this.table=a}r(lh,ih);lh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function mh(a){I.call(this);this.table=a}r(mh,ih);mh.prototype.toString=function(){return"update("+this.table.getName()+")"};
function nh(a){I.call(this);this.N=a}r(nh,ih);nh.prototype.toString=function(){return"select("+this.N.toString()+")"};function oh(a){I.call(this);this.table=a}r(oh,ih);oh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};function ph(){I.call(this)}r(ph,ih);ph.prototype.toString=k("cross_product");function qh(a,b){I.call(this);this.f=a;this.Nb=b}r(qh,ih);
qh.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb){var b=this.Nb.map(function(a){return a.j()}).join(", ");a+=", groupBy("+b+")"}return a+")"};function rh(a){I.call(this);this.M=a}r(rh,ih);rh.prototype.toString=function(){return"order_by("+se(this.M)+")"};function sh(a){I.call(this);this.f=a}r(sh,ih);sh.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function th(a){I.call(this);this.f=a}r(th,ih);
th.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function uh(a){I.call(this);this.W=a}r(uh,ih);uh.prototype.toString=function(){return"limit("+this.W+")"};function vh(a){I.call(this);this.K=a}r(vh,ih);vh.prototype.toString=function(){return"skip("+this.K+")"};function wh(a,b){I.call(this);this.N=a;this.Pb=b}r(wh,ih);wh.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", "+this.N.toString()+")"};function xh(){};function yh(){}r(yh,xh);yh.prototype.cb=function(a){this.G=a;this.sb(this.G);return this.G};yh.prototype.sb=function(a){if(a instanceof nh){var b=zh(this,a.N);b=Ah(this,b);Dg(a,a,b[0],b[1]);a==this.G&&(this.G=b[0]);a=b[0]}J(a).forEach(function(a){this.sb(a)},this)};function zh(a,b){if(0==J(b).length||"and"!=b.nb)return[b];a=J(b).slice().map(function(a){b.removeChild(a);return zh(this,a)},a);return Ba(a)}
function Ah(a,b){var c=null,d=null;b.map(function(a,b){a=new nh(a);0==b?c=a:K(d,a);d=a},a);return[c,d]};function Bh(){}r(Bh,xh);Bh.prototype.cb=function(a,b){if(3>b.from.length)return a;this.G=a;this.sb(this.G);return this.G};Bh.prototype.sb=function(a){if(a instanceof ph)for(;2<J(a).length;){for(var b=new ph,c=0;2>c;c++){var d=ce(a,0);K(b,d)}be(a,b,0)}J(a).forEach(function(a){this.sb(a)},this)};function Ch(){S.call(this,2,0)}r(Ch,S);Ch.prototype.toString=k("cross_product");Ch.prototype.ca=function(a){var b=a[0],c=a[1];a=[];for(var d=b.o(),e=c.o(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var l=Nd(b.entries[f],d,c.entries[h],e);a.push(l)}b=b.o().concat(c.o());return[new G(a,b)]};function Dh(a,b){ve.call(this,a,b);this.Ha=a.b(xc);this.Gb=a.b(yc)}r(Dh,ve);Dh.prototype.getPriority=k(2);Dh.prototype.$d=function(a){0==this.F()?Eh(this,a):this.Hc()};function Eh(a,b){a.nd.forEach(function(a,d){a instanceof re&&ye(this.Gb,a,b[d])},a)}Dh.prototype.Hc=function(){var a=Ae(this.Gb,this.da());0!=a.length&&(a=new xe(this.global,a),Be(this.Ha,a))};function Fh(a){me.call(this,a)}r(Fh,me);Fh.prototype.da=function(){var a=B();a.add(this.from);Gh(this,this.from.getName(),a);return a};function Gh(a,b,c){var d=Hh(a.ba.info(),b,1);Hh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Gh(this,a.getName(),c)},a)}Fh.prototype.clone=function(){var a=new Fh(this.ba);pe(a,this);a.from=this.from;return a};Fh.prototype.bind=function(a){Fh.eb.bind.call(this,a);qe(this,a);return this};function Ih(a){me.call(this,a)}r(Ih,me);Ih.prototype.da=function(){var a=B();a.add(this.Ka);var b=this.ba.info();Jh(this.Ka.getName(),b.af).forEach(a.add.bind(a));this.Yb&&Hh(b,this.Ka.getName()).forEach(a.add.bind(a));return a};Ih.prototype.clone=function(){var a=new Ih(this.ba);pe(a,this);a.Ka=this.Ka;this.values&&(a.values=this.values instanceof Od?this.values:this.values.slice());a.Yb=this.Yb;a.Zb=this.Zb;return a};
Ih.prototype.bind=function(a){Ih.eb.bind.call(this,a);this.Zb&&(this.values=this.Zb instanceof Od?a[this.Zb.Ba()]:this.Zb.map(function(b){return b instanceof Od?a[b.Ba()]:b}));return this};function Kh(a){me.call(this,a)}r(Kh,me);Kh.prototype.da=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.I.j()}),c=this.ba.info();Lh(c,b).forEach(a.add.bind(a));Mh(c,b).forEach(a.add.bind(a));return a};Kh.prototype.clone=function(){var a=new Kh(this.ba);pe(a,this);a.table=this.table;a.set=this.set?Nh(this.set):this.set;return a};Kh.prototype.bind=function(a){Kh.eb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Oc&&(b.value=a[b.Oc])});qe(this,a);return this};
function Nh(a){return a.map(function(a){var b={},d;for(d in a)b[d]=a[d];return b})};function Oh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+jc(b)+"'";default:return"'"+b.toString()+"'"}}function Ph(a,b){var c=a.Yb?"INSERT OR REPLACE":"INSERT",d=a.Ka.jb();c+=" INTO "+a.Ka.getName()+"(";c+=d.map(function(a){return a.getName()}).join(", ");c+=") VALUES (";return a.values.map(function(a){var e=d.map(function(c){var d=a.l[c.getName()];return b?null!=d?"#":"NULL":Oh(c.F(),d)});return c+e.join(", ")+");"}).join("\n")}
function Qh(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function Rh(a,b,c,d){return a instanceof Od?"?"+a.Ba().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Oh(c,a)}).join(", ")+")":"between"==b?Oh(c,a[0])+" AND "+Oh(c,a[1]):Oh(c,a).toString()}
function Sh(a,b){return J(a).map(function(a){return"("+Th(a,b)+")"}).join("and"==a.nb?" AND ":" OR ")}function Uh(a){return[a.ga.j(),Qh(a.D),a.ma.j()].join(" ")}function Th(a,b){if(a instanceof ie){var c=a.I.j(),d=Qh(a.D);a=Rh(a.value,a.D,a.I.F(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof Fg)return Sh(a,b);if(a instanceof Ig)return Uh(a);throw new D(357,typeof a);}
function Vh(a,b){return(a=Th(a,b))?" WHERE "+a:""}function Wh(a,b){var c="UPDATE "+a.table.getName()+" SET ";c+=a.set.map(function(a){var b=a.I.j()+" = ";return-1!=a.Oc?b+"?"+a.Oc.toString():b+Oh(a.I.F(),a.value).toString()}).join(", ");a.u&&(c+=Vh(a.u,b));return c+";"}
function Xh(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ja?a.j()+" AS "+a.Ja:a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.ab&&0!=a.ab.size?c+=Yh(a,b):(c+=a.from.map(Zh).join(", "),a.u&&(c+=Vh(a.u,b)));a.M&&(b=a.M.map(function(a){return a.I.j()+(0==a.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.qa&&(b=a.qa.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+b);a.W&&(c+=" LIMIT "+a.W.toString());a.K&&(c+=" SKIP "+a.K.toString());return c+";"}
function Zh(a){return Ld(a)!=a.getName()?a.getName()+" AS "+Ld(a):a.getName()}function Yh(a,b){for(var c=yg(a.u,function(a){return a instanceof Ig}),d=c.map(Uh),e=Zh(a.from[0]),f=1;f<a.from.length;f++){var h=Zh(a.from[f]);e=a.ab.has(c[d.length-f].V())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h);e+=" ON ("+d[d.length-f]+")"}a=a.u;a=0<J(a).length?ae(a,0):a;a instanceof Ig||(e+=" WHERE "+Th(a,b));return e}
function $h(a,b){b=b||!1;a=a.query.clone();if(a instanceof Ih)return Ph(a,b);if(a instanceof Fh){var c="DELETE FROM "+a.from.getName();a.u&&(c+=Vh(a.u,b));return c+";"}if(a instanceof Kh)return Wh(a,b);if(a instanceof re)return Xh(a,b);throw new D(358,typeof a);};function T(a,b){this.global=a;this.Cg=a.b(wc);this.Ha=a.b(xc);this.query=b}q("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.Ya()}catch(a){return cb(a)}return new u(function(a,b){var c=new Dh(this.global,[this.wc()]);Be(this.Ha,c).then(function(b){a(Bd(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Rf=function(){var a=function(a){return a.Kc(this.query)+"\n"}.bind(this);return Eg(ai(this).Za(),a)};T.prototype.explain=T.prototype.Rf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Kg=function(a){return $h(this,a)};T.prototype.toSql=T.prototype.Kg;T.prototype.Ya=aa();function ai(a){if(null==a.bf){var b=a.Cg;var c=a.query,d=b.ng.create(c);b=b.zg.create(d,c);a.bf=b}return a.bf}T.prototype.wc=function(){return{context:this.query.clone(),ce:ai(this)}};function bi(a){T.call(this,a,new Fh(a.b(A)))}r(bi,T);q("lf.query.DeleteBuilder",bi);bi.prototype.from=function(a){if(null!=this.query.from)throw new D(515);this.query.from=a;return this};bi.prototype.from=bi.prototype.from;bi.prototype.u=function(a){this.zd();this.query.u=a;return this};bi.prototype.where=bi.prototype.u;bi.prototype.zd=function(){if(null==this.query.from)throw new D(548);if(null!=this.query.u)throw new D(516);};
bi.prototype.Ya=function(){bi.eb.Ya.call(this);if(null==this.query.from)throw new D(517);};function ci(a,b){T.call(this,a,new Ih(a.b(A)));this.query.Yb=b||!1}r(ci,T);q("lf.query.InsertBuilder",ci);ci.prototype.Ya=function(){ci.eb.Ya.call(this);var a=this.query;if(null==a.Ka||null==a.values)throw new D(518);if(a.Yb&&null===a.Ka.Kb.md)throw new D(519);};ci.prototype.Ka=function(a){if(null!=this.query.Ka)throw new D(520);this.query.Ka=a;return this};ci.prototype.into=ci.prototype.Ka;
ci.prototype.values=function(a){if(null!=this.query.values)throw new D(521);a instanceof Od||a.some(function(a){return a instanceof Od})?this.query.Zb=a:this.query.values=a;return this};ci.prototype.values=ci.prototype.values;function di(a){return ei("and",Array.prototype.slice.call(arguments))}q("lf.op.and",di);q("lf.op.or",function(a){return ei("or",Array.prototype.slice.call(arguments))});function ei(a,b){var c=new Fg(a);b.forEach(function(a){K(c,a)});return c}q("lf.op.not",function(a){a.pd(!0);return a});function U(a,b){T.call(this,a,new re(a.b(A)));this.Ge=this.ud=!1;this.query.f=b;fi(this);gi(this)}r(U,T);q("lf.query.SelectBuilder",U);U.prototype.Ya=function(){U.eb.Ya.call(this);var a=this.query;if(null==a.from)throw new D(522);if(n(a.Qb)&&!n(a.W)||n(a.Wb)&&!n(a.K))throw new D(523);null!=this.query.qa?hi(this):ii(this)};function fi(a){var b=a.query.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Jb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new D(524);}
function hi(a){if(a.query.qa.some(function(a){a=a.F();return 6==a||0==a}))throw new D(525);}function ii(a){var b=a.query.f.some(function(a){return a instanceof R},a);a=a.query.f.some(function(a){return!(a instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new D(526);}function gi(a){a.query.f.forEach(function(a){if(a instanceof R&&!ji(a.Jb,a.F()))throw new D(527,a.j());},a)}function ki(a,b){if(null==a.query.from)throw new D(b);}
U.prototype.from=function(a){if(this.Ge)throw new D(515);this.Ge=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.u=function(a){ki(this,548);if(this.ud)throw new D(516);this.ud=!0;li(this,a);return this};U.prototype.where=U.prototype.u;function li(a,b){null!=a.query.u&&(b=di(b,a.query.u));a.query.u=b}
U.prototype.cg=function(a,b){ki(this,542);if(this.ud)throw new D(547);this.query.from.push(a);li(this,b);return this};U.prototype.innerJoin=U.prototype.cg;U.prototype.kg=function(a,b){ki(this,542);if(!(b instanceof Ig))throw new D(541);if(this.ud)throw new D(547);this.query.from.push(a);null==this.query.ab&&(this.query.ab=B());var c=b;Ld(a)!=Ld(b.ma.H())&&(c=b.reverse());this.query.ab.add(c.V());li(this,c);return this};U.prototype.leftOuterJoin=U.prototype.kg;
U.prototype.W=function(a){if(null!=(this.query.W||this.query.Qb))throw new D(528);if(a instanceof Od)this.query.Qb=a;else{if(0>a)throw new D(531);this.query.W=a}return this};U.prototype.limit=U.prototype.W;U.prototype.K=function(a){if(null!=(this.query.K||this.query.Wb))throw new D(529);if(a instanceof Od)this.query.Wb=a;else{if(0>a)throw new D(531);this.query.K=a}return this};U.prototype.skip=U.prototype.K;
U.prototype.M=function(a,b){ki(this,549);null==this.query.M&&(this.query.M=[]);this.query.M.push({I:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.M;U.prototype.qa=function(a){ki(this,549);if(null!=this.query.qa)throw new D(530);null==this.query.qa&&(this.query.qa=[]);this.query.qa.push.apply(this.query.qa,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.qa;
function ji(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Rc=null;return a};U.prototype.clone=U.prototype.clone;function mi(a,b){T.call(this,a,new Kh(a.b(A)));this.query.table=b}r(mi,T);q("lf.query.UpdateBuilder",mi);mi.prototype.set=function(a,b){a={Oc:b instanceof Od?b.Ba():-1,I:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};mi.prototype.set=mi.prototype.set;mi.prototype.u=function(a){this.zd();this.query.u=a;return this};mi.prototype.where=mi.prototype.u;mi.prototype.zd=function(){if(null!=this.query.u)throw new D(516);};
mi.prototype.Ya=function(){mi.eb.Ya.call(this);if(null==this.query.set)throw new D(532);if(this.query.set.some(function(a){return a.value instanceof Od}))throw new D(501);};function ni(a){this.query=a;this.Ga=null}ni.prototype.dc=function(){null===this.Ga&&(this.Ga=this.Wc());return this.Ga};function oi(a){ni.call(this,a)}r(oi,ni);oi.prototype.Wc=function(){return this.query.Yb?new kh(this.query.Ka,this.query.values):new jh(this.query.Ka,this.query.values)};function pi(a){ni.call(this,a)}r(pi,ni);pi.prototype.Wc=function(){var a=new mh(this.query.table),b=null!=this.query.u?new nh(this.query.u.Lb()):null,c=new oh(this.query.table);null===b?K(a,c):(K(b,c),K(a,b));return a};function qi(a,b,c){this.Ga=a;this.ee=b;this.Tb=c}qi.prototype.dc=function(){this.Tb.forEach(function(a){this.Ga=a.cb(this.Ga,this.ee)},this);return this.Ga};function ri(a,b){ni.call(this,a);this.Tb=b}r(ri,ni);ri.prototype.Wc=function(){var a=new lh(this.query.from),b=null!=this.query.u?new nh(this.query.u.Lb()):null,c=new oh(this.query.from);null===b?K(a,c):(K(b,c),K(a,b));return(new qi(a,this.query,this.Tb)).dc()};function si(){}r(si,xh);si.prototype.cb=function(a,b){if(2>b.from.length)return a;this.G=a;this.sb(this.G,b);return this.G};si.prototype.sb=function(a,b){if(a instanceof nh&&a.N instanceof Ig){var c=a.N.V(),d=ae(a,0);d instanceof ph&&(c=null!=b.ab&&b.ab.has(c),c=new wh(a.N,c),Dg(a,d,c,c),a==this.G&&(this.G=c),a=c)}J(a).forEach(function(a){this.sb(a,b)},this)};function ti(){this.Nc=B()}r(ti,xh);ti.prototype.cb=function(a,b){if(!n(b.u))return a;this.Nc.clear();this.G=a;this.sb(this.G,b);this.Nc.clear();return this.G};ti.prototype.sb=function(a,b){var c=function(a){J(a).forEach(d)}.bind(this),d=function(a){if(!this.Nc.has(a)){if(a instanceof nh){var e=a.N.o(),h=function(a){return ui(this,a,e)}.bind(this);h=vi(this,b,a,h);this.Nc.add(a);h!=a&&(null===h.getParent()&&(this.G=h),d(h))}c(a)}}.bind(this);d(a)};
function vi(a,b,c,d){var e=c;if(wi(b,c))e=Bg(c),vi(a,b,c,d);else if(xi(c)){var f=[];e=Cg(c,d,function(a){a=new nh(a.N);f.push(a);return a});f.forEach(function(a){vi(this,b,a,d)},a)}return e}function ui(a,b,c){var d=B();xg(b).forEach(function(a){d.add(a.table)},a);b instanceof oh&&d.add(b.table);return zc(d,c)}function xi(a){a=ae(a,0);return a instanceof ph||a instanceof wh}
function wi(a,b){var c=ae(b,0);if(!(c instanceof nh))return!1;if(null==a.ab)return!0;b=b.N instanceof Ig;a=a.ab.has(c.N.V());return b||!a};function yi(a,b){ni.call(this,a);this.Tb=b;this.df=this.Xe=this.mf=this.$e=this.xe=this.Me=this.lf=this.De=this.pf=null}r(yi,ni);
yi.prototype.Wc=function(){zi(this);2<=this.query.from.length&&(this.De=new ph);this.lf=null!=this.query.u?new nh(this.query.u.Lb()):null;this.query.M&&(this.$e=new rh(this.query.M));null!=this.query.K&&0<this.query.K&&(this.mf=new vh(this.query.K));null!=this.query.W&&(this.Xe=new uh(this.query.W));null!=this.query.qa&&(this.Me=new th(this.query.qa));Ai(this);this.df=new qh(this.query.f||[],this.query.qa||null);var a=Bi(this);return(new qi(a,this.query,this.Tb)).dc()};
function Bi(a){for(var b=[a.Xe,a.mf,a.df,a.$e,a.xe,a.Me,a.lf,a.De],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:K(b[c],f),c=e)}a.pf.forEach(function(a){K(b[c],a)});return d}function zi(a){a.pf=a.query.from.map(function(a){return new oh(a)},a)}function Ai(a){var b=a.query.f.filter(function(a){return a instanceof R});null!=a.query.M&&a.query.M.forEach(function(a){a.I instanceof R&&b.push(a.I)});0<b.length&&(a.xe=new sh(b))};function Ci(){this.ke=[new yh,new Bh,new ti,new si];this.Jd=[new yh]}Ci.prototype.create=function(a){if(a instanceof Ih)var b=new oi(a);else if(a instanceof Fh)b=new ri(a,this.Jd);else if(a instanceof re)b=new yi(a,this.ke);else if(a instanceof Kh)b=new pi(a);else throw new D(513);b=b.dc();return new hh(b,a.da())};function Di(a){S.call(this,1,1);this.S=a}r(Di,S);Di.prototype.toString=function(){return"delete("+this.S.getName()+")"};Di.prototype.ca=function(a,b){a=a[0].entries.map(function(a){return a.ta});b.remove(this.S,a);return[Fd()]};function Ei(a,b){S.call(this,0,-1);this.table=b;this.A=a.b(vc)}r(Ei,S);Ei.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Ei.prototype.ca=function(){var a=this.A.get(df(this.table)),b=new G([],[this.table.getName()]),c=Tg();a=a.X().ia;null===b.Xa&&(b.Xa=x());b.Xa.set(c.j(),a);return[b]};function Fi(a,b){S.call(this,0,-1);this.U=a.b(uc);this.A=a.b(vc);this.table=b}r(Fi,S);Fi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ja||(a+=" as "+this.table.Ja);return a+")"};Fi.prototype.ca=function(){var a=this.A.get(df(this.table)).Sa();return[Id(wf(this.U,a),[Ld(this.table)])]};function Gi(a){this.c=a}r(Gi,xh);Gi.prototype.cb=function(a,b){this.G=a;if(!this.Bd(b))return a;a=yg(a,function(a){return a instanceof Fi})[0];b=new Ei(this.c,a.table);Dg(a,a,b,b);return this.G};Gi.prototype.Bd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.u&&null==a.W&&null==a.K&&null==a.qa?(a=a.f[0],a instanceof R&&"COUNT"==a.Jb&&a.child instanceof Sg):!1};function Hi(a){S.call(this,1,1);this.Le=a}r(Hi,S);Hi.prototype.toString=function(){return"groupBy("+this.Le.map(function(a){return a.j()}).toString()+")"};Hi.prototype.ca=function(a){return Ii(this,a[0])};function Ii(a,b){var c=new Vc,d=function(a){return this.Le.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),b.o())},a)};function Ji(a,b,c){S.call(this,2,0);this.A=a.b(vc);this.U=a.b(uc);this.N=b;this.Pb=c;this.xd="eq"==this.N.D?0:2;this.Oe=null}r(Ji,S);var Ki=["hash","index_nested_loop","nested_loop"];Ji.prototype.toString=function(){return"join(type: "+(this.Pb?"outer":"inner")+", impl: "+Ki[this.xd]+", "+this.N.toString()+")"};
Ji.prototype.ca=function(a){switch(this.xd){case 0:return[Mg(this.N,a[0],a[1],this.Pb)];case 1:return[Ng(this.N,a[0],a[1],this.Oe,this.U)];default:var b=this.N,c=a[0];a=a[1];var d=this.Pb,e=[c,a];d||(e=Jg(b,c,a));c=e[0];a=e[1];e=[];for(var f=c.o(),h=a.o(),l=c.entries.length,p=a.entries.length,L=p+256-1>>8,ka=0;ka<L;){for(var fa=0;fa<l;fa++){var yb=!1,Wf=H(c.entries[fa],b.ga);if(null!==Wf)for(var Li=Math.min(ka+1<<8,p),zb=ka<<8;zb<Li;zb++)if(b.rc(Wf,H(a.entries[zb],b.ma))){yb=!0;var Nc=Nd(c.entries[fa],
f,a.entries[zb],h);e.push(Nc)}d&&!yb&&e.push(Lg(b,c.entries[fa],f))}ka++}b=c.o().concat(a.o());return[new G(e,b)]}};function Mi(a,b){a.xd=1;var c=a.A.get(b.Ba().j());a.Oe={Zf:b,rg:b==a.N.ga?a.N.ma:a.N.ga,index:c}};function Ni(a){S.call(this,-1,-1);this.ef=a}r(Ni,S);Ni.prototype.toString=function(){return"no_op_step("+this.ef[0].o().join(",")+")"};Ni.prototype.ca=g("ef");function Oi(){}r(Oi,xh);Oi.prototype.cb=function(a,b){this.G=a;if(!this.Bd(b))return a;yg(a,function(a){return a instanceof Ji}).forEach(this.Bg,this);return this.G};Oi.prototype.Bd=function(a){return 1<a.from.length};
Oi.prototype.Bg=function(a){if("eq"==a.N.D&&!a.Pb){var b=function(b){if(!(b instanceof Fi))return null;b=Ld(b.table)==Ld(a.N.ma.H())?a.N.ma:a.N.ga;return null===b.Ba()?null:b},c=b(ae(a,0));b=b(ae(a,1));if(null!==c||null!==b){b=null===b?c:b;Mi(a,b);var d=new G([],[Ld(b.H())]);de(a,new Ni([d]),b==c?0:1)}}};function Pi(a){a=a.map(function(a){return a.yb()});a=Bb.apply(null,a);var b=[];Ab(a,function(a){b.push(a)});return b}function Qi(a){this.Ob=a}Qi.prototype.Xc=function(){return 1==this.Ob.f.length?[vd()]:[this.Ob.f.map(function(){return vd()})]};function Ri(a,b){this.Ob=a;this.Fa=b;this.Fd=this.Ve=null}
function Si(a,b){var c=x();a.Fa.keys().forEach(function(a){var d=this.Fa.get(a).map(function(a){return ne(b,a)},this),f=new zd([vd()]);d.forEach(function(a){f=Ad(f,a.pe())});c.set(a,f)},a);return c}Ri.prototype.Xc=function(a){if(this.Ve==a)return this.Fd;for(var b=Si(this,a),c=this.Ob.f.length-1;0<=c;c--){var d=this.Ob.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new zd([vd()]))}this.Fd=1==this.Ob.f.length?y(b)[0].yb():Pi(Ti(this,b));this.Ve=a;return this.Fd};
function Ti(a,b){var c=x(),d=0;a.Ob.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return ec(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function Ui(a,b){this.rd=b;this.A=a.b(vc)}function Vi(a){a=a.A.get(df(a.rd));return Math.floor(.02*a.X().ia)}function Wi(a,b,c){c=c.filter(a.fg,a);if(0==c.length)return null;a=Xi(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var e=Yi(c,b);return e<d?(d=e,c):a},null)}
function Xi(a,b){return a.rd.Ca().map(function(a){a=new Zi(this.A,a);$i(a,b);return a},a).filter(function(a){if(null===a.Fa)a=!1;else{for(var b=!1,c=!0,f=0;f<a.$a.f.length;f++){var h=a.Fa.has(a.$a.f[f].ba.getName());if(b&&h){c=!1;break}h||(b=!0)}a=c}return a})}Ui.prototype.fg=function(a){return a instanceof ie?!a.ed()||a.I.H()!=this.rd||"in"==a.D&&a.value.length>Vi(this)?!1:!0:a instanceof Fg?a.ed()&&ae(a,0).I.H()==this.rd?J(a).length<=Vi(this):!1:!1};
function Zi(a,b){this.A=a;this.$a=b;this.$f=B(this.$a.f.map(function(a){return a.ba.getName()}));this.Ud=this.Fa=null}function aj(a){null===a.Ud&&(a.Ud=new Ri(a.$a,a.Fa));return a.Ud}function $i(a,b){b.forEach(function(a){var b=a.jb()[0].getName();this.$f.has(b)&&(null===this.Fa&&(this.Fa=new Vc),this.Fa.set(b,a.V()))},a)}function Yi(a,b){b=aj(a).Xc(b);var c=a.A.get(a.$a.j());return b.reduce(function(a,b){return a+c.Uc(b)},0)};function bj(a,b,c,d){S.call(this,0,-1);this.A=a.b(vc);this.index=b;this.Ue=c;this.ie=d;this.Mc=this.Lc=!1}r(bj,S);bj.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.ie?"reverse":"natural")+(this.Lc?", limit:?":"")+(this.Mc?", skip:?":"")+")"};bj.prototype.Kc=function(a){var b=this.toString(),c=this.Ue.Xc(a);b=b.replace("?",c.toString());this.Lc&&(b=b.replace("?",a.W.toString()));this.Mc&&(b=b.replace("?",a.K.toString()));return b};
bj.prototype.ca=function(a,b,c){a=this.Ue.Xc(c);b=this.A.get(this.index.j());c=(1==a.length&&a[0]instanceof E&&wd(a[0])?Af(b.get(a[0].from),!1,this.Lc?c.W:void 0,this.Mc?c.K:void 0):b.Sa(a,this.ie,this.Lc?c.W:void 0,this.Mc?c.K:void 0)).map(function(a){return new fc(a,{})},this);return[Id(c,[this.index.jc])]};function cj(){S.call(this,-1,0)}r(cj,S);cj.prototype.toString=k("multi_index_range_scan()");
cj.prototype.ca=function(a){var b=x();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.ta.id(),a)})});var c=y(b);return[new G(c,a[0].o())]};function dj(a){S.call(this,1,1);this.gc=a}r(dj,S);dj.prototype.toString=k("select(?)");dj.prototype.Kc=function(a){a=ne(a,this.gc);return this.toString().replace("?",a.toString())};dj.prototype.ca=function(a,b,c){return[ne(c,this.gc).eval(a[0])]};function ej(a,b){S.call(this,1,1);this.U=a.b(uc);this.S=b}r(ej,S);ej.prototype.toString=function(){return"table_access_by_row_id("+this.S.getName()+")"};ej.prototype.ca=function(a){return[Id(wf(this.U,Cd(a[0])),[Ld(this.S)])]};function fj(a){this.c=a}r(fj,xh);fj.prototype.cb=function(a,b){this.G=a;yg(a,function(a){return a instanceof Fi}).forEach(function(a){var c=gj(a);if(0!=c.length){var e=Wi(new Ui(this.c,a.table),b,c.map(function(a){return ne(b,a.gc)}));if(null!==e){var f=x();c.forEach(function(a){f.set(a.gc,a)},this);this.G=hj(this,e,f,a)}}},this);return this.G};function gj(a){var b=[];for(a=a.getParent();a;){if(a instanceof dj)b.push(a);else if(a instanceof Ji)break;a=a.getParent()}return b}
function hj(a,b,c,d){(null===b.Fa?[]:b.Fa.values()).map(function(a){return c.get(a)}).forEach(zg);b=new bj(a.c,b.$a,aj(b),!1);a=new ej(a.c,d.table);K(a,b);Dg(d,d,a,b);return b.Za()};function ij(a,b){S.call(this,0,-1);this.A=a.b(vc);this.S=b}r(ij,S);ij.prototype.toString=function(){return"insert("+this.S.getName()+")"};ij.prototype.ca=function(a,b,c){jj(this.S,c.values,this.A);b.zb(this.S,c.values);return[Id(c.values,[this.S.getName()])]};function jj(a,b,c){a=a.Kb.md;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.j()).X().Ac;var e=null===c?0:c;b.forEach(function(a){if(0==a.l[d]||null==a.l[d])e++,a.l[d]=e})}}
function kj(a,b){S.call(this,0,-1);this.A=a.b(vc);this.S=b}r(kj,S);kj.prototype.toString=function(){return"insert_replace("+this.S.getName()+")"};kj.prototype.ca=function(a,b,c){jj(this.S,c.values,this.A);b.Qd(this.S,c.values);return[Id(c.values,[this.S.getName()])]};function lj(){S.call(this,1,1)}r(lj,S);lj.prototype.toString=k("limit(?)");lj.prototype.Kc=function(a){return this.toString().replace("?",a.W.toString())};lj.prototype.ca=function(a,b,c){a[0].entries.splice(c.W);return a};function mj(a){S.call(this,-1,1);this.M=a}r(mj,S);m=mj.prototype;m.toString=function(){return"order_by("+se(this.M)+")"};m.ca=function(a){if(1==a.length){var b=a[0];for(var c=null,d=0;d<this.M.length;d++){var e=Ug(this.M[d].I);if(null!==b.Xa&&b.Xa.has(e.j())){c=e;break}}b=c;(null===b?a[0]:Dd(a[0],b)).entries.sort(this.Of.bind(this))}else a.sort(this.Eg.bind(this));return a};
m.Z=function(a,b){var c=-1;do{c++;var d=this.M[c].I;var e=this.M[c].order;var f=a(d);d=b(d)}while(f==d&&c+1<this.M.length);a=f<d?-1:f>d?1:0;return 1==e?a:-a};m.Eg=function(a,b){return this.Z(function(b){return b instanceof R?Dd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?Dd(b,a):H(b.entries[b.entries.length-1],a)})};m.Of=function(a,b){return this.Z(function(b){return H(a,b)},function(a){return H(b,a)})};function nj(a,b){this.Ma=a;this.J=b}function oj(a){return a.J.some(function(a){return a instanceof R},a)?pj(a):qj(a)}function pj(a){if(1==a.J.length&&"DISTINCT"==a.J[0].Jb)return a=Dd(a.Ma,a.J[0]).entries.map(function(a){var b=new Jd(new fc(-1,{}),1<this.Ma.L.size);Md(b,this.J[0],H(a,this.J[0].child));return b},a),new G(a,[]);var b=new Jd(new fc(-1,{}),1<a.Ma.L.size);a.J.forEach(function(a){var c=a instanceof R?Dd(this.Ma,a):H(this.Ma.entries[0],a);Md(b,a,c)},a);return new G([b],a.Ma.o())}
function qj(a){var b=Array(a.Ma.entries.length),c=1<a.Ma.L.size;a.Ma.entries.forEach(function(a,e){b[e]=new Jd(new fc(a.ta.id(),{}),c);this.J.forEach(function(c){Md(b[e],c,H(a,c))},this)},a);return new G(b,a.Ma.o())}function rj(a,b){var c=a.map(function(a){return oj(new nj(a,b)).entries[0]});return new G(c,a[0].o())};function sj(a,b){S.call(this,-1,1);this.f=a;this.Nb=b}r(sj,S);sj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Nb){var b=this.Nb.map(function(a){return a.j()}).join(", ");a+=", groupBy("+b+")"}return a+")"};sj.prototype.ca=function(a){0==a.length?a=[Fd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:oj(new nj(a,this.f))]):a=[rj(a,this.f)];return a};function tj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Nb};function uj(){S.call(this,1,1)}r(uj,S);uj.prototype.toString=k("skip(?)");uj.prototype.Kc=function(a){return this.toString().replace("?",a.K.toString())};uj.prototype.ca=function(a,b,c){return[new G(a[0].entries.slice(c.K),a[0].o())]};function vj(){}r(vj,xh);vj.prototype.cb=function(a,b){if(!n(b.W)&&!n(b.K))return a;var c=wj(a);if(null===c)return a;yg(a,function(a){return a instanceof lj||a instanceof uj}).forEach(function(a){a instanceof lj?c.Lc=!0:c.Mc=!0;zg(a)},this);return c.Za()};function wj(a){a=yg(a,function(a){return a instanceof bj},function(a){return a instanceof sj&&tj(a)||a instanceof mj||1!=J(a).length||a instanceof dj});return 0<a.length?a[0]:null};function xj(a){this.c=a}r(xj,xh);xj.prototype.cb=function(a,b){this.G=a;var c=yj(this,b);if(0==c.length)return this.G;var d=0;do{var e=c[d++];a=zj(this,e,b)}while(null===a&&d<c.length);if(null===a)return this.G;b=Aj(this,a[0].$a.jc);return null===b?this.G:this.G=Bj(this,e,b,a)};function yj(a,b){return yg(a.G,function(a){if(!(a instanceof dj))return!1;a=ne(b,a.gc);return a instanceof Fg&&"or"==a.nb})}
function Aj(a,b){return yg(a.G,function(a){return a instanceof Fi&&a.table.getName()==b})[0]||null}function zj(a,b,c){b=ne(c,b.gc);var d=b.o();if(1!=d.size)return null;d=C(d)[0];var e=new Ui(a.c,d),f=null;return J(b).every(function(a){a=Wi(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function Bj(a,b,c,d){var e=new ej(a.c,c.table),f=new cj;K(e,f);d.forEach(function(a){a=new bj(this.c,a.$a,aj(a),!1);K(f,a)},a);zg(b);Dg(c,c,e,f);return f.Za()};function Cj(a){this.c=a}r(Cj,xh);Cj.prototype.cb=function(a,b){b=Dj(a,b);if(null===b)return a;a:{var c=b;a=Ej(ae(b,0));if(null!==a){var d=b.M;for(var e=null,f=a.table.Ca(),h=0;h<f.length&&null===e;h++)e=Fj(f[h],d);d=e;if(null===d){a=c;break a}c=new bj(this.c,d.$a,new Qi(d.$a),d.Re);d=new ej(this.c,a.table);K(d,c);zg(b);c=Dg(a,a,d,c)}a=c}a==b&&(a=b,c=Gj(ae(b,0)),null!==c&&(d=Fj(c.index,b.M),null!==d&&(c.ie=d.Re,a=zg(b).parent)));return a.Za()};
function Gj(a){a=yg(a,function(a){return a instanceof bj},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Ej(a){a=yg(a,function(a){return a instanceof Fi},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Dj(a,b){return n(b.M)?yg(a,function(a){return a instanceof mj})[0]:null}function Fj(a,b){if(a.f.length!=b.length||!b.every(function(b,d){return b.I.getName()==a.f[d].ba.getName()}))return null;b=Hj(b,a);return b[0]||b[1]?{$a:a,Re:b[1]}:null}
function Hj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0);c^=d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Ij(a,b,c){this.Ga=a;this.ee=b;this.Tb=c}Ij.prototype.dc=function(){this.Tb.forEach(function(a){this.Ga=a.cb(this.Ga,this.ee)},this);return this.Ga};function Jj(a){S.call(this,1,1);this.S=a}r(Jj,S);Jj.prototype.toString=function(){return"update("+this.S.getName()+")"};Jj.prototype.ca=function(a,b,c){a=a[0].entries.map(function(a){var b=this.S.ib(a.ta.Ia());c.set.forEach(function(a){b.l[a.I.getName()]=a.value},this);return b},this);b.update(this.S,a);return[Fd()]};function Kj(a){this.c=a;this.ke=[new Oi,new fj(this.c),new xj(this.c),new Cj(this.c),new vj,new Gi(this.c)];this.Jd=[new fj(this.c)]}Kj.prototype.create=function(a,b){var c=a.Za();if(c instanceof kh||c instanceof jh)return Lj(this,a,b);if(c instanceof qh||c instanceof uh||c instanceof vh)return Lj(this,a,b,this.ke);if(c instanceof lh||c instanceof mh)return Lj(this,a,b,this.Jd);throw new D(8);};
function Lj(a,b,c,d){a=wg(b.Za(),a.qg.bind(a));null!=d&&(a=(new Ij(a,c,d)).dc());return new te(a,b.da())}
Kj.prototype.qg=function(a){if(a instanceof qh)return new sj(a.f,a.Nb);if(a instanceof th)return new Hi(a.f);if(a instanceof sh)return new Yg(a.f);if(a instanceof rh)return new mj(a.M);if(a instanceof vh)return new uj;if(a instanceof uh)return new lj;if(a instanceof nh)return new dj(a.N.V());if(a instanceof ph)return new Ch;if(a instanceof wh)return new Ji(this.c,a.N,a.Pb);if(a instanceof oh)return new Fi(this.c,a.table);if(a instanceof lh)return new Di(a.table);if(a instanceof mh)return new Jj(a.table);
if(a instanceof kh)return new kj(this.c,a.table);if(a instanceof jh)return new ij(this.c,a.table);throw new D(514);};function Mj(a){this.ng=new Ci;this.zg=new Kj(a)};function Nj(){this.Ye=x()}function Oj(a,b){var c=a.Ye.get(b.getName())||null;null===c&&(c=new Pj,a.Ye.set(b.getName(),c));return c}function Qj(a,b,c,d){c.forEach(function(a){a=Oj(this,a);0==d?(a.bb=null,a.sc=b):3==d?(null===a.Vb&&(a.Vb=B()),a.Vb.add(b),null===a.Va&&(a.Va=B()),a.Va.delete(b)):1==d?(null===a.Va&&(a.Va=B()),a.Va.add(b)):2==d&&(a.bb=b)},a)}
function Rj(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Oj(this,a);var c=null===a.Va||0==a.Va.size;e=0==d?(null===a.Vb||0==a.Vb.size)&&c&&null===a.sc&&null!==a.bb&&a.bb==b:3==d?null===a.sc&&null===a.bb&&null!==a.Va&&a.Va.has(b):1==d?null===a.bb:c&&(null===a.bb||a.bb==b)}},a);return e}function Sj(a,b,c,d){var e=Rj(a,b,c,d);e&&Qj(a,b,c,d);return e}Nj.prototype.releaseLock=function(a,b){b.forEach(function(b){Oj(this,b).releaseLock(a)},this)};
function Tj(a,b){b.forEach(function(a){Oj(this,a).bb=null},a)}function Pj(){this.Vb=this.Va=this.bb=this.sc=null}Pj.prototype.releaseLock=function(a){this.sc==a&&(this.sc=null);this.bb==a&&(this.bb=null);null===this.Va||this.Va.delete(a);null===this.Vb||this.Vb.delete(a)};function Uj(){this.Sb=new Vj;this.zc=new Nj}function Be(a,b){(2>b.getPriority()||2>b.getPriority())&&Tj(a.zc,b.da());a.Sb.zb(b);Wj(a);return b.Cb.ha}function Wj(a){for(var b=a.Sb.yb(),c=0;c<b.length;c++){var d=b[c];if(0==d.F()?Xj(a,d,1,3):Xj(a,d,2,0)){a.Sb.remove(d);var e=a;d.exec().then(e.wg.bind(e,d),e.vg.bind(e,d))}}}function Xj(a,b,c,d){var e=!1;Sj(a.zc,b.V(),b.da(),c)&&(e=Sj(a.zc,b.V(),b.da(),d));return e}Uj.prototype.wg=function(a,b){this.zc.releaseLock(a.V(),a.da());a.Cb.resolve(b);Wj(this)};
Uj.prototype.vg=function(a,b){this.zc.releaseLock(a.V(),a.da());a.Cb.reject(b);Wj(this)};function Vj(){this.Sb=[]}Vj.prototype.zb=function(a){zf(this.Sb,a,function(a,c){var b=a.getPriority()-c.getPriority();return 0==b?a.V()-c.V():b})};Vj.prototype.yb=function(){return this.Sb.slice()};Vj.prototype.remove=function(a){var b=this.Sb;a=ua(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function Yj(){this.Ic=x()}var Zj;function ak(){Zj||(Zj=new Yj);return Zj}Yj.prototype.clear=function(){this.Ic.clear()};Yj.prototype.clear=Yj.prototype.clear;Yj.prototype.pb=function(a,b){this.Ic.set(a.toString(),b);return b};Yj.prototype.registerService=Yj.prototype.pb;Yj.prototype.b=function(a){var b=this.Ic.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};Yj.prototype.getService=Yj.prototype.b;Yj.prototype.fd=function(a){return this.Ic.has(a.toString())};
Yj.prototype.isRegistered=Yj.prototype.fd;function bk(){var a=ak();return ec(a.Ic)};function ck(a,b,c,d){return null!=a?null!=b?dk(a,b,c,d):ek(a):fk()}function gk(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function hk(a){var b=ak();a=new sc("ns_"+a);return b.fd(a)?b.b(a):null}function fk(){var a={};bk().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=hk(b).b(A).version())});return gk(a)}function ek(a){a=hk(a);var b={};if(null!=a){var c=a.b(vc);a.b(A).oa().forEach(function(a){b[a.getName()]=c.get(df(a)).X().ia})}return gk(b)}
function dk(a,b,c,d){var e=hk(a);a=[];if(null!=e){var f=null;try{f=e.b(A).table(b)}catch(h){}null!=f&&(b=e.b(vc),e=e.b(uc),c=b.get(df(f)).Sa(void 0,!1,c,d),c.length&&(a=wf(e,c).map(function(a){return a.l})))}return gk(a)};function ik(a,b){this.Kd=Xd();this.fe=a;this.hd=b;this.J=jk(this)}function jk(a){if(0<a.fe.f.length)return a.fe.f;var b=[];a.fe.from.forEach(function(a){a.jb().forEach(function(a){b.push(a)})});return b}ik.prototype.Z=function(a,b){return this.J.every(function(c){return 6==c.F()||0==c.F()?H(a,c)===H(b,c):Yd(this.Kd,c.F(),"eq")(H(a,c),H(b,c))},this)};
function kk(a,b,c){var d=null===b?[]:b.entries,e=qb(d,c.entries,a.Z.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var l=d[h];e[f]==l?f++:(l=a.hd.splice(f,1),l=lk(h,l,0,a.hd),b.push(l))}e=qb(d,c.entries,a.Z.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)l=c.entries[h],e[f]==l?f++:(a.hd.splice(h,0,l.ta.l),l=lk(h,[],1,a.hd),b.push(l));return b}function lk(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function mk(){this.cc=x()}mk.prototype.wd=function(a,b){var c=ma(a.query).toString(),d=this.cc.get(c)||null;null===d&&(d=new nk(a),this.cc.set(c,d));d.wd(b)};mk.prototype.ge=function(a,b){a=ma(a.query).toString();var c=this.cc.get(a)||null;c.ge(b);0<c.Cc.size||this.cc.delete(a)};function Ae(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.cc.forEach(function(a){a=a.wc();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function ye(a,b,c){b=ma(null!=b.Rc?b.Rc:b).toString();a=a.cc.get(b)||null;null!==a&&ok(a,c)}function nk(a){this.Bf=a;this.Cc=B();this.tg=[];this.We=null;this.Mf=new ik(a.query,this.tg)}nk.prototype.wd=function(a){this.Cc.has(a)||this.Cc.add(a)};nk.prototype.ge=function(a){this.Cc.delete(a)};nk.prototype.wc=function(){var a=this.Bf;return{context:a.query,ce:ai(a)}};function ok(a,b){var c=kk(a.Mf,a.We,b);a.We=b;0<c.length&&a.Cc.forEach(function(a){a(c)})};function pk(a,b){var c=a.b(A),d=b||{};b=new vf(c);a.pb(uc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(n(dc)||(dc=new cc),b=dc,b=b.ag?0:b.Pg?4:1);switch(b){case 0:b=new $e(a,c);break;case 1:b=new gf(c);break;case 5:b=new jf(c);break;case 4:b=new sf(a,c,d.webSqlDbSize);break;case 3:b=new Ne(c,d.firebase);e=!0;break;default:throw new D(300);}a.pb(tc,b);var f=new vg;a.pb(vc,f);return b.Da(d.onUpgrade).then(function(){var b=new Mj(a);a.pb(wc,b);b=new Uj;a.pb(xc,b);b=new mk;a.pb(yc,b);return f.Da(c)}).then(function(){if(e){var b=
new Ce(a);b.Na.subscribe(b.Yd.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=ck);return(new og(a)).Da(c)})};function qk(a){this.c=a;this.g=a.b(A);this.aa=B(this.g.oa());this.Cb=w()}function rk(a){var b=a.c.b(vc),c=a.c.b(uc),d={};a.g.oa().forEach(function(a){var e=b.get(df(a)).Sa();e=wf(c,e).map(function(a){return a.l});d[a.getName()]=e});return{name:a.g.name(),version:a.g.version(),tables:d}}m=qk.prototype;m.exec=function(){var a=rk(this);a=new Jd(new fc(-1,a),!0);return v([new G([a],[])])};m.F=k(0);m.da=g("aa");m.V=function(){return ma(this)};m.getPriority=k(0);function sk(a,b){this.c=a;this.g=a.b(A);this.aa=B(this.g.oa());this.Cb=w();this.Aa=b;this.Na=a.b(tc);this.U=a.b(uc);this.A=a.b(vc)}m=sk.prototype;
m.exec=function(){if(!(this.Na instanceof $e||this.Na instanceof gf||this.Na instanceof sf))throw new D(300);a:{var a=this.g.oa();for(var b=0;b<a.length;++b)if(0<this.A.get(df(a[b])).X().ia){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.Aa.name||this.g.version()!=this.Aa.version)throw new D(111);if(null==this.Aa.tables)throw new D(112);return tk(this)};m.F=k(1);m.da=g("aa");m.V=function(){return ma(this)};m.getPriority=k(0);
function tk(a){var b=new md(a.c,a.aa);b=a.Na.Db(a.F(),C(a.aa),b);for(var c in a.Aa.tables){var d=a.g.table(c),e=a.Aa.tables[c].map(function(a){return d.vb(a)}),f=b.H(c,d.ib,0);a.U.Ub(c,e);var h=a.A.ic.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.lb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function uk(a,b){this.c=a;this.Na=a.b(tc);this.Ha=a.b(xc);this.Gb=a.b(yc);this.aa=B(b);this.Pa=new md(this.c,this.aa);this.Cb=w();this.tc=w();this.te=w()}m=uk.prototype;m.exec=function(){this.te.resolve();return this.tc.ha};m.F=k(1);m.da=g("aa");m.V=function(){return ma(this)};m.getPriority=k(2);function vk(a){Be(a.Ha,a);return a.te.ha}
function wk(a,b){b=b.wc();return b.ce.Za().exec(a.Pa,b.context).then(function(a){return Bd(a[0])},function(a){this.Pa.Hb();var b=new kb(a.name);this.tc.reject(b);throw a;}.bind(a))}m.ka=function(){this.ja=this.Na.Db(this.F(),C(this.aa),this.Pa);this.ja.ka().then(function(){this.Hc();this.tc.resolve()}.bind(this),function(a){this.Pa.Hb();this.tc.reject(a)}.bind(this));return this.Cb.ha};m.Hb=function(){this.Pa.Hb();this.tc.resolve();return this.Cb.ha};
m.Hc=function(){var a=Ae(this.Gb,this.aa);0!=a.length&&(a=new xe(this.c,a),Be(this.Ha,a))};m.X=function(){var a=null;null!=this.ja&&(a=this.ja.X());return null===a?new z(!1,0,0,0,0):a};function V(a){this.c=a;this.Ha=a.b(xc);this.Ib=null;this.Ra=0;0==xk.size&&(xk.set(0,B([1,4])),xk.set(1,B([2])),xk.set(2,B([3,5,6])),xk.set(3,B([2,7])),xk.set(4,B([7])),xk.set(5,B([7])),xk.set(6,B([7])))}q("lf.proc.Transaction",V);var xk=x();function yk(a,b){var c=xk.get(a.Ra)||null;if(null===c||!c.has(b))throw new D(107,a.Ra,b);a.Ra=b}
V.prototype.exec=function(a){yk(this,4);var b=[];try{a.forEach(function(a){a.Ya();b.push(a.wc())},this)}catch(c){return yk(this,7),cb(c)}this.Ib=new Dh(this.c,b);return Be(this.Ha,this.Ib).then(function(a){yk(this,7);return a.map(function(a){return Bd(a)})}.bind(this),function(a){yk(this,7);throw a;}.bind(this))};V.prototype.exec=V.prototype.exec;V.prototype.zf=function(a){yk(this,1);this.Ib=new uk(this.c,a);return vk(this.Ib).then(function(){yk(this,2)}.bind(this))};V.prototype.begin=V.prototype.zf;
V.prototype.yf=function(a){yk(this,3);try{a.Ya()}catch(b){return yk(this,7),cb(b)}return wk(this.Ib,a).then(function(a){yk(this,2);return a}.bind(this),function(a){yk(this,7);throw a;}.bind(this))};V.prototype.attach=V.prototype.yf;V.prototype.ka=function(){yk(this,5);return this.Ib.ka().then(function(){yk(this,7)}.bind(this))};V.prototype.commit=V.prototype.ka;V.prototype.Hb=function(){yk(this,6);return this.Ib.Hb().then(function(){yk(this,7)}.bind(this))};V.prototype.rollback=V.prototype.Hb;
V.prototype.X=function(){if(7!=this.Ra)throw new D(105);return this.Ib.X()};V.prototype.stats=V.prototype.X;function W(a){this.c=a;this.g=a.b(A);this.cd=!1}q("lf.proc.Database",W);W.prototype.Da=function(a){this.c.pb(A,this.g);return pk(this.c,a).then(function(){this.cd=!0;this.Ha=this.c.b(xc);return this}.bind(this))};W.prototype.init=W.prototype.Da;W.prototype.xb=g("g");W.prototype.getSchema=W.prototype.xb;function zk(a){if(!a.cd)throw new D(2);}W.prototype.select=function(a){zk(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.zb=function(){zk(this);return new ci(this.c)};W.prototype.insert=W.prototype.zb;W.prototype.Qd=function(){zk(this);return new ci(this.c,!0)};W.prototype.insertOrReplace=W.prototype.Qd;W.prototype.update=function(a){zk(this);return new mi(this.c,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){zk(this);return new bi(this.c)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){zk(this);this.c.b(yc).wd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){zk(this);this.c.b(yc).ge(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.If=function(){zk(this);return new V(this.c)};W.prototype.createTransaction=W.prototype.If;W.prototype.close=function(){try{this.c.b(tc).close()}catch(a){}this.c.clear();this.cd=!1};W.prototype.close=W.prototype.close;
W.prototype.Sf=function(){zk(this);var a=new qk(this.c);return Be(this.Ha,a).then(function(a){return Bd(a[0])[0]})};W.prototype["export"]=W.prototype.Sf;W.prototype.import=function(a){zk(this);a=new sk(this.c,a);return Be(this.Ha,a).then(k(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.S=a;this.w=b;this.Se=c;this.Qe=d;this.rf=e;this.Ja=f||null}q("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("w");m.j=function(){return Ld(this.S)+"."+this.w};m.toString=function(){return this.j()};m.H=g("S");m.F=g("rf");X.prototype.getType=X.prototype.F;X.prototype.Ca=function(){null==this.sa&&(this.sa=[],this.H().Ca().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.w)&&this.sa.push(a)},this));return this.sa};
X.prototype.Ba=function(){if(!n(this.fa)){var a=this.Ca().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.ec=g("Qe");X.prototype.isNullable=X.prototype.ec;X.prototype.yc=g("Se");X.prototype.Oa=function(a){return Og(this,a,"eq")};X.prototype.eq=X.prototype.Oa;X.prototype.Ze=function(a){return Og(this,a,"neq")};X.prototype.neq=X.prototype.Ze;X.prototype.og=function(a){return Og(this,a,"lt")};
X.prototype.lt=X.prototype.og;X.prototype.pg=function(a){return Og(this,a,"lte")};X.prototype.lte=X.prototype.pg;X.prototype.Wf=function(a){return Og(this,a,"gt")};X.prototype.gt=X.prototype.Wf;X.prototype.Xf=function(a){return Og(this,a,"gte")};X.prototype.gte=X.prototype.Xf;X.prototype.match=function(a){return Og(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Af=function(a,b){return Og(this,[a,b],"between")};X.prototype.between=X.prototype.Af;
X.prototype.Yf=function(a){return Og(this,a,"in")};X.prototype["in"]=X.prototype.Yf;X.prototype.ig=function(){return this.Oa(null)};X.prototype.isNull=X.prototype.ig;X.prototype.hg=function(){return this.Ze(null)};X.prototype.isNotNull=X.prototype.hg;X.prototype.as=function(a){return new X(this.S,this.w,this.Se,this.Qe,this.rf,a)};X.prototype.as=X.prototype.as;function Ak(a){this.g=a;this.Cd=new Vc;this.he=new Vc;this.af=new Vc;this.Ce=x();this.h=new Vc;this.ye=new Vc;this.ff=new Vc;this.Be=new Vc;Bk(this)}function Bk(a){a.g.oa().forEach(function(a){var b=a.getName();a.Kb.Od.forEach(function(c){this.af.set(b,this.g.table(c.Ua));this.h.set(c.Ua,a);0==c.action?(this.he.set(c.Ua,c),this.ff.set(c.Ua,a)):(this.Cd.set(c.Ua,c),this.ye.set(c.Ua,a));this.Ce.set(a.getName()+"."+c.tb,c.Ua);this.Be.set(c.Ua+"."+c.Ec,a.getName())},this)},a)}
function cd(a,b,c){if(null!=c)return 1==c?a.Cd.get(b):a.he.get(b);c=a.Cd.get(b);a=a.he.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Jh(a,b){a=b.get(a);return null===a?[]:a}function Lh(a,b){var c=B();b.forEach(function(a){(a=this.Ce.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function Hh(a,b,c){return null!=c?0==c?Jh(b,a.ff):Jh(b,a.ye):Jh(b,a.h)}
function Mh(a,b){var c=B();b.forEach(function(a){(a=this.Be.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function Ck(a,b,c){this.md=a;this.sg=b;this.Od=c}q("lf.schema.Constraint",Ck);Ck.prototype.Vf=g("md");Ck.prototype.getPrimaryKey=Ck.prototype.Vf;Ck.prototype.Uf=g("Od");Ck.prototype.getForeignKeys=Ck.prototype.Uf;function Dk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Ae=b;this.tb=a.local;this.Ua=d[0];this.Ec=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){Ek(a);this.Kd=Xd();this.w=a;this.J=x();this.td=B();this.lc=B();this.gd=B();this.Ea=null;this.sa=x();this.ld=!1;this.wb=[]}q("lf.schema.TableBuilder",Y);function Fk(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var Gk=B([0,6]);function Ek(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Hk(a,b){if(b==a.w)throw new D(546,b);if(a.J.has(b)||a.sa.has(b)||a.lc.has(b))throw new D(503,a.w+"."+b);}
function Ik(a,b){var c=!1;b.forEach(function(a){var b=this.J.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Jk(a){if(null!==a.Ea){var b=a.sa.get(a.Ea).map(function(a){return a.name}),c=0;if(a.wb.some(function(a,e){c=e;return-1!=b.indexOf(a.tb)},a))throw new D(543,a.wb[c].name);}}
function Kk(a){if(null!==a.Ea){var b=function(a){return a.name},c=JSON.stringify(a.sa.get(a.Ea).map(b));a.sa.forEach(function(a,e){if(e!=this.Ea&&(a=a.map(b),JSON.stringify(a)==c))throw new D(544,this.w+"."+e);},a)}}function Lk(a){null===a.Ea||a.sa.get(a.Ea).forEach(function(a){if(this.gd.has(a.name))throw new D(545,this.w+"."+a.name);},a)}Y.prototype.tf=function(a,b){Ek(a);Hk(this,a);this.J.set(a,b);Gk.has(b)&&this.ve([a]);return this};Y.prototype.addColumn=Y.prototype.tf;
Y.prototype.vf=function(a,b){var c=this.w;this.Ea="pk"+(c[0].toUpperCase()+c.substring(1));Ek(this.Ea);Hk(this,this.Ea);a=Mk(this,a,!0,void 0,b);Ik(this,a);1==a.length&&this.td.add(a[0].name);this.lc.add(this.Ea);this.sa.set(this.Ea,a);return this};Y.prototype.addPrimaryKey=Y.prototype.vf;
Y.prototype.uf=function(a,b){Ek(a);Hk(this,a);b=new Dk(b,this.w,a);n(b.action)||(b.action=0);n(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new D(506);if(!this.J.has(b.tb))throw new D(540,a);this.wb.push(b);this.ue(a,[b.tb],this.td.has(b.tb));return this};Y.prototype.addForeignKey=Y.prototype.uf;Y.prototype.wf=function(a,b){Ek(a);Hk(this,a);b=Mk(this,b,!0);1==b.length&&(this.td.add(b[0].name),Nk(this,b[0].name));this.sa.set(a,b);this.lc.add(a);return this};Y.prototype.addUnique=Y.prototype.wf;
function Nk(a,b){a.wb.forEach(function(a){a.tb==b&&this.lc.add(a.name.split(".")[1])},a)}Y.prototype.ve=function(a){Mk(this,a,!1).forEach(function(a){this.gd.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.ve;Y.prototype.ue=function(a,b,c,d){Ek(a);Hk(this,a);b=Mk(this,b,!0,d);c&&this.lc.add(a);this.sa.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ue;Y.prototype.Bb=ba("ld");Y.prototype.persistentIndex=Y.prototype.Bb;
Y.prototype.xb=function(){Jk(this);Kk(this);Lk(this);return new (Ok(this))};Y.prototype.getSchema=Y.prototype.xb;function Mk(a,b,c,d,e){var f=b;f="string"==typeof b[0]?b.map(function(a){return new Fk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Fk(a)});f.forEach(function(a){if(!this.J.has(a.name))throw new D(508,this.w,a.name);if(c){var b=this.J.get(a.name);if(0==b||6==b)throw new D(509,this.w,a.name);}},a);return f}
function Ok(a){function b(){function b(b){return a.sa.get(b).map(function(a){return{ba:this[a.name],order:a.order,autoIncrement:a.autoIncrement}},this)}var d=ec(a.J).map(function(b){this[b]=new X(this,b,a.td.has(b),a.gd.has(b),a.J.get(b));return this[b]},this),e=ec(a.sa).map(function(c){return new Qg(a.w,c,a.lc.has(c),b.call(this,c))},this);Q.call(this,a.w,d,e,a.ld);var f=null===a.Ea?null:new Qg(a.w,a.Ea,!0,b.call(this,a.Ea)),h=d.filter(function(b){return!a.gd.has(b.getName())});this.Kb=new Ck(f,
h,a.wb);this.jf=Pk(a,d,e)}r(b,Q);b.prototype.vb=function(a){return new this.jf(gc++,a)};b.prototype.createRow=b.prototype.vb;b.prototype.ib=function(a){var b={};this.jb().forEach(function(c){var d=c.getName();c=c.F();var e=a.value[d];if(0==c)if(c=e,null!=c&&""!=c){0!=c.length%2&&(c="0"+c);e=new ArrayBuffer(c.length/2);for(var l=new Uint8Array(e),p=0,L=0;p<c.length;p+=2)l[L++]=parseInt(c.substr(p,2),16);c=e}else c=null;else c=2==c?null!=e?new Date(e):null:e;b[d]=c},this);return new this.jf(a.id,b)};
b.prototype.deserializeRow=b.prototype.ib;b.prototype.He=g("Kb");b.prototype.getConstraint=b.prototype.He;return b}
function Pk(a,b,c){function d(a,d){this.J=b;this.sa=c;fc.call(this,a,d)}r(d,fc);d.prototype.Ee=function(){var a={};this.J.forEach(function(b){a[b.getName()]=b.ec()?null:Uc[b.F()]});return a};d.prototype.qf=function(){var a={};this.J.forEach(function(b){var c=b.getName();b=b.F();var d=this.l[c];a[c]=0==b?null!=d?jc(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.J.get(a.getName()),c=this.Kd.Te.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.lb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.l):null};return d};function Qk(a,b){this.g=new Z(a,b);this.rb=x();this.uc=!1;this.i=null;this.Tc=!1}q("lf.schema.Builder",Qk);function Rk(a,b){b.wb.forEach(function(a){var c=a.Ua;if(!this.rb.has(c))throw new D(536,a.name);c=this.rb.get(c).xb();var e=a.Ec;if(!c.hasOwnProperty(e))throw new D(537,a.name);if(b.xb()[a.tb].F()!=c[e].F())throw new D(538,a.name);if(!c[e].yc())throw new D(539,a.name);},a)}
Qk.prototype.Ef=function(a){a.wb.forEach(function(a){this.rb.get(a.Ua).wb.forEach(function(b){if(b.tb==a.Ec)throw new D(534,a.name);},this)},this)};function Sk(a){a.uc||(a.rb.forEach(function(a){Rk(this,a);a=a.xb();this.g.L.set(a.getName(),a)},a),y(a.rb).forEach(a.Ef,a),Tk(a),a.rb.clear(),a.uc=!0)}function Uk(a,b,c){b.re||(b.re=!0,b.Zd=!0,b.Fe.forEach(function(a){a=c.get(a);if(!a.re)Uk(this,a,c);else if(a.Zd&&b!=a)throw new D(533);},a));b.Zd=!1}
function Tk(a){var b=x();a.g.L.forEach(function(a,d){b.set(d,new Vk(d))},a);a.rb.forEach(function(a,d){a.wb.forEach(function(a){b.get(a.Ua).Fe.add(d)})});y(b).forEach(function(a){Uk(this,a,b)},a)}function Vk(a){this.Zd=this.re=!1;this.Fe=B();this.jc=a}Qk.prototype.xb=function(){this.uc||Sk(this);return this.g};Qk.prototype.getSchema=Qk.prototype.xb;Qk.prototype.Ke=function(){var a=new sc("ns_"+this.g.name()),b=ak();if(b.fd(a))var c=b.b(a);else c=new Yj,b.pb(a,c);return c};Qk.prototype.getGlobal=Qk.prototype.Ke;
Qk.prototype.connect=function(a){if(this.Tc||null!==this.i&&this.i.cd)throw new D(113);this.Tc=!0;if(null===this.i){var b=this.Ke();b.fd(A)||b.pb(A,this.xb());this.i=new W(b)}return this.i.Da(a).then(function(a){this.Tc=!1;return a}.bind(this),function(a){this.Tc=!1;this.i.close();throw a;}.bind(this))};Qk.prototype.connect=Qk.prototype.connect;Qk.prototype.Hf=function(a){if(this.rb.has(a))throw new D(503,a);if(this.uc)throw new D(535);this.rb.set(a,new Y(a));return this.rb.get(a)};
Qk.prototype.createTable=Qk.prototype.Hf;Qk.prototype.le=function(a){if(this.uc)throw new D(535);this.g.le(a);return this};Qk.prototype.setPragma=Qk.prototype.le;function Z(a,b){this.w=a;this.Xb=b;this.L=x();this.de={Nf:!1}}q("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("w");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Xb");Z.prototype.version=Z.prototype.version;Z.prototype.oa=function(){return y(this.L)};Z.prototype.tables=Z.prototype.oa;
Z.prototype.table=function(a){if(!this.L.has(a))throw new D(101,a);return this.L.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Pe||(this.Pe=new Ak(this));return this.Pe};Z.prototype.Ag=g("de");Z.prototype.pragma=Z.prototype.Ag;Z.prototype.le=ba("de");q("lf.schema.create",function(a,b){return new Qk(a,b)});u.prototype.catch=u.prototype.oe;u.prototype["catch"]=u.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.es6.js.map
