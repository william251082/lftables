if(!self.window){window=self;}
(function(){'use strict';function aa(){return function(){}}function ba(a){return function(b){this[a]=b}}function g(a){return function(){return this[a]}}function k(a){return function(){return a}}var m,ca=this;function n(a){return void 0!==a}function da(a){return"string"==typeof a}function ea(){}
function fa(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function ia(a){return null!=a}function ja(a){var b=fa(a);return"array"==b||"object"==b&&"number"==typeof a.length}function ka(a){return"function"==fa(a)}function la(a){return a[na]||(a[na]=++oa)}var na="closure_uid_"+(1E9*Math.random()>>>0),oa=0;function pa(a,b,c){return a.call.apply(a.bind,arguments)}
function qa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ra(a,b,c){ra=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?pa:qa;return ra.apply(null,arguments)}
function sa(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}function q(a,b){a=a.split(".");var c=ca;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&n(b)?c[d]=b:c=c[d]&&c[d]!==Object.prototype[d]?c[d]:c[d]={}}
function r(a,b){function c(){}c.prototype=b.prototype;a.hb=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.Ug=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function ta(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ta);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}r(ta,Error);ta.prototype.name="CustomError";var ua=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(da(a))return da(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},va=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=da(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},wa=Array.prototype.map?function(a,b){return Array.prototype.map.call(a,b,void 0)}:function(a,b){for(var c=
a.length,d=Array(c),e=da(a)?a.split(""):a,f=0;f<c;f++)f in e&&(d[f]=b.call(void 0,e[f],f,a));return d},xa=Array.prototype.reduce?function(a,b,c){return Array.prototype.reduce.call(a,b,c)}:function(a,b,c){var d=c;va(a,function(c,f){d=b.call(void 0,d,c,f,a)});return d},ya=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=da(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;return!1};
function za(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}function Aa(a){for(var b=[],c=0;c<a;c++)b[c]=0;return b}function Ba(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if("array"==fa(d))for(var e=0;e<d.length;e+=8192)for(var f=Ba.apply(null,za(d,e,e+8192)),h=0;h<f.length;h++)b.push(f[h]);else b.push(d)}return b};function Ca(a,b){this.og=100;this.Nf=a;this.Jg=b;this.pd=0;this.ed=null}Ca.prototype.get=function(){if(0<this.pd){this.pd--;var a=this.ed;this.ed=a.next;a.next=null}else a=this.Nf();return a};Ca.prototype.put=function(a){this.Jg(a);this.pd<this.og&&(this.pd++,a.next=this.ed,this.ed=a)};var Da=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};function Ea(a,b){return-1!=a.indexOf(b)}
function Fa(a){var b=0;a=Da(String(a)).split(".");for(var c=Da("10").split("."),d=Math.max(a.length,c.length),e=0;0==b&&e<d;e++){var f=a[e]||"",h=c[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];if(0==f[0].length&&0==h[0].length)break;b=Ga(0==f[1].length?0:parseInt(f[1],10),0==h[1].length?0:parseInt(h[1],10))||Ga(0==f[2].length,0==h[2].length)||Ga(f[2],h[2]);f=f[3];h=h[3]}while(0==b)}return b}function Ga(a,b){return a<b?-1:a>b?1:0};var Ha;a:{var Ia=ca.navigator;if(Ia){var Ja=Ia.userAgent;if(Ja){Ha=Ja;break a}}Ha=""}function t(a){return Ea(Ha,a)};function Ka(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b};function La(){return t("Safari")&&!(Ma()||t("Coast")||t("Opera")||t("Edge")||t("Silk")||t("Android"))}function Ma(){return(t("Chrome")||t("CriOS"))&&!t("Edge")};function Na(a){ca.setTimeout(function(){throw a;},0)}var Pa;
function Qa(){var a=ca.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!t("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow;a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host;a=ra(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!t("Trident")&&!t("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(n(c.next)){c=c.next;var a=c.Ee;c.Ee=null;a()}};return function(a){d.next={Ee:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");
b.onreadystatechange=function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){ca.setTimeout(a,0)}};function Ra(){this.Ad=this.oc=null}var Ta=new Ca(function(){return new Sa},function(a){a.reset()});Ra.prototype.add=function(a,b){var c=Ta.get();c.set(a,b);this.Ad?this.Ad.next=c:this.oc=c;this.Ad=c};Ra.prototype.remove=function(){var a=null;this.oc&&(a=this.oc,this.oc=this.oc.next,this.oc||(this.Ad=null),a.next=null);return a};function Sa(){this.next=this.scope=this.Sd=null}Sa.prototype.set=function(a,b){this.Sd=a;this.scope=b;this.next=null};
Sa.prototype.reset=function(){this.next=this.scope=this.Sd=null};function Ua(a,b){Va||Wa();Xa||(Va(),Xa=!0);Ya.add(a,b)}var Va;function Wa(){if(-1!=String(ca.Promise).indexOf("[native code]")){var a=ca.Promise.resolve(void 0);Va=function(){a.then(Za)}}else Va=function(){var a=Za;!ka(ca.setImmediate)||ca.Window&&ca.Window.prototype&&!t("Edge")&&ca.Window.prototype.setImmediate==ca.setImmediate?(Pa||(Pa=Qa()),Pa(a)):ca.setImmediate(a)}}var Xa=!1,Ya=new Ra;function Za(){for(var a;a=Ya.remove();){try{a.Sd.call(a.scope)}catch(b){Na(b)}Ta.put(a)}Xa=!1};function u(a,b){this.Ta=0;this.mf=void 0;this.Uc=this.cc=this.C=null;this.dd=this.Qd=!1;if(a!=ea)try{var c=this;a.call(b,function(a){$a(c,2,a)},function(a){$a(c,3,a)})}catch(d){$a(this,3,d)}}function ab(){this.next=this.context=this.hc=this.Hc=this.child=null;this.Dd=!1}ab.prototype.reset=function(){this.context=this.hc=this.Hc=this.child=null;this.Dd=!1};var bb=new Ca(function(){return new ab},function(a){a.reset()});function cb(a,b,c){var d=bb.get();d.Hc=a;d.hc=b;d.context=c;return d}
function v(a){if(a instanceof u)return a;var b=new u(ea);$a(b,2,a);return b}function db(a){return new u(function(b,c){c(a)})}function eb(a,b,c){fb(a,b,c,null)||Ua(sa(b,a))}function gb(a){return new u(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},l=0,p;l<a.length;l++)p=a[l],eb(p,sa(f,l),h);else b(e)})}function w(){var a,b,c=new u(function(c,e){a=c;b=e});return new hb(c,a,b)}
u.prototype.then=function(a,b,c){return ib(this,ka(a)?a:null,ka(b)?b:null,c)};u.prototype.then=u.prototype.then;u.prototype.$goog_Thenable=!0;u.prototype.ue=function(a,b){return ib(this,null,a,b)};function jb(a,b){a.cc||2!=a.Ta&&3!=a.Ta||kb(a);a.Uc?a.Uc.next=b:a.cc=b;a.Uc=b}
function ib(a,b,c,d){var e=cb(null,null,null);e.child=new u(function(a,h){e.Hc=b?function(c){try{var e=b.call(d,c);a(e)}catch(L){h(L)}}:a;e.hc=c?function(b){try{var e=c.call(d,b);!n(e)&&b instanceof lb?h(b):a(e)}catch(L){h(L)}}:h});e.child.C=a;jb(a,e);return e.child}u.prototype.Pg=function(a){this.Ta=0;$a(this,2,a)};u.prototype.Qg=function(a){this.Ta=0;$a(this,3,a)};
function $a(a,b,c){0==a.Ta&&(a===c&&(b=3,c=new TypeError("Promise cannot resolve to itself")),a.Ta=1,fb(c,a.Pg,a.Qg,a)||(a.mf=c,a.Ta=b,a.C=null,kb(a),3!=b||c instanceof lb||mb(a,c)))}function fb(a,b,c,d){if(a instanceof u)return jb(a,cb(b||ea,c||null,d)),!0;if(a)try{var e=!!a.$goog_Thenable}catch(h){e=!1}else e=!1;if(e)return a.then(b,c,d),!0;e=typeof a;if("object"==e&&null!=a||"function"==e)try{var f=a.then;if(ka(f))return nb(a,f,b,c,d),!0}catch(h){return c.call(d,h),!0}return!1}
function nb(a,b,c,d,e){function f(a){l||(l=!0,d.call(e,a))}function h(a){l||(l=!0,c.call(e,a))}var l=!1;try{b.call(a,h,f)}catch(p){f(p)}}function kb(a){a.Qd||(a.Qd=!0,Ua(a.Uf,a))}function ob(a){var b=null;a.cc&&(b=a.cc,a.cc=b.next,b.next=null);a.cc||(a.Uc=null);return b}
u.prototype.Uf=function(){for(var a;a=ob(this);){var b=this.Ta,c=this.mf;if(3==b&&a.hc&&!a.Dd){var d;for(d=this;d&&d.dd;d=d.C)d.dd=!1}if(a.child)a.child.C=null,pb(a,b,c);else try{a.Dd?a.Hc.call(a.context):pb(a,b,c)}catch(e){qb.call(null,e)}bb.put(a)}this.Qd=!1};function pb(a,b,c){2==b?a.Hc.call(a.context,c):a.hc&&a.hc.call(a.context,c)}function mb(a,b){a.dd=!0;Ua(function(){a.dd&&qb.call(null,b)})}var qb=Na;function lb(a){ta.call(this,a)}r(lb,ta);lb.prototype.name="cancel";
function hb(a,b,c){this.ha=a;this.resolve=b;this.reject=c};function rb(a,b,c,d){c=c||function(a,b){return a==b};d=d||function(b){return a[b]};for(var e=a.length,f=b.length,h=[],l=0;l<e+1;l++)h[l]=[],h[l][0]=0;for(var p=0;p<f+1;p++)h[0][p]=0;for(l=1;l<=e;l++)for(p=1;p<=f;p++)c(a[l-1],b[p-1])?h[l][p]=h[l-1][p-1]+1:h[l][p]=Math.max(h[l-1][p],h[l][p-1]);var L=[];l=e;for(p=f;0<l&&0<p;)c(a[l-1],b[p-1])?(L.unshift(d(l-1,p-1)),l--,p--):h[l-1][p]>h[l][p-1]?l--:p--;return L}function sb(a){return xa(arguments,function(a,c){return a+c},0)}
function tb(a){return sb.apply(null,arguments)/arguments.length}function ub(a){var b=arguments.length;if(2>b)return 0;var c=tb.apply(null,arguments);return sb.apply(null,wa(arguments,function(a){return Math.pow(a-c,2)}))/(b-1)}function vb(a){return Math.sqrt(ub.apply(null,arguments))};var wb="StopIteration"in ca?ca.StopIteration:{message:"StopIteration",stack:""};function xb(){}xb.prototype.next=function(){throw wb;};xb.prototype.pc=function(){return this};function yb(a){if(a instanceof xb)return a;if("function"==typeof a.pc)return a.pc(!1);if(ja(a)){var b=0,c=new xb;c.next=function(){for(;;){if(b>=a.length)throw wb;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function zb(a,b){if(ja(a))try{va(a,b,void 0)}catch(c){if(c!==wb)throw c;}else{a=yb(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==wb)throw c;}}}function Ab(a){if(ya(arguments,function(a){return!a.length})||!arguments.length)return new xb;var b=new xb,c=arguments,d=Aa(c.length);b.next=function(){if(d){for(var a=wa(d,function(a,b){return c[b][a]}),b=d.length-1;0<=b;b--){if(d[b]<c[b].length-1){d[b]++;break}if(0==b){d=null;break}d[b]=0}return a}throw wb;};return b};function Bb(a,b){this.l={};this.a=[];this.Ua=this.Eb=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else a&&this.addAll(a)}m=Bb.prototype;m.yc=g("Eb");m.qa=function(){Cb(this);for(var a=[],b=0;b<this.a.length;b++)a.push(this.l[this.a[b]]);return a};function Fb(a){Cb(a);return a.a.concat()}m.Pa=function(a){return Gb(this.l,a)};m.hd=function(){return 0==this.Eb};
m.clear=function(){this.l={};this.Ua=this.Eb=this.a.length=0};m.remove=function(a){return Gb(this.l,a)?(delete this.l[a],this.Eb--,this.Ua++,this.a.length>2*this.Eb&&Cb(this),!0):!1};function Cb(a){if(a.Eb!=a.a.length){for(var b=0,c=0;b<a.a.length;){var d=a.a[b];Gb(a.l,d)&&(a.a[c++]=d);b++}a.a.length=c}if(a.Eb!=a.a.length){var e={};for(c=b=0;b<a.a.length;)d=a.a[b],Gb(e,d)||(a.a[c++]=d,e[d]=1),b++;a.a.length=c}}m.get=function(a,b){return Gb(this.l,a)?this.l[a]:b};
m.set=function(a,b){Gb(this.l,a)||(this.Eb++,this.a.push(a),this.Ua++);this.l[a]=b};m.addAll=function(a){if(a instanceof Bb){var b=Fb(a);a=a.qa()}else{b=[];var c=0,d;for(d in a)b[c++]=d;a=Ka(a)}for(c=0;c<b.length;c++)this.set(b[c],a[c])};m.forEach=function(a,b){for(var c=Fb(this),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};m.clone=function(){return new Bb(this)};
m.pc=function(a){Cb(this);var b=0,c=this.Ua,d=this,e=new xb;e.next=function(){if(c!=d.Ua)throw Error("The map has changed since the iterator was created");if(b>=d.a.length)throw wb;var e=d.a[b++];return a?e:d.l[e]};return e};function Gb(a,b){return Object.prototype.hasOwnProperty.call(a,b)};function Hb(){return t("iPhone")&&!t("iPod")&&!t("iPad")};function Ib(a){var b=Jb;return Object.prototype.hasOwnProperty.call(b,10)?b[10]:b[10]=a(10)};var Kb=t("Opera"),Lb=t("Trident")||t("MSIE"),Mb=t("Edge"),Nb=t("Gecko")&&!(Ea(Ha.toLowerCase(),"webkit")&&!t("Edge"))&&!(t("Trident")||t("MSIE"))&&!t("Edge"),Ob=Ea(Ha.toLowerCase(),"webkit")&&!t("Edge"),Pb=t("Macintosh"),Qb=t("Windows"),Rb=t("Android"),Sb=Hb(),Tb=t("iPad"),Ub=t("iPod"),Vb;
a:{var Wb="",Xb=function(){var a=Ha;if(Nb)return/rv:([^\);]+)(\)|;)/.exec(a);if(Mb)return/Edge\/([\d\.]+)/.exec(a);if(Lb)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(Ob)return/WebKit\/(\S+)/.exec(a);if(Kb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();Xb&&(Wb=Xb?Xb[1]:"");if(Lb){var Yb,Zb=ca.document;Yb=Zb?Zb.documentMode:void 0;if(null!=Yb&&Yb>parseFloat(Wb)){Vb=String(Yb);break a}}Vb=Wb}var $b=Vb,Jb={};function ac(){return Ib(function(){return 0<=Fa($b)})};var bc=function(){if(Qb){var a=/Windows NT ([0-9.]+)/;return(a=a.exec(Ha))?a[1]:"0"}return Pb?(a=/10[_.][0-9_.]+/,(a=a.exec(Ha))?a[0].replace(/_/g,"."):"10"):Rb?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(Ha))?a[1]:""):Sb||Tb||Ub?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(Ha))?a[1].replace(/_/g,"."):""):""}();var cc=Hb()||t("iPod"),dc=t("iPad");/*

 Copyright 2015 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function ec(){var a;!(a=La()&&!ac())&&(a=dc||cc)&&(a=!(0<=Fa(bc)));this.$d=a;this.eg=!(this.$d||Lb&&!ac());this.Tg=Ma()||La();this.tg=n(window.Map)&&n(window.Map.prototype.values)&&n(window.Map.prototype.forEach)&&!this.$d;this.ug=n(window.Set)&&n(window.Set.prototype.values)&&n(window.Set.prototype.forEach)&&!this.$d}var fc;function gc(){n(fc)||(fc=new ec);return fc};function x(){this.l=new Bb;Object.defineProperty(this,"size",{get:function(){return this.l.yc()}})}x.prototype.clear=function(){this.l.clear()};x.prototype.clear=x.prototype.clear;x.prototype.delete=function(a){return this.l.remove(a)};x.prototype["delete"]=x.prototype.delete;x.prototype.forEach=function(a,b){return this.l.forEach(a,b)};x.prototype.forEach=x.prototype.forEach;x.prototype.get=function(a){return this.l.get(a)};x.prototype.get=x.prototype.get;x.prototype.has=function(a){return this.l.Pa(a)};
x.prototype.has=x.prototype.has;x.prototype.set=function(a,b){return this.l.set(a,b)};x.prototype.set=x.prototype.set;var hc=gc().tg;function y(){return hc?new window.Map:new x}function ic(a){if(a instanceof x)return Fb(a.l);var b=0,c=Array(a.size);a.forEach(function(a,e){c[b++]=e});return c}function z(a){if(a instanceof x)return a.l.qa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c};/*

 Copyright 2014 The Lovefield Project Authors. All Rights Reserved.

 Licensed under the Apache License, Version 2.0 (the "License");
 you may not use this file except in compliance with the License.
 You may obtain a copy of the License at

     http://www.apache.org/licenses/LICENSE-2.0

 Unless required by applicable law or agreed to in writing, software
 distributed under the License is distributed on an "AS IS" BASIS,
 WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 See the License for the specific language governing permissions and
 limitations under the License.
*/
function jc(a,b){this.sa=a;this.m=b||this.Je()}var kc=0;m=jc.prototype;m.id=g("sa");m.Je=function(){return{}};m.vf=g("m");m.Ja=function(){return{id:this.sa,value:this.vf()}};m.nb=function(a){return"#"==a.substr(-1)?this.sa:null};function lc(a){return new jc(a.id,a.value)}function mc(a){return new jc(kc++,a||{})}function nc(a){if(null==a)return null;a=new Uint8Array(a);for(var b="",c=0;c<a.length;++c){var d=a[c].toString(16);b+=2>d.length?"0"+d:d}return b};var oc={};q("lf.TransactionType",oc);oc.READ_ONLY=0;oc.READ_WRITE=1;function A(a,b,c,d,e){this.vd=a;this.ig=b;this.Sg=c;this.Pf=d;this.If=e}q("lf.TransactionStats",A);A.prototype.Ng=g("vd");A.prototype.success=A.prototype.Ng;A.prototype.hg=g("ig");A.prototype.insertedRowCount=A.prototype.hg;A.prototype.Rg=g("Sg");A.prototype.updatedRowCount=A.prototype.Rg;A.prototype.Of=g("Pf");A.prototype.deletedRowCount=A.prototype.Of;A.prototype.Hf=g("If");A.prototype.changedTableCount=A.prototype.Hf;function pc(a,b){this.xd=a;this.Ra=b||null;this.S=w();this.vd=!1;this.za=null}pc.prototype.ka=function(){return(0==this.xd?this.rc():qc(this)).then(function(a){this.vd=!0;return a}.bind(this))};function qc(a){try{rc(a.Ra)}catch(b){return db(b)}return sc(a).then(function(a){this.Ra.ka();return a}.bind(a))}function sc(a){tc(a);uc(a);return a.rc()}
function tc(a){a.Ra.ib.forEach(function(a,c){c=this.Ra.da().get(c);c=this.I(c.getName(),c.kb.bind(c),0);var b=z(a.wa).map(function(a){return a.id()});a=z(a.la).map(function(a){return a[1]}).concat(z(a.va));var e=0<a.length;0<b.length&&c.remove(b,e).ue(this.Se,this);c.put(a).ue(this.Se,this)},a)}function uc(a){vc(a.Ra).forEach(function(a){var b=this.I(a.getName(),lc,1);b.remove([]);b.put(a.Ja())},a)}pc.prototype.Se=function(a){this.S.reject(a)};
pc.prototype.Y=function(){if(null===this.za)if(this.vd)if(0==this.xd)this.za=new A(!0,0,0,0,0);else{var a=0,b=0,c=0,d=0;this.Ra.ib.forEach(function(e){d++;a+=e.va.size;c+=e.la.size;b+=e.wa.size});this.za=new A(!0,a,c,b,d)}else this.za=new A(!1,0,0,0,0);return this.za};function wc(a){this.Kg=a}wc.prototype.toString=g("Kg");var xc=new wc("backstore"),yc=new wc("cache"),zc=new wc("indexstore"),Ac=new wc("engine"),Bc=new wc("runner"),Cc=new wc("observerregistry"),Dc=new wc("schema");function Ec(a){if(a.qa&&"function"==typeof a.qa)return a.qa();if(da(a))return a.split("");if(ja(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return Ka(a)};function Fc(a){this.l=new Bb;a&&this.addAll(a)}function Gc(a){var b=typeof a;return"object"==b&&a||"function"==b?"o"+la(a):b.substr(0,1)+a}m=Fc.prototype;m.yc=function(){return this.l.yc()};m.add=function(a){this.l.set(Gc(a),a)};m.addAll=function(a){a=Ec(a);for(var b=a.length,c=0;c<b;c++)this.add(a[c])};m.remove=function(a){return this.l.remove(Gc(a))};m.clear=function(){this.l.clear()};m.hd=function(){return this.l.hd()};m.contains=function(a){return this.l.Pa(Gc(a))};m.qa=function(){return this.l.qa()};
m.clone=function(){return new Fc(this)};m.pc=function(){return this.l.pc(!1)};function Hc(a){this.Xb=new Fc(a);Object.defineProperty(this,"size",{get:function(){return this.Xb.yc()}})}Hc.prototype.add=function(a){this.Xb.add(a)};Hc.prototype.add=Hc.prototype.add;Hc.prototype.clear=function(){this.Xb.clear()};Hc.prototype.clear=Hc.prototype.clear;Hc.prototype.delete=function(a){return this.Xb.remove(a)};Hc.prototype["delete"]=Hc.prototype.delete;Hc.prototype.forEach=function(a,b){this.Xb.qa().forEach(a,b)};Hc.prototype.has=function(a){return this.Xb.contains(a)};
Hc.prototype.has=Hc.prototype.has;var Ic=gc().ug;function B(a){return Ic?n(a)?new window.Set(a):new window.Set:new Hc(a)}function C(a){if(a instanceof Hc)return a.Xb.qa();var b=0,c=Array(a.size);a.forEach(function(a){c[b++]=a});return c}function Jc(a,b){if(b.size>a.size)return!1;var c=!0;b.forEach(function(b){c=c&&a.has(b)});return c};function Kc(a,b){this.sa=a;this.m=b||{}}function Lc(a){var b=B();a.forEach(function(a){b.add(a>>9)});return C(b)}Kc.prototype.W=g("sa");function Mc(a,b){b.forEach(function(a){this.m[a.id()]=a.Ja()},a)}function Nc(a,b){b.forEach(function(a){delete this.m[a]},a)}Kc.prototype.Ja=function(){return{id:this.sa,value:JSON.stringify(this.m)}};function Oc(a){return new Kc(a.id,JSON.parse(a.value))};function Pc(a,b,c){this.Z=a;this.Gb=b;this.nf=c}m=Pc.prototype;m.get=function(a){if(0==a.length)return this.Ud();var b=this.Gb;return Qc(this,a).then(function(c){return a.map(function(a){var d=c.get(a>>9);return b(d.m[a])})})};function Qc(a,b){var c=y(),d=w();a=Lc(b).map(function(a){return new u(function(b,d){try{var e=this.Z.get(a)}catch(p){d(p);return}e.onerror=d;e.onsuccess=function(a){a=Oc(a.target.result);c.set(a.W(),a);b()}},this)},a);gb(a).then(function(){d.resolve(c)});return d.ha}
m.Ud=function(){return new u(function(a,b){var c=[];try{var d=this.Z.openCursor()}catch(e){b(e);return}d.onerror=b;d.onsuccess=function(){var b=d.result;if(b){var f=Oc(b.value).m,h;for(h in f)c.push(this.Gb(f[h]));b.continue()}else a(c)}.bind(this)},this)};m.Tb=function(a){return new u(function(b,c){try{var d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};
m.put=function(a){if(0==a.length)return v();var b=y();a.forEach(function(a){var c=a.id()>>9,e=b.get(c)||null;null===e&&(e=this.nf(this.Z.name,c));Mc(e,[a]);b.set(c,e)},this);a=z(b).map(function(a){return this.Tb(function(){return this.Z.put(a.Ja())}.bind(this))},this);return gb(a)};
m.remove=function(a){if(0==a.length)return this.Tb(function(){return this.Z.clear()}.bind(this));var b=y();a.forEach(function(a){var c=a>>9,e=b.get(c)||null;null===e&&(e=this.nf(this.Z.name,c));Nc(e,[a]);b.set(c,e)},this);a=z(b).map(function(a){return this.Tb(function(){return 0==Object.keys(a.m).length?this.Z.delete(a.W()):this.Z.put(a.Ja())}.bind(this))},this);return gb(a)};function Rc(a,b,c){a=a.b(yc);var d=[c<<9,(c+1<<9)-1];b=a.Va(b,d[0],d[1]);c=new Kc(c);Mc(c,b);return c}
function Tc(a,b){return new Kc(b)};function Uc(a){this.V=a.b(yc);this.B=a.b(zc);this.g=a.b(Dc)}Uc.prototype.update=function(a){a.forEach(function(a){Vc(this,a);Wc(this,a)},this)};function Wc(a,b){var c=b.getName();b.wa.forEach(function(a,b){this.V.remove(c,b)},a);b.va.forEach(function(a){this.V.set(c,a)},a);b.la.forEach(function(a){this.V.set(c,a[1])},a)}function Vc(a,b){var c=a.g.table(b.getName());Xc(b).forEach(function(a){Yc(this,c,a)},a)}
function Yc(a,b,c){var d=a.B.kc.get(b.getName())||[],e=0;d.forEach(function(a){try{Zc(a,c),e++}catch(h){throw d.slice(0,e).forEach(function(a){Zc(a,[c[1],c[0]])},this),h;}},a)}function Zc(a,b){var c=null===b[1]?void 0:b[1].nb(a.getName()),d=null===b[0]?void 0:b[0].nb(a.getName());if(!n(d)&&n(c))a.add(c,b[1].id());else if(n(d)&&n(c)){if(null===c||null===d){if(c==d)return}else if(0==a.jb().compare(d,c))return;a.add(c,b[1].id());a.remove(d,b[0].id())}else n(d)&&!n(c)&&a.remove(d,b[0].id())};var $c={};q("lf.ConstraintAction",$c);$c.RESTRICT=0;$c.CASCADE=1;var ad={};q("lf.ConstraintTiming",ad);ad.IMMEDIATE=0;ad.DEFERRABLE=1;var bd={};q("lf.Order",bd);bd.DESC=0;bd.ASC=1;var cd={};q("lf.Type",cd);cd.ARRAY_BUFFER=0;cd.BOOLEAN=1;cd.DATE_TIME=2;cd.INTEGER=3;cd.NUMBER=4;cd.STRING=5;cd.OBJECT=6;var dd={0:null,1:!1,2:Object.freeze(new Date(0)),3:0,4:0,5:"",6:null};q("lf.type.DEFAULT_VALUES",dd);function D(a,b){this.code=a;this.message="http://google.github.io/lovefield/error_lookup/src/error_lookup.html?c="+a;if(1<arguments.length)for(var c=1;c<=Math.min(4,arguments.length-1);++c)this.message+="&p"+(c-1)+"="+encodeURIComponent(String(arguments[c]).slice(0,64))}r(D,Error);function ed(){this.l=y();this.size=0}m=ed.prototype;m.has=function(a){return this.l.has(a)};m.set=function(a,b){var c=this.l.get(a)||null;null===c&&(c=B(),this.l.set(a,c));c.has(b)||(c.add(b),this.size++);return this};m.Wb=function(a,b){var c=this.l.get(a)||null;null===c&&(c=B(),this.l.set(a,c));b.forEach(function(a){c.has(a)||(c.add(a),this.size++)},this)};m.ae=function(a){a.keys().forEach(function(b){var c=a.get(b);this.Wb(b,c)},this)};
m.delete=function(a,b){var c=this.l.get(a)||null;if(null===c)return!1;if(b=c.delete(b))--this.size,0==c.size&&this.l.delete(a);return b};m.get=function(a){a=this.l.get(a)||null;return null===a?null:C(a)};m.clear=function(){this.l.clear();this.size=0};m.keys=function(){return ic(this.l)};m.values=function(){var a=[];this.l.forEach(function(b){a.push.apply(a,C(b))});return a};function fd(a){this.B=a.b(zc);this.g=a.b(Dc);this.V=a.b(yc);this.Zc=null}function gd(a,b,c){var d=b.Mb.wg;c.forEach(function(a){d.forEach(function(b){if(null==a.m[b.getName()])throw new D(202,b.j());},this)},a)}function hd(a,b,c,d){b.Mb.Td.forEach(function(a){a.timing==d&&id(this,a,c)},a)}function id(a,b,c){var d=jd(a,b);c.forEach(function(a){if(kd(a[0],a[1],b.name)&&(a=a[1].nb(b.name),null!==a&&!d.Pa(a)))throw new D(203,b.name);},a)}
function jd(a,b){null===a.Zc&&(a.Zc=y());var c=a.Zc.get(b.name)||null;null===c&&(c=a.g.table(b.Xa)[b.Ic].Ca(),c=a.B.get(c.j()),a.Zc.set(b.name,c));return c}function kd(a,b,c){return(null===a?null!==b:null===b)||a.nb(c)!=b.nb(c)}function ld(a,b,c,d){b=md(a.g.info(),b.getName(),0);null!==b&&(b=b.filter(function(a){return a.timing==d}),0!=b.length&&nd(a,b,c,function(a,b,c){if(b.Pa(c))throw new D(203,a.name);}))}
function od(a,b,c){b=md(a.g.info(),b.getName(),1);if(null===b)return null;var d=new ed;nd(a,b,c,function(a,b,c){b=b.get(c);0<b.length&&d.Wb(a.Fe,b)});return d}function pd(a,b,c){var d=new ed;nd(a,c,b,function(a,b,c,l){b.get(c).forEach(function(b){d.set(b,{Rd:a,Bg:l[1]})})});return d}function nd(a,b,c,d){b.forEach(function(a){var b=this.B.get(a.name),e=jd(this,a);c.forEach(function(c){if(kd(c[0],c[1],e.getName())){var f=c[0].nb(e.getName());d(a,b,f,c)}},this)},a)}
function qd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[null,a]}),hd(a,b,c,d))}function rd(a,b,c,d){0!=c.length&&(hd(a,b,c,d),ld(a,b,c,d))}function sd(a,b,c,d){0!=c.length&&(c=c.map(function(a){return[a,null]}),ld(a,b,c,d))}
function td(a,b,c){var d={te:[],qf:new ed},e=new ed;e.Wb(b.getName(),c.map(function(a){return a.id()}));do{var f=new ed;e.keys().forEach(function(a){var b=this.g.table(a);a=e.get(a).map(function(a){return[this.V.get(a),null]},this);b=od(this,b,a);null!==b&&(d.te.unshift.apply(d.te,b.keys()),f.ae(b))},a);e=f;d.qf.ae(e)}while(0<e.size);return d};function ud(a){this.va=y();this.la=y();this.wa=y();this.A=a}m=ud.prototype;m.getName=g("A");m.add=function(a){if(this.wa.has(a.id())){var b=[this.wa.get(a.id()),a];this.la.set(a.id(),b);this.wa.delete(a.id())}else this.va.set(a.id(),a)};m.modify=function(a){var b=a[1],c=a[0].id();this.va.has(c)?this.va.set(c,b):(this.la.has(c)&&(a=[this.la.get(a[0].id())[0],b]),this.la.set(c,a))};
m.delete=function(a){if(this.va.has(a.id()))this.va.delete(a.id());else if(this.la.has(a.id())){var b=this.la.get(a.id())[0];this.la.delete(a.id());this.wa.set(a.id(),b)}else this.wa.set(a.id(),a)};m.ae=function(a){a.va.forEach(function(a){this.add(a)},this);a.la.forEach(function(a){this.modify(a)},this);a.wa.forEach(function(a){this.delete(a)},this)};
function Xc(a){var b=[];a.va.forEach(function(a){b.push([null,a])});a.la.forEach(function(a){b.push(a)});a.wa.forEach(function(a){b.push([a,null])});return b}m.toString=function(){return"["+ic(this.va).toString()+"], ["+ic(this.la).toString()+"], ["+ic(this.wa).toString()+"]"};function vd(a){var b=new ud(a.A);a.va.forEach(function(a){b.delete(a)});a.wa.forEach(function(a){b.add(a)});a.la.forEach(function(a){b.modify([a[1],a[0]])});return b}
m.hd=function(){return 0==this.va.size&&0==this.wa.size&&0==this.la.size};function wd(a,b){this.aa=y();b.forEach(function(a){this.aa.set(a.getName(),a)},this);this.g=a.b(Dc);this.V=a.b(yc);this.B=a.b(zc);this.Aa=new fd(a);this.fd=new Uc(a);this.ib=y()}function vc(a){var b=[];ic(a.ib).map(function(a){return this.aa.get(a)},a).forEach(function(a){a.Cb()&&(a.Da().forEach(function(a){b.push(this.B.get(a.j()))},this),b.push(this.B.get(a.getName()+".#")))},a);return b}m=wd.prototype;m.da=g("aa");
m.Ab=function(a,b){xd(this,a);gd(this.Aa,a,b);qd(this.Aa,a,b,0);for(var c=0;c<b.length;c++)yd(this,a,[null,b[c]])};function yd(a,b,c){var d=b.getName(),e=a.ib.get(d)||new ud(d);a.ib.set(d,e);try{Yc(a.fd,b,c)}catch(h){throw h;}b=c[0];var f=c[1];null===b&&null!==f?(a.V.set(d,f),e.add(f)):null!==b&&null!==f?(a.V.set(d,f),e.modify(c)):null!==b&&null===f&&(a.V.remove(d,b.id()),e.delete(b))}
m.update=function(a,b){xd(this,a);gd(this.Aa,a,b);b=b.map(function(a){return[this.V.get(a.id()),a]},this);zd(this,a,b);rd(this.Aa,a,b,0);b.forEach(function(b){yd(this,a,b)},this)};m.Vd=function(a,b){xd(this,a);gd(this.Aa,a,b);for(var c=0;c<b.length;c++){var d=b[c],e=null,f=a.Mb.rd;if(null===f)var h=null;else{h=this.Aa;f=f.j();var l=d.nb(f);h=h.B.get(f).get(l);h=0==h.length?null:h[0]}null!=h?(e=this.V.get(h),d.sa=h,rd(this.Aa,a,[[e,d]],0)):qd(this.Aa,a,[d],0);yd(this,a,[e,d])}};
m.remove=function(a,b){xd(this,a);Ad(this,a,b);sd(this.Aa,a,b,0);for(var c=0;c<b.length;c++)yd(this,a,[b[c],null])};function zd(a,b,c){b=md(a.g.info(),b.getName(),1);if(null!==b){var d=pd(a.Aa,c,b);d.keys().forEach(function(a){d.get(a).forEach(function(b){var c=this.g.table(b.Rd.Fe),d=this.V.get(a),e=c.kb(d.Ja());e.m[b.Rd.vb]=b.Bg.m[b.Rd.Ic];yd(this,c,[d,e])},this)},a)}}
function Ad(a,b,c){if(null!==md(a.g.info(),b.getName(),1)){b=td(a.Aa,b,c);var d=b.qf;b.te.forEach(function(a){var b=this.g.table(a);a=d.get(a).map(function(a){return this.V.get(a)},this);sd(this.Aa,b,a,0);a.forEach(function(a){yd(this,b,[a,null])},this)},a)}}function rc(a){a.ib.forEach(function(a){var b=this.aa.get(a.getName());qd(this.Aa,b,z(a.va),1);sd(this.Aa,b,z(a.wa),1);rd(this.Aa,b,z(a.la),1)},a)}m.ka=aa();m.Jb=function(){var a=z(this.ib).map(function(a){return vd(a)});this.fd.update(a)};
function xd(a,b){if(!a.aa.has(b.getName()))throw new D(106,b.getName());};function E(a,b,c,d){this.from=a;this.o=b;this.ea=this.from==F?!1:c;this.na=this.o==F?!1:d}var F=new (aa());E.prototype.toString=function(){return(this.ea?"(":"[")+(this.from==F?"unbound":this.from)+", "+(this.o==F?"unbound":this.o)+(this.na?")":"]")};function Bd(a){if(Cd(a))return[];var b=null,c=null;a.from==F||(b=new E(F,a.from,!1,!a.ea));a.o==F||(c=new E(a.o,F,!a.na,!1));return[b,c].filter(function(a){return null!==a})}E.prototype.reverse=function(){return new E(this.o,this.from,this.na,this.ea)};
function Dd(a,b){var c=Ed(a.from,b.from,!0,a.ea,b.ea);if(0==c)return!0;var d=-1==c?a:b;a=1==c?a:b;return d.o==F||d.o>a.from||d.o==a.from&&!d.na&&!a.ea}function Fd(){return new E(F,F,!1,!1)}function Cd(a){return a.from==F&&a.o==F}function Gd(a){return a.from==a.o&&a.from!=F&&!a.ea&&!a.na}E.prototype.contains=function(a){var b=this.o==F||a<this.o||a==this.o&&!this.na;return(this.from==F||a>this.from||a==this.from&&!this.ea)&&b};
function Ed(a,b,c,d,e){function f(a){return c?a:1==a?-1:1}d=d||!1;e=e||!1;return a==F?b==F?(d?!e:e)?d?f(1):f(-1):0:f(-1):b==F?f(1):a<b?-1:a==b?(d?!e:e)?d?f(1):f(-1):0:1}function Hd(a,b){var c=Ed(a.from,b.from,!0,a.ea,b.ea);0==c&&(c=Ed(a.o,b.o,!1,a.na,b.na));return c}function Id(a){if(0==a.length)return[];a.sort(Hd);for(var b=Array(a.length+1),c=0;c<b.length;c++)b[c]=0==c?new E(F,a[c].from,!1,!0):c==b.length-1?new E(a[c-1].o,F,!0,!1):new E(a[c-1].o,a[c].from,!0,!0);return b};function Jd(a){this.jc=[];n(a)&&this.add(a)}Jd.prototype.toString=function(){return this.jc.map(function(a){return a.toString()}).join(",")};Jd.prototype.Pa=function(a){return this.jc.some(function(b){return b.contains(a)})};Jd.prototype.qa=g("jc");
Jd.prototype.add=function(a){if(0!=a.length)if(a=this.jc.concat(a),1==a.length)this.jc=a;else{a.sort(Hd);for(var b=[],c=a[0],d=1;d<a.length;++d)if(Dd(c,a[d])){var e=a[d],f=Fd();if(c.from!=F&&e.from!=F){var h=Ed(c.from,e.from,!0);1!=h?(f.from=c.from,f.ea=0!=h?c.ea:c.ea&&e.ea):(f.from=e.from,f.ea=e.ea)}c.o!=F&&e.o!=F&&(h=Ed(c.o,e.o,!1),-1!=h?(f.o=c.o,f.na=0!=h?c.na:c.na&&e.na):(f.o=e.o,f.na=e.na));c=f}else b.push(c),c=a[d];b.push(c);this.jc=b}};
function Kd(a,b){var c=[];a.qa().map(function(a){return b.qa().map(function(b){if(Dd(a,b)){var c=Fd();var d=Ed(a.from,b.from,!0);d=0==d?a.ea?a:b:-1!=d?a:b;c.from=d.from;c.ea=d.ea;a.o==F||b.o==F?b=a.o==F?b:a:(d=Ed(a.o,b.o,!1),b=0==d?a.na?a:b:-1==d?a:b);c.o=b.o;c.na=b.na}else c=null;return c})}).forEach(function(a){c=c.concat(a)});return new Jd(c.filter(function(a){return null!==a}))};function G(a,b){this.entries=a;this.M=B(b);this.$a=null}G.prototype.s=function(){return C(this.M)};function Ld(a){return a.entries.map(function(a){return a.ua.m})}function Md(a){return a.entries.map(function(a){return a.ua.id()})}function Nd(a,b){return a.$a.get(b.j())}var Od=null;function Pd(){null===Od&&(Od=new G([],[]));return Od}
function Qd(a){if(0==a.length)return Pd();var b=a.reduce(function(a,b){return a+b.entries.length},0),c=Array(b),d=0;b=a.map(function(a){var b=y();a.entries.forEach(function(a){c[d++]=a;b.set(a.id,a)});return b});for(var e=y(),f=0;f<c.length;f++)b.every(function(a){return a.has(c[f].id)})&&e.set(c[f].id,c[f]);return new G(z(e),C(a[0].M))}function Rd(a){if(0==a.length)return Pd();var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.id,a)})});return new G(z(b),C(a[0].M))}
function Sd(a,b){var c=1<b.length;a=a.map(function(a){return new Td(a,c)});return new G(a,b)}function Td(a,b){this.ua=a;this.id=Ud++;this.Xd=b}var Ud=0;function H(a,b){var c=b.Ka;return null!==c&&a.ua.m.hasOwnProperty(c)?a.ua.m[c]:a.Xd?a.ua.m[Vd(b.I())][b.getName()]:a.ua.m[b.getName()]}function Wd(a,b,c){var d=b.Ka;if(null!=d)a.ua.m[d]=c;else if(a.Xd){d=Vd(b.I());var e=a.ua.m[d];null==e&&(e={},a.ua.m[d]=e);e[b.getName()]=c}else a.ua.m[b.getName()]=c}
function Xd(a,b,c,d){function e(a,b){if(a.Xd){a=a.ua.m;for(var c in a)f[c]=a[c]}else f[b[0]]=a.ua.m}var f={};e(a,b);e(c,d);a=new jc(-1,f);return new Td(a,!0)};q("lf.bind",function(a){return new Yd(a)});function Yd(a){this.fa=a}q("lf.Binder",Yd);Yd.prototype.Ca=g("fa");function Zd(){this.Ye=$d();var a=ae();this.Ob=y();this.Ob.set(1,be());this.Ob.set(2,ce());this.Ob.set(4,a);this.Ob.set(3,a);this.Ob.set(5,de());this.Ob.set(6,ee())}var fe;function ge(){null!=fe||(fe=new Zd);return fe}function he(a,b,c){a=a.Ob.get(b)||null;if(null===a)throw new D(550);c=a.get(c)||null;if(null===c)throw new D(550);return c}
function $d(){function a(a){return a}var b=y();b.set(1,function(a){return null===a?null:a?1:0});b.set(2,function(a){return null===a?null:a.getTime()});b.set(3,a);b.set(4,a);b.set(5,a);return b}function be(){var a=y();a.set("eq",function(a,c){return a==c});a.set("neq",function(a,c){return a!=c});return a}
function ae(){var a=be();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a>=c[0]&&a<=c[1]});a.set("gte",function(a,c){return null===a||null===c?!1:a>=c});a.set("gt",function(a,c){return null===a||null===c?!1:a>c});a.set("in",function(a,c){return-1!=c.indexOf(a)});a.set("lte",function(a,c){return null===a||null===c?!1:a<=c});a.set("lt",function(a,c){return null===a||null===c?!1:a<c});return a}
function de(){var a=ae();a.set("match",function(a,c){return null===a||null===c?!1:(new RegExp(c)).test(a)});return a}function ee(){var a=y();a.set("eq",function(a,c){if(null!==c)throw new D(550);return null===a});a.set("neq",function(a,c){if(null!==c)throw new D(550);return null!==a});return a}
function ce(){var a=y();a.set("between",function(a,c){return null===a||null===c[0]||null===c[1]?!1:a.getTime()>=c[0].getTime()&&a.getTime()<=c[1].getTime()});a.set("eq",function(a,c){return(null===a?-1:a.getTime())==(null===c?-1:c.getTime())});a.set("gte",function(a,c){return null===a||null===c?!1:a.getTime()>=c.getTime()});a.set("gt",function(a,c){return null===a||null===c?!1:a.getTime()>c.getTime()});a.set("in",function(a,c){return c.some(function(b){return b.getTime()==a.getTime()})});a.set("lte",
function(a,c){return null===a||null===c?!1:a.getTime()<=c.getTime()});a.set("lt",function(a,c){return null===a||null===c?!1:a.getTime()<c.getTime()});a.set("neq",function(a,c){return(null===a?-1:a.getTime())!=(null===c?-1:c.getTime())});return a};function I(){this.h=this.C=null}var ie=[];I.prototype.getParent=g("C");I.prototype.bb=function(){for(var a=this;null!==a.getParent();)a=a.getParent();return a};function je(a){for(var b=0;null!==a.getParent();)b++,a=a.getParent();return b}function J(a){return a.h||ie}function ke(a,b){return J(a)[b]||null}function le(a,b,c){b.C=a;null===a.h?a.h=[b]:a.h.splice(c,0,b)}function K(a,b){b.C=a;null===a.h?a.h=[b]:a.h.push(b)}
function me(a,b){var c=a.h&&a.h[b];return c?(c.C=null,a.h.splice(b,1),0==a.h.length&&(a.h=null),c):null}I.prototype.removeChild=function(a){return me(this,J(this).indexOf(a))};function ne(a,b,c){ke(a,c).C=null;b.C=a;a.h[c]=b}function oe(a,b,c){!1!==b.call(c,a)&&J(a).forEach(function(a){oe(a,b,c)})};function qe(){I.call(this);this.sa=re++}r(qe,I);var re=0;qe.prototype.W=g("sa");function se(a,b,c){qe.call(this);this.J=a;this.value=b;this.F=c;this.uc=he(ge(),this.J.G(),this.F);this.Wa=!1;this.bc=b}r(se,qe);m=se.prototype;m.Nb=function(){var a=new se(this.J,this.value,this.F);a.bc=this.bc;a.ud(this.Wa);var b=this.W();a.sa=b;return a};m.lb=function(a){return null!=a?(a.push(this.J),a):[this.J]};m.s=function(a){a=null!=a?a:B();a.add(this.J.I());return a};m.ud=ba("Wa");
function te(a){var b=!1;a.value instanceof Yd||(b="array"==fa(a.value)?!a.value.some(function(a){return a instanceof Yd}):!0);if(!b)throw new D(501);}m.eval=function(a){te(this);if("in"==this.F)return ue(this,a);var b=a.entries.filter(function(a){return this.uc(H(a,this.J),this.value)!=this.Wa},this);return new G(b,a.s())};
m.bind=function(a){if(this.bc instanceof Yd){var b=this.bc.Ca();if(a.length<=b)throw new D(510);this.value=a[b]}else"array"==fa(this.bc)&&(this.value=this.bc.map(function(b){if(b instanceof Yd){var c=b.Ca();if(a.length<=c)throw new D(510);return a[b.Ca()]}return b}))};function ue(a,b){var c=B(a.value),d=function(a){return null===a?!1:c.has(a)!=this.Wa}.bind(a);a=b.entries.filter(function(a){return d(H(a,this.J))},a);return new G(a,b.s())}
m.toString=function(){return"value_pred("+this.J.j()+" "+this.F+(this.Wa?"(complement)":"")+" "+this.value+")"};m.kd=function(){te(this);return null!==this.value&&("between"==this.F||"in"==this.F||"eq"==this.F||"gt"==this.F||"gte"==this.F||"lt"==this.F||"lte"==this.F)};
m.ve=function(){var a=null;if("between"==this.F)a=new E(ve(this,this.value[0]),ve(this,this.value[1]),!1,!1);else{if("in"==this.F)return a=this.value.map(function(a){return new E(a,a,!1,!1)}),new Jd(this.Wa?Id(a):a);a=ve(this,this.value);a="eq"==this.F?new E(a,a,!1,!1):"gte"==this.F?new E(a,F,!1,!1):"gt"==this.F?new E(a,F,!0,!1):"lte"==this.F?new E(F,a,!1,!1):new E(F,a,!1,!0)}return new Jd(this.Wa?Bd(a):[a])};function ve(a,b){return 2==a.J.G()?b.getTime():b};function we(a){this.ba=a;this.Vc=this.Ga=null}function xe(a,b){null===a.Ga&&null!=a.w&&(a.Ga=ye(a.w));return a.Ga.get(b)||null}function ye(a){var b=y();oe(a,function(a){b.set(a.W(),a)});return b}function ze(a,b){b.w&&(a.w=b.w.Nb());a.Vc=b}we.prototype.bind=function(){return this};function Ae(a,b){a=a.w;null!=a&&oe(a,function(a){a instanceof se&&a.bind(b)})};function Be(a){we.call(this,a)}r(Be,we);function Ce(a){var b="";a.forEach(function(c,d){b+=c.J.j()+" ";b+=1==c.order?"ASC":"DESC";d<a.length-1&&(b+=", ")});return b}Be.prototype.da=function(){return B(this.from)};Be.prototype.clone=function(){var a=new Be(this.ba);ze(a,this);this.f&&(a.f=this.f.slice());this.from&&(a.from=this.from.slice());a.X=this.X;a.L=this.L;this.N&&(a.N=this.N.slice());this.ra&&(a.ra=this.ra.slice());this.Sb&&(a.Sb=this.Sb);this.Zb&&(a.Zb=this.Zb);a.eb=this.eb;return a};
Be.prototype.bind=function(a){Be.hb.bind.call(this,a);null!=this.Sb&&(this.X=a[this.Sb.Ca()]);null!=this.Zb&&(this.L=a[this.Zb.Ca()]);Ae(this,a);return this};function De(a,b){this.Ha=a;this.aa=b}De.prototype.bb=g("Ha");De.prototype.da=g("aa");function Ee(a){var b=B();a.forEach(function(a){a.da().forEach(b.add.bind(b))});return b};function Fe(a,b){this.global=a;this.Oa=a.b(xc);this.sd=b.map(function(a){return a.context});this.hf=b.map(function(a){return a.ie});this.Ld=Ee(this.hf);this.we=Ge(this);this.Db=w()}function Ge(a){return a.sd.some(function(a){return!(a instanceof Be)})?1:0}m=Fe.prototype;
m.exec=function(){function a(){var f=d.shift();if(f){var h=e[c.length];return f.bb().exec(b,h).then(function(b){c.push(b[0]);return a()})}return v()}var b=0==this.we?void 0:new wd(this.global,this.Ld),c=[],d=this.hf.slice(),e=this.sd;return a().then(function(){this.ja=this.Oa.Fb(this.we,C(this.Ld),b);return this.ja.ka()}.bind(this)).then(function(){this.fe(c);return c}.bind(this),function(a){null!=b&&b.Jb();throw a;})};m.G=g("we");m.da=g("Ld");m.W=function(){return la(this)};m.fe=aa();
m.Y=function(){var a=null;null!=this.ja&&(a=this.ja.Y());return null===a?new A(!1,0,0,0,0):a};function He(a,b){Fe.call(this,a,b);this.Ib=a.b(Cc)}r(He,Fe);He.prototype.getPriority=k(0);He.prototype.fe=function(a){this.sd.forEach(function(b,c){Ie(this.Ib,b,a[c])},this)};function Je(a,b){this.c=a;this.Ib=a.b(Cc);this.Ia=a.b(Bc);this.fd=new Uc(a);this.ib=b;var c=a.b(Dc);a=this.ib.map(function(a){return c.table(a.getName())});this.aa=B(a);this.Db=w()}m=Je.prototype;m.exec=function(){this.fd.update(this.ib);this.Lc();return v()};m.G=k(1);m.da=g("aa");m.W=function(){return la(this)};m.getPriority=k(1);m.Lc=function(){var a=Ke(this.Ib,this.aa);0!=a.length&&(a=new He(this.c,a),Le(this.Ia,a))};function Me(a){this.c=a;this.Oa=a.b(xc);this.Ia=a.b(Bc)}Me.prototype.de=function(a){a=new Je(this.c,a);Le(this.Ia,a)};function M(a,b){this.Ua=a;this.i=b;this.Za=y()}q("lf.backstore.FirebaseRawBackStore",M);M.prototype.bd=g("i");M.prototype.cd=function(){throw new D(351);};function Ne(a,b){var c=w(),d=a;b.length&&(d=a.child(b));d.once("value",function(a){c.resolve(a.val())},function(a){c.reject(a)});return c.ha}function Oe(a,b,c){function d(a){a?e.reject(a):e.resolve()}c=c||!1;var e=w();c?a.set(b,d):a.update(b,d);return e.ha}
M.prototype.Ea=function(a){return Ne(this.i,"@rev/R").then(function(a){this.Sa=a;return Ne(this.i,"@table")}.bind(this)).then(function(b){var c=0;for(d in b)this.Za.set(d,b[d]),b[d]>c&&(c=b[d]);a.oa().forEach(function(a){this.Za.has(a.getName())||(b[a.getName()]=++c)},this);var d=this.i.child("@table");return Oe(d,b)}.bind(this))};
function Pe(a,b,c){var d=a.Za.get(b);return null!=d?function(){var a={},b=w();this.i.orderByChild("T").equalTo(d).once("value",function(d){d.forEach(function(b){var d=c(b.val());a[parseInt(b.key(),10)]=d});b.resolve(a)});return b.ha}.call(a).then(function(a){a["@rev"]={R:++this.Sa};return Oe(this.i,a)}.bind(a)):v()}M.prototype.sc=function(a){return Pe(this,a,k(null)).then(function(){this.Za.delete(a);return Oe(this.i.child("@table/"+a),null,!0)}.bind(this))};M.prototype.dropTable=M.prototype.sc;
M.prototype.qc=function(a,b,c){return Pe(this,a,function(a){var d=a.P;d[b]=c;return{R:this.Sa+1,T:a.T,P:d}}.bind(this))};M.prototype.addTableColumn=M.prototype.qc;M.prototype.tc=function(a,b){return Pe(this,a,function(a){var c=a.P;delete c[b];return{R:this.Sa+1,T:a.T,P:c}}.bind(this))};M.prototype.dropTableColumn=M.prototype.tc;M.prototype.Kc=function(a,b,c){return Pe(this,a,function(a){var d=a.P;d[c]=d[b];delete d[b];return{R:this.Sa+1,T:a.T,P:d}}.bind(this))};M.prototype.renameTableColumn=M.prototype.Kc;
M.prototype.xb=function(){throw new D(351);};M.prototype.createRow=M.prototype.xb;M.prototype.Bc=g("Ua");M.prototype.getVersion=M.prototype.Bc;M.prototype.dc=function(a){var b=w();a=this.Za.get(a);this.i.orderByChild("T").equalTo(a).once("value",function(a){var c=[];a.forEach(function(a){c.push(a.val().P)});b.resolve(c)});return b.ha};M.prototype.dump=function(){var a={},b=ic(this.Za).map(function(b){return this.dc(b).then(function(c){a[b]=c})}.bind(this));return gb(b).then(function(){return a})};
M.prototype.dump=M.prototype.dump;function Qe(a,b,c){pc.call(this,b,c);this.i=a}r(Qe,pc);Qe.prototype.I=function(a){return this.i.zc(a)};
Qe.prototype.rc=function(){if(0==this.xd)return this.S.resolve(),this.S.ha;var a=this.Ra.ib;if(0==a.size)this.S.resolve();else{var b=this.i.Sa+1;this.i.Sa=b;var c={"@rev":{R:b}};a.forEach(function(a,e){var d=this.i.Za.get(e);a.va.forEach(function(a,e){c[e]={R:b,T:d,P:a.m}});a.la.forEach(function(a,e){c[e]={R:b,T:d,P:a[1].m}});a.wa.forEach(function(a,b){c[b]=null})},this);this.i.i.update(c,function(c){null===c?this.S.resolve():(this.i.Sa=b-1,c=z(a).map(function(a){return Re(this.i,a.getName())},this),
gb(c).then(this.S.reject.bind(this.S),this.S.reject.bind(this.S)))}.bind(this))}return this.S.ha};function Se(){this.Ba=y()}function Te(a,b){if(0==b.length)return z(a.Ba);var c=[];b.forEach(function(a){a=this.Ba.get(a)||null;null===a||c.push(a)},a);return c}Se.prototype.getData=g("Ba");Se.prototype.get=function(a){return v(Te(this,a))};function Ue(a,b){b.forEach(function(a){this.Ba.set(a.id(),a)},a)}Se.prototype.put=function(a){Ue(this,a);return v()};function Ve(a,b){0==b.length||b.length==a.Ba.size?a.Ba.clear():b.forEach(function(a){this.Ba.delete(a)},a)}
Se.prototype.remove=function(a){Ve(this,a);return v()};function We(a){return 0==a.Ba.size?0:ic(a.Ba).reduce(function(a,c){return a>c?a:c},0)};function Xe(a,b){this.g=a;this.Cf=b;this.Jc=y();this.Sa=-1;this.M=y();this.Za=y();this.Id=null}m=Xe.prototype;
m.Ea=function(a){this.i=this.Cf.child(this.g.name());var b=a||function(){return v()};return Ne(this.i,"@db/version").then(function(a){return null===a?Oe(this.i,Ye(this),!0).then(function(){var a=new M(0,this.i);return b(a)}.bind(this)).then(function(){return this.Ea()}.bind(this)):a==this.g.version()?Ne(this.i,"@rev/R").then(function(a){this.Sa=a;return Ne(this.i,"@table")}.bind(this)).then(function(a){for(var b in a)this.Za.set(b,a[b]);a=this.g.oa().map(function(a){return Re(this,a.getName())},this);
return gb(a)}.bind(this)).then(function(){Ze(this);$e(this);return v()}.bind(this)):this.ge(a,b).then(function(){return this.Ea()}.bind(this))}.bind(this))};m.ge=function(a,b){var c=new M(a,this.i);return c.Ea(this.g).then(function(){return v()}.bind(this)).then(function(){return b(c)}).then(function(){var a=this.i.child("@db");return Oe(a,{version:this.g.version()},!0)}.bind(this))};
function $e(a){a.i.off();a.i.on("child_removed",a.yg.bind(a));a.Jd&&(a.Jd.off(),a.Jc.clear());a.Jd=a.i.orderByChild("R").startAt(a.Sa+1);a.Jd.on("value",a.de.bind(a))}function Ze(a){kc=z(a.M).map(function(a){return We(a)}).reduce(function(a,c){return a>c?a:c},0)+1}m.yg=function(a){var b=a.val(),c=this.Jc.get(b.T)||null;null===c&&(c=B(),this.Jc.set(b.T,c));c.add(parseInt(a.key(),10))};
m.de=function(a){var b=a.child("@rev/R").val();null!=b&&b!=this.Sa&&(this.Sa=b,a=af(this,a),a.forEach(function(a){var b=this.M.get(a.getName()),c=ic(a.wa);0<c.length&&Ve(b,c);var f=z(a.va);a.la.forEach(function(a){f.push(a[1])});Ue(b,f)},this),0<a.length&&this.Fc(a),$e(this))};
function af(a,b){var c=B(),d=y();a.Za.forEach(function(a,b){var e=this.M.get(b),f=new ud(b);this.Jc.has(a)&&(b=C(this.Jc.get(a)),b.forEach(function(a){c.add(a)}),Te(e,b).forEach(function(a){f.delete(a)}));d.set(a,f)}.bind(a));b.forEach(function(a){if("@rev"!=a.key()){var b=parseInt(a.key(),10);if(!c.has(b)){var e=a.val();a=d.get(e.T);var l=this.M.get(a.getName());e=this.g.table(a.getName()).kb({id:b,value:e.P});l.getData().has(b)?a.modify([Te(l,[b])[0],e]):a.add(e)}}}.bind(a));return z(d).filter(function(a){return!a.hd()})}
function Re(a,b){var c=w(),d=a.Za.get(b),e=a.g.table(b);a.i.orderByChild("T").equalTo(d).once("value",function(a){var d=new Se,f=[];a.forEach(function(a){f.push(e.kb({id:parseInt(a.key(),10),value:a.val().P}))});Ue(d,f);this.M.set(b,d);c.resolve()}.bind(a));return c.ha}function Ye(a){var b={};b["@db"]={version:a.g.version()};b["@rev"]={R:1};a.Sa=1;b["@table"]={};a.g.oa().forEach(function(a,d){a=a.getName();b["@table"][a]=d;this.M.set(a,new Se);this.Za.set(a,d)},a);return b}
m.Fb=function(a,b,c){return new Qe(this,a,c)};m.zc=function(a){var b=this.M.get(a)||null;if(null!==b)return b;throw new D(101,a);};m.close=aa();m.subscribe=ba("Id");m.Fc=function(a){null!=this.Id&&this.Id(a)};function N(a,b,c,d){this.i=b;this.ja=c;this.Ua=a;this.Tc=d}q("lf.backstore.IndexedDBRawBackStore",N);N.prototype.bd=g("i");N.prototype.getRawDBInstance=N.prototype.bd;N.prototype.cd=g("ja");N.prototype.getRawTransaction=N.prototype.cd;N.prototype.sc=function(a){return new u(function(b,c){try{this.i.deleteObjectStore(a)}catch(d){c(d);return}b()},this)};N.prototype.dropTable=N.prototype.sc;
function bf(a,b,c,d){return new u(function(a,f){try{var e=this.ja.objectStore(b);var l=e.openCursor()}catch(p){f(p);return}l.onsuccess=function(){var b=l.result;b?(c(b),b.continue()):(d(e),a())};l.onerror=f},a)}function cf(a){return a instanceof ArrayBuffer?nc(a):a instanceof Date?a.getTime():a}function df(a,b,c){function d(a){var b=Oc(a.value),d=b.m,e;for(e in d){var f=lc(d[e]);c(f);d[e]=f.Ja()}a.update(b.Ja())}function e(a){var b=lc(a.value);c(b);a.update(b.Ja())}return bf(a,b,a.Tc?d:e,aa())}
N.prototype.qc=function(a,b,c){var d=cf(c);return df(this,a,function(a){a.m[b]=d})};N.prototype.addTableColumn=N.prototype.qc;N.prototype.tc=function(a,b){return df(this,a,function(a){delete a.m[b]})};N.prototype.dropTableColumn=N.prototype.tc;N.prototype.Kc=function(a,b,c){return df(this,a,function(a){a.m[c]=a.m[b];delete a.m[b]})};N.prototype.renameTableColumn=N.prototype.Kc;
function ef(a,b){var c=[];return new u(function(a,e){try{var d=this.ja.objectStore(b).openCursor()}catch(h){e(h);return}d.onsuccess=function(){var b=d.result;if(b){if(this.Tc){var e=Oc(b.value).m,f;for(f in e)c.push(e[f])}else c.push(b.value);b.continue()}else a(c)}.bind(this);d.onerror=e},a)}N.prototype.xb=function(a){var b={},c;for(c in a)b[c]=cf(a[c]);return mc(b)};N.prototype.createRow=N.prototype.xb;N.prototype.Bc=g("Ua");N.prototype.getVersion=N.prototype.Bc;
N.prototype.dump=function(){for(var a=this.i.objectStoreNames,b=[],c=0;c<a.length;++c){var d=a.item(c);b.push(this.dc(d))}return gb(b).then(function(b){var c={};b.forEach(function(b,d){c[a.item(d)]=b});return c})};N.prototype.dump=N.prototype.dump;N.prototype.dc=function(a){return ef(this,a).then(function(a){return a.map(function(a){return a.value})})};function ff(a,b){this.Z=a;this.Gb=b}ff.prototype.get=function(a){if(0==a.length)return null!=this.Z.getAll?gf(this):hf(this);a=a.map(function(a){return new u(function(b,d){try{var c=this.Z.get(a)}catch(f){d(f);return}c.onerror=d;c.onsuccess=function(a){b(this.Gb(a.target.result))}.bind(this)},this)},this);return gb(a)};
function hf(a){return new u(function(a,c){var b=[];try{var e=this.Z.openCursor()}catch(f){c(f);return}e.onerror=c;e.onsuccess=function(){var c=e.result;c?(b.push(this.Gb(c.value)),c.continue()):a(b)}.bind(this)},a)}function gf(a){return new u(function(a,c){try{var b=this.Z.getAll()}catch(e){c(e);return}b.onerror=c;b.onsuccess=function(){var c=b.result.map(function(a){return this.Gb(a)},this);a(c)}.bind(this)},a)}
ff.prototype.Tb=function(a){return new u(function(b,c){try{var d=a()}catch(e){c(e);return}d.onsuccess=b;d.onerror=c},this)};ff.prototype.put=function(a){if(0==a.length)return v();a=a.map(function(a){return this.Tb(function(){return this.Z.put(a.Ja())}.bind(this))},this);return gb(a)};
ff.prototype.remove=function(a,b){function c(){var b=a.map(function(a){return d.Tb(function(){return d.Z.delete(a)})});return gb(b)}var d=this;return b?c():new u(function(b,f){var e=d.Z.count();e.onsuccess=function(e){0==a.length||e.target.result==a.length?d.Tb(function(){return d.Z.clear()}).then(b,f):c().then(b,f)};e.onerror=f})};function jf(a,b,c,d,e){pc.call(this,c,e);this.c=a;this.ja=b;this.Tc=d;this.ja.oncomplete=this.S.resolve.bind(this.S);this.ja.onabort=this.S.reject.bind(this.S)}r(jf,pc);jf.prototype.I=function(a,b,c){return this.Tc?(c=null!=c?c:0,a=this.ja.objectStore(a),new Pc(a,b,0==c?sa(Rc,this.c):Tc)):new ff(this.ja.objectStore(a),b)};jf.prototype.rc=function(){return this.S.ha};function kf(a,b){this.c=a;this.g=b;this.Fd=b.je.Rf||!1}m=kf.prototype;
m.Ea=function(a){var b=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;if(null==b)throw new D(352);var c=a||function(){return v()};return new u(function(a,e){try{var d=b.open(this.g.name(),this.g.version())}catch(h){e(h);return}d.onerror=function(a){a=a.target.error;e(new D(361,a.name,a.message))};d.onupgradeneeded=function(a){mf(this,c,a).then(aa(),e)}.bind(this);d.onsuccess=function(b){this.i=b.target.result;this.pe().then(function(b){kc=Math.max(kc,b+1);a(this.i)}.bind(this))}.bind(this)},
this)};function mf(a,b,c){var d=c.target.result;c=new N(c.oldVersion,d,c.target.transaction,a.Fd);nf(d);a.g.oa().forEach(sa(a.Kf,d),a);return b(c)}function nf(a){for(var b=[],c=0;c<a.objectStoreNames.length;++c){var d=a.objectStoreNames.item(c);-1!=d.indexOf(".")&&b.push(d)}b.forEach(function(b){try{a.deleteObjectStore(b)}catch(f){}})}
m.Kf=function(a,b){a.objectStoreNames.contains(b.getName())||a.createObjectStore(b.getName(),{keyPath:"id"});b.Cb()&&(b.Da().forEach(function(b){of(a,b.j())},this),of(a,pf(b)))};function of(a,b){a.objectStoreNames.contains(b)||a.createObjectStore(b,{keyPath:"id"})}m.Fb=function(a,b,c){b=this.i.transaction(qf(b),0==a?"readonly":"readwrite");return new jf(this.c,b,a,this.Fd,c)};
function qf(a){var b=B();a.forEach(function(a){b.add(a.getName());a.Cb()&&(a.Da().forEach(function(a){b.add(a.j())}),b.add(pf(a)))});return C(b)}
m.pe=function(){function a(){if(0==c.length)return v();var d=c.shift();return b(d).then(a)}function b(a){return new u(function(b,c){try{var h=d.transaction([a]).objectStore(a).openCursor(null,"prev")}catch(ma){c(ma);return}h.onsuccess=function(a){(a=a.target.result)&&(e=Math.max(e,f(a)));b(e)};h.onerror=function(){b(e)}})}var c=this.g.oa().map(function(a){return a.getName()}),d=this.i,e=0,f=function(a){return this.Fd?(a=Oc(a.value),Object.keys(a.m).reduce(function(a,b){return Math.max(a,b)},0)):a.key}.bind(this);
return new u(function(b){a().then(function(){b(e)})})};m.close=function(){this.i.close()};m.zc=function(){throw new D(511);};m.subscribe=aa();m.Fc=aa();function rf(a,b,c){pc.call(this,b,c);this.Z=a;0==b&&this.S.resolve()}r(rf,pc);rf.prototype.I=function(a){return this.Z.zc(a)};rf.prototype.rc=function(){this.S.resolve();return this.S.ha};function sf(a){this.g=a;this.M=y()}m=sf.prototype;m.Ea=function(){this.g.oa().forEach(this.fg,this);return v()};m.zc=function(a){var b=this.M.get(a)||null;if(null===b)throw new D(101,a);return b};m.Fb=function(a,b,c){return new rf(this,a,c)};function tf(a,b){if(!a.M.has(b)){var c=new Se;a.M.set(b,c)}}m.fg=function(a){tf(this,a.getName());a.Cb()&&(a.Da().forEach(function(a){tf(this,a.j())},this),tf(this,pf(a)))};m.close=aa();m.subscribe=aa();m.Fc=aa();function uf(a){sf.call(this,a);this.od=null}r(uf,sf);uf.prototype.subscribe=function(a){null===this.od&&(this.od=a)};uf.prototype.Fc=function(a){null===this.od||this.od(a)};function vf(a,b,c){this.ja=a;this.A='"'+b+'"';this.Gb=c}vf.prototype.get=function(a){var b=this.Gb;return wf(this.ja,"SELECT id, value FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[],function(a){for(var c=a.rows.length,e=Array(c),f=0;f<c;++f)e[f]=b({id:a.rows.item(f).id,value:JSON.parse(a.rows.item(f).value)});return e})};
vf.prototype.put=function(a){if(0==a.length)return v();var b="INSERT OR REPLACE INTO "+this.A+"(id, value) VALUES (?, ?)";a.forEach(function(a){wf(this.ja,b,[a.id(),JSON.stringify(a.m)])},this);return v()};vf.prototype.remove=function(a){wf(this.ja,"DELETE FROM "+this.A+" "+(0==a.length?"":"WHERE id IN ("+a.join(",")+")"),[]);return v()};function xf(a,b,c){pc.call(this,b,c);this.i=a;this.M=y();this.Md=[]}r(xf,pc);function yf(a){return a.replace(".","__d__").replace("#","__s__")}xf.prototype.I=function(a,b){var c=this.M.get(a)||null;null===c&&(c=new vf(this,yf(a),b),this.M.set(a,c));return c};function wf(a,b,c,d){var e=w();a.Md.push({Mg:b,Cg:c,transform:d,S:e});return e.ha}
xf.prototype.rc=function(){var a=null,b=this.S.reject.bind(this.S),c=function(a,b){this.S.reject(b)}.bind(this),d=[],e=function(b,h){if(null!==a){var f=h;null!=a.transform&&null!=h&&(f=a.transform(h));d.push(f);a.S.resolve(f)}0<this.Md.length?(a=h=this.Md.shift(),b.executeSql(h.Mg,h.Cg,e,c)):this.S.resolve(d)}.bind(this);0==this.xd?this.i.readTransaction(e,b):this.i.transaction(e,b);return this.S.ha};function O(a,b,c){this.i=c;this.c=a;this.Ua=b}q("lf.backstore.WebSqlRawBackStore",O);O.prototype.bd=g("i");O.prototype.getRawDBInstance=O.prototype.bd;O.prototype.cd=function(){throw new D(356);};O.prototype.getRawTransaction=O.prototype.cd;function zf(a){return new xf(a.i,1,new wd(a.c,B()))}O.prototype.sc=function(a){var b=zf(this);wf(b,"DROP TABLE "+a,[]);return b.ka()};O.prototype.dropTable=O.prototype.sc;
O.prototype.dc=function(a){var b=zf(this);wf(b,"SELECT id, value FROM "+a,[]);return b.ka().then(function(a){for(var b=a[0].rows.length,c=Array(b),f=0;f<b;++f)c[f]={id:a[0].rows.item(f).id,value:JSON.parse(a[0].rows.item(f).value)};return v(c)})};function Af(a,b,c){var d=zf(a),e="UPDATE "+b+" SET value=? WHERE id=?";return a.dc(b).then(function(a){a.forEach(function(a){a=c(a);wf(d,e,[JSON.stringify(a.value),a.id])});return d.ka()})}
O.prototype.qc=function(a,b,c){var d=cf(c);return Af(this,a,function(a){a.value[b]=d;return a})};O.prototype.addTableColumn=O.prototype.qc;O.prototype.tc=function(a,b){return Af(this,a,function(a){delete a.value[b];return a})};O.prototype.dropTableColumn=O.prototype.tc;O.prototype.Kc=function(a,b,c){return Af(this,a,function(a){a.value[c]=a.value[b];delete a.value[b];return a})};O.prototype.renameTableColumn=O.prototype.Kc;O.prototype.xb=function(a){var b={},c;for(c in a)b[c]=cf(a[c]);return mc(b)};
O.prototype.createRow=O.prototype.xb;O.prototype.Bc=g("Ua");O.prototype.getVersion=O.prototype.Bc;function Bf(a){wf(a,'SELECT tbl_name FROM sqlite_master WHERE type="table"',[],function(a){for(var b=Array(a.rows.length),d=0;d<b.length;++d)b[d]=a.rows.item(d).tbl_name;return b})}
O.prototype.dump=function(){var a=w(),b=zf(this);Bf(b);var c={};b.ka().then(function(b){b=b[0].filter(function(a){return"__lf_ver"!=a&&"__WebKitDatabaseInfoTable__"!=a}).map(function(a){return this.dc(a).then(function(b){c[a]=b})},this);gb(b).then(function(){a.resolve(c)})}.bind(this));return a.ha};O.prototype.dump=O.prototype.dump;function Cf(a,b,c){this.c=a;this.g=b;this.Lg=c||1}m=Cf.prototype;m.Ea=function(a){if(null==window.openDatabase)throw new D(353);var b=a||function(){return v()};return new u(function(a,d){var c=window.openDatabase(this.g.name(),"",this.g.name(),this.Lg);if(null!=c)this.i=c,Df(this,b).then(function(){this.pe().then(a,d)}.bind(this),function(a){if(a instanceof D)throw a;throw new D(354,a.message);});else throw new D(354);},this)};
function Df(a,b){var c=w(),d=new xf(a.i,1,new wd(a.c,B()));wf(d,"CREATE TABLE IF NOT EXISTS __lf_ver(id INTEGER PRIMARY KEY, v INTEGER)",[]);wf(d,"SELECT v FROM __lf_ver WHERE id = 0",[]);d.ka().then(function(a){var d=0;a[1].rows.length&&(d=a[1].rows.item(0).v);d<this.g.version()?this.ge(b,d).then(c.resolve.bind(c)):d>this.g.version()?c.reject(new D(108)):c.resolve()}.bind(a),c.reject.bind(c));return c.ha}m.Fb=function(a,b,c){if(null!=this.i)return new xf(this.i,a,c);throw new D(2);};m.close=aa();
m.zc=function(){throw new D(512);};m.subscribe=function(){throw new D(355);};m.Fc=function(){throw new D(355);};m.ge=function(a,b){return Ef(this).then(function(){return a(new O(this.c,b,this.i))}.bind(this))};
function Ef(a){var b=a.g.oa(),c=new xf(a.i,1,new wd(a.c,B())),d=new xf(a.i,1,new wd(a.c,B()));wf(c,"INSERT OR REPLACE INTO __lf_ver VALUES (0, ?)",[a.g.version()]);Bf(c);return c.ka().then(function(a){var c=a[1];c.filter(function(a){return-1!=a.indexOf("__d__")}).forEach(function(a){wf(d,"DROP TABLE "+('"'+a+'"'),[])});var e=[],l=[],p=[];b.map(function(a){-1==c.indexOf(a.getName())&&e.push(a.getName());a.Cb&&(a.Da().forEach(function(a){a=yf(a.j());e.push(a);l.push(a)}),a=yf(pf(a)),e.push(a),p.push(a))});
e.forEach(function(a){wf(d,"CREATE TABLE "+('"'+a+'"')+"(id INTEGER PRIMARY KEY, value TEXT)",[])});return d.ka()})}m.pe=function(){var a=0,b=w(),c=function(b){var c=new xf(this.i,0);wf(c,"SELECT MAX(id) FROM "+('"'+b+'"'),[]);return c.ka().then(function(b){b=b[0].rows.item(0)["MAX(id)"];a=Math.max(b,a)})}.bind(this),d=this.g.oa().map(function(a){return c(a.getName())});gb(d).then(function(){kc=Math.max(kc,a+1);b.resolve()},function(a){b.reject(a)});return b.ha};function Ff(a){this.l=y();this.mc=y();a.oa().forEach(function(a){this.mc.set(a.getName(),B())},this)}m=Ff.prototype;m.set=function(a,b){this.l.set(b.id(),b);this.mc.get(a).add(b.id())};m.Wb=function(a,b){var c=this.mc.get(a);b.forEach(function(a){this.l.set(a.id(),a);c.add(a.id())},this)};m.get=function(a){return this.l.get(a)||null};function Gf(a,b){return b.map(function(a){return this.get(a)},a)}
m.Va=function(a,b,c){var d=[],e=Math.min(b,c),f=Math.max(b,c);a=this.mc.get(a);if(a.size<f-e)a.forEach(function(a){a>=e&&a<=f&&(a=this.l.get(a),d.push(a))},this);else for(b=e;b<=f;++b)a.has(b)&&(c=this.l.get(b),d.push(c));return d};m.remove=function(a,b){this.l.delete(b);this.mc.get(a).delete(b)};m.yc=function(){return this.l.size};m.clear=function(){this.l.clear();this.mc.clear()};function Hf(a,b,c){var d=0,e=a.length;for(c=c||If;d<e;){var f=d+e>>1;0>c(a[f],b)?d=f+1:e=f}return d==e&&a[d]==b?d:~d}function If(a,b){return a-b}function Jf(a,b,c){c=Hf(a,b,c);return 0>c?(a.splice(-(c+1),0,b),!0):!1};function Kf(a,b,c,d){a=b?a.reverse():a;if(null==c&&null==d)return a;c=Math.min(n(c)?c:a.length,a.length);if(0==c)return[];d=Math.min(d||0,a.length);return a.slice(d,d+c)};function Lf(){this.ia=0;this.Ec=null}Lf.prototype.add=function(a,b){this.ia+=b;this.Ec=null===this.Ec?a:a>this.Ec?a:this.Ec};Lf.prototype.remove=function(a,b){this.ia-=b};Lf.prototype.clear=function(){this.ia=0};function Mf(a,b){a.clear();b.forEach(function(a){this.ia+=a.ia},a)};function Nf(a,b,c){this.A=a;this.$=b;this.xf=c;this.za=new Lf;this.clear()}var Of=[];m=Nf.prototype;m.getName=g("A");m.toString=function(){return this.ya.toString()};m.add=function(a,b){this.ya=this.ya.Ab(a,b)};m.set=function(a,b){this.ya=this.ya.Ab(a,b,!0)};m.remove=function(a,b){this.ya=this.ya.remove(a,b)};m.get=function(a){return this.ya.get(a)};m.Yc=function(a){if(null==a)return this.Y().ia;if(a instanceof E){if(Cd(a))return this.Y().ia;if(Gd(a))return this.get(a.from).length}return this.Va([a]).length};
m.Y=g("za");m.Ud=function(a,b,c){var d=Array(a);this.ya.fill({offset:b?this.za.ia-a-c:c,count:a,se:0},d);return b?d.reverse():d};
m.Va=function(a,b,c,d){var e=Pf(this.ya).a[0];if(!n(e)||0==c)return Of;b=b||!1;c=null!=c?Math.min(c,this.za.ia):this.za.ia;d=d||0;var f=Math.min(Math.max(this.za.ia-d,0),c);if(0==f)return Of;if(!n(a)||1==a.length&&a[0]instanceof E&&Cd(a[0]))return this.Ud(f,b,d);a=this.$.tf(a);var h=Array(b?this.za.ia:f),l={count:0,X:h.length,reverse:b,L:d},p=1<this.jb().Yd();a.forEach(function(a){var b=this.$.td(a);b=this.$.Wd(a)?e:b[0];b=this.ya.Xf(b);for(var c=0;null!=b&&l.count<l.X;){if(p){for(var d=b,f=a,L=l,
Eb=h,Sc=d.u.jb(),pe=-1,Oa=0;Oa<d.a.length;++Oa)if(Sc.Bb(d.a[Oa],f)){pe=Oa;break}if(-1!=pe)for(Oa=pe;Oa<d.a.length&&L.count<L.X;++Oa)Sc.Bb(d.a[Oa],f)&&Qf(d,L,Eb,Oa)}else b.Va(a,l,h);0!=l.L||b.jd(a)?c=0:c++;b=2==c?null:b.next()}},this);h.length>l.count&&h.splice(l.count,h.length-l.count);return b?Kf(h,b,c,d):h};m.clear=function(){this.ya=Rf(this);this.za.clear()};m.Pa=function(a){return this.ya.Pa(a)};m.min=function(){return this.Hb(this.$.min.bind(this.$))};m.max=function(){return this.Hb(this.$.max.bind(this.$))};
function Sf(a,b,c){if(!a.$.Nd(b.a[c]))if(1<b.a[c].length){if(null===b.a[c][0])return null}else return null;return[b.a[c],a.xf?[b.D[c]]:b.D[c]]}m.Hb=function(a){a:{var b=Pf(this.ya);var c=0;do if(c>=b.a.length)b=b.xa,c=0;else{var d=Sf(this,b,c);if(null!==d){b=d;break a}c++}while(null!==b);b=null}a:{c=Tf(this.ya);d=c.a.length-1;do if(0>d)c=c.qb,d=0;else{var e=Sf(this,c,d);if(null!==e){c=e;break a}d--}while(null!==c);c=null}return null===b||null===c?null:1==a(b[0],c[0])?b:c};m.Ma=g("xf");m.jb=g("$");
m.Qa=function(a,b){return null!=a?0==this.$.compare(a,b):!1};m.Ja=function(){for(var a=[],b=Pf(this.ya);b;)a.push(new jc(b.sa,[b.a,b.D])),b=b.xa;return a};function Uf(a,b,c,d){a=new Nf(b,a,c);d=Vf(d,a);a.ya=d;return a}function Wf(a,b){this.sa=a;this.u=b;this.mb=0;this.xa=this.qb=this.C=null;this.a=[];this.D=[];this.h=[];this.Xf=1==b.jb().Yd()?this.Oe:this.Ne}function Rf(a){return new Wf(kc++,a)}function P(a){return 0==a.mb}m=Wf.prototype;m.next=g("xa");
function Xf(a){function b(a){return null!=a?a.sa.toString():"_"}var c=a.sa+"["+a.a.join("|")+"]",d=a.h.map(function(a){return a.sa}).join("|"),e=a.D.join("/"),f=b(a.qb)+"{";f=P(a)?f+e:f+d;f=f+"}"+b(a.C);a.xa&&(a=Xf(a.xa),c=c+"  "+a[0],f=f+"  "+a[1]);return[c,f]}m.toString=function(){var a="",b=Xf(this);a+=b[0]+"\n"+b[1]+"\n";this.h.length&&(a+=this.h[0].toString());return a};function Pf(a){return P(a)?a:Pf(a.h[0])}function Tf(a){return P(a)?a:Tf(a.h[a.h.length-1])}
function Yf(a,b){b&&(b.qb=a);a&&(a.xa=b)}function Zf(a){var b=a[0],c=Rf(b.u);c.mb=b.mb+1;c.h=a;for(b=0;b<a.length;++b)a[b].C=c,0<b&&c.a.push(a[b].a[0]);return c}function $f(a){var b=a,c=[];do c.push(b),b=b.xa;while(b);if(512>=c.length)b=Zf(c);else{var d=c.length,e=0;b=Rf(a.u);for(b.mb=a.mb+2;0<d;){a=768<=d?511:257<=d&&511>=d?d:257;var f=c.slice(e,e+a),h=Zf(f);h.C=b;b.h.length&&(b.a.push(f[0].a[0]),Yf(b.h[b.h.length-1],h));b.h.push(h);e+=a;d-=a}}return b}
m.get=function(a){var b=ag(this,a);if(P(this)){var c=Of;this.u.Qa(this.a[b],a)&&(c=c.concat(this.D[b]));return c}b=this.u.Qa(this.a[b],a)?b+1:b;return this.h[b].get(a)};m.Pa=function(a){var b=ag(this,a);return this.u.Qa(this.a[b],a)?!0:P(this)?!1:this.h[b].Pa(a)};m.remove=function(a,b){bg(this,a,-1,b);return null===this.C?(a=this,1==this.h.length&&(a=this.h[0],a.C=null),a):this};function cg(a){return P(a)?a.a[0]:cg(a.h[0])}function dg(a){a.a=[];for(var b=1;b<a.h.length;++b)a.a.push(cg(a.h[b]))}
function bg(a,b,c,d){var e=ag(a,b),f=P(a);if(!f){var h=a.u.Qa(a.a[e],b)?e+1:e;if(bg(a.h[h],b,h,d))dg(a);else return!1}else if(!a.u.Qa(a.a[e],b))return!1;if(a.a.length>e&&a.u.Qa(a.a[e],b)){if(n(d)&&!a.u.Ma()&&f&&(h=a.D[e],d=Hf(h,d,void 0),0>d?d=!1:(h.splice(d,1),d=!0),d&&a.u.Y().remove(b,1),a.D[e].length))return!1;a.a.splice(e,1);f&&(f=a.u.Ma()?1:a.D[e].length,a.D.splice(e,1),a.u.Y().remove(b,f))}if(256>a.a.length&&null!==a.C){a:{if(a.xa&&256<a.xa.a.length)b=a.xa,e=d=0,f=a.a.length+1;else if(a.qb&&
256<a.qb.a.length)b=a.qb,d=a.qb.a.length-1,e=P(a)?d:d+1,f=0;else{b=!1;break a}a.a.splice(f,0,b.a[d]);b.a.splice(d,1);d=P(a)?a.D:a.h;P(a)?h=b.D:(h=b.h,h[e].C=a);d.splice(f,0,h[e]);h.splice(e,1);P(b)||(dg(b),dg(a));b=!0}b||fg(a,c)}return!0}
function fg(a,b){var c;if(a.xa&&511>a.xa.a.length){var d=a.xa;var e=c=0}else a.qb&&(d=a.qb,c=d.a.length,e=P(d)?d.D.length:d.h.length);c=[c,0].concat(a.a);Array.prototype.splice.apply(d.a,c);c=null;P(a)?c=a.D:(c=a.h,c.forEach(function(a){a.C=d}));c=[e,0].concat(c);Array.prototype.splice.apply(P(d)?d.D:d.h,c);Yf(a.qb,a.xa);P(d)||dg(d);-1!=b&&(a.C.a.splice(b,1),a.C.h.splice(b,1))}
m.Ab=function(a,b,c){var d=ag(this,a);if(P(this)){if(this.u.Qa(this.a[d],a)){if(c)this.u.Y().remove(a,this.u.Ma()?1:this.D[d].length),this.D[d]=this.u.Ma()?b:[b];else{if(this.u.Ma())throw new D(201,this.u.getName(),JSON.stringify(a));if(!Jf(this.D[d],b))throw new D(109);}this.u.Y().add(a,1);return this}this.a.splice(d,0,a);this.D.splice(d,0,this.u.Ma()?b:[b]);this.u.Y().add(a,1);512==this.a.length?(d=Rf(this.u),a=Rf(this.u),a.mb=1,a.a=[this.a[256]],a.h=[this,d],a.C=this.C,this.C=a,d.a=this.a.splice(256),
d.D=this.D.splice(256),d.C=a,Yf(d,this.xa),Yf(this,d),d=a):d=this;return d}d=this.u.Qa(this.a[d],a)?d+1:d;a=this.h[d].Ab(a,b,c);P(a)||1!=a.a.length||(this.a.splice(d,0,a.a[0]),a.h[1].C=this,a.h[0].C=this,this.h.splice(d,1,a.h[1]),this.h.splice(d,0,a.h[0]));return 512==this.a.length?gg(this):this};
function gg(a){var b=Rf(a.u),c=Rf(a.u);b.C=a.C;b.mb=a.mb+1;b.a=[a.a[256]];b.h=[a,c];a.a.splice(256,1);c.C=b;c.mb=a.mb;c.a=a.a.splice(256);c.h=a.h.splice(257);c.h.forEach(function(a){a.C=c});a.C=b;Yf(c,a.xa);Yf(a,c);return b}function ag(a,b){for(var c=0,d=a.a.length,e=a.u.jb();c<d;){var f=c+d>>1;-1==e.compare(a.a[f],b)?c=f+1:d=f}return c}m.Oe=function(a){if(!P(this)){var b=ag(this,a);this.u.Qa(this.a[b],a)&&b++;return this.h[b].Oe(a)}return this};
m.Ne=function(a){if(!P(this)){var b=ag(this,a);this.u.Qa(this.a[b],a)&&(a.some(function(a){return a==F})||b++);return this.h[b].Ne(a)}return this};
m.Va=function(a,b,c){function d(a){return a[0]?a[1]?0:1:-1}var e=this.u.jb(),f=0,h=this.a.length-1,l=this.a,p=d(e.wb(l[f],a)),L=d(e.wb(l[h],a));if(1!=p&&(-1!=p||-1!=L)){var ma=function(a,b){b=a+b>>1;return b==a?b+1:b},ha=function(b,c,f){if(b>=c)return 0==f?c:-1;var h=d(e.wb(l[b],a));if(0==h)return b;if(1==h)return-1;h=ma(b,c);if(h==c)return 0==f?c:-1;var p=d(e.wb(l[h],a));return 0==p?ha(b,h,p):-1==p?ha(h+1,c,f):ha(b+1,h,p)},Db=function(b,c){if(b>=c)return b;var f=d(e.wb(l[c],a));if(0==f)return c;
if(-1==f)return b;f=ma(b,c);if(f==c)return b;var h=d(e.wb(l[f],a));return 0==h?Db(f,c):1==h?Db(b,f-1):-1};0!=p&&(f=ha(f+1,h,L));-1!=f&&(h=Db(f,h),-1!=h&&h>=f&&hg(this,b,c,f,h+1))}};function Qf(a,b,c,d){if(a.u.Ma())!b.reverse&&b.L?b.L--:c[b.count++]=a.D[d];else for(var e=0;e<a.D[d].length&&b.count<c.length;++e)!b.reverse&&b.L?b.L--:c[b.count++]=a.D[d][e]}function hg(a,b,c,d,e){for(;d<e&&(b.reverse||!(b.count>=b.X));++d)Qf(a,b,c,d)}
m.fill=function(a,b){if(P(this))for(var c=0;c<this.D.length&&0<a.count;++c)if(0<a.offset){if(a.offset-=this.u.Ma()?1:this.D[c].length,0>a.offset)for(var d=this.D[c].length+a.offset;d<this.D[c].length&&0<a.count;++d)b[a.se++]=this.D[c][d],a.count--}else if(this.u.Ma())b[a.se++]=this.D[c],a.count--;else for(d=0;d<this.D[c].length&&0<a.count;++d)b[a.se++]=this.D[c][d],a.count--;else for(c=0;c<this.h.length&&0<a.count;++c)this.h[c].fill(a,b)};
function Vf(a,b){var c=b.Y();a=a.map(function(a){var d=new Wf(a.id(),b);d.a=a.m[0];d.D=a.m[1];d.a.forEach(function(a,e){c.add(a,b.Ma()?1:d.D[e].length)});return d});for(var d=0;d<a.length-1;++d)Yf(a[d],a[d+1]);return 1<a.length?$f(a[0]):a[0]}m.jd=function(a){return this.u.jb().jd(this.a[0],a)};function ig(a){this.Wc=0==a?jg:kg;this.be=0==a?function(a){return null!=a?a.reverse():null}:function(a){return a||null};this.he=0==a?lg:mg}function kg(a,b){return a>b?1:a<b?-1:0}function jg(a,b){return kg(b,a)}function mg(a,b){return Hd(a,b)}function lg(a,b){return Hd(b,a)}m=ig.prototype;m.wb=function(a,b){b=this.be(b);var c=[b.from==F,b.o==F];if(!c[0]){var d=this.Wc(a,b.from);c[0]=b.ea?1==d:-1!=d}c[1]||(d=this.Wc(a,b.o),c[1]=b.na?-1==d:1!=d);return c};m.compare=function(a,b){return this.Wc(a,b)};
m.min=function(a,b){return a<b?1:a==b?0:-1};m.max=function(a,b){return a>b?1:a==b?0:-1};m.Bb=function(a,b){a=this.wb(a,b);return a[0]&&a[1]};m.jd=function(a,b){return this.Bb(a,b)};m.tf=function(a){return a.filter(function(a){return null!==a}).sort(function(a,c){return this.he(a,c)}.bind(this))};m.Wd=function(a){return this.be(a).from==F};m.td=function(a){a=this.be(a);return[a.from,a.o]};m.Nd=function(a){return null!==a};m.Yd=k(1);
m.toString=function(){return this.compare==jg?"SimpleComparator_DESC":"SimpleComparator_ASC"};function ng(a){ig.call(this,a);this.Wc=0==a?og:pg}r(ng,ig);function pg(a,b){return null===a?null===b?0:-1:null===b?1:kg(a,b)}function og(a,b){return pg(b,a)}ng.prototype.Bb=function(a,b){return null===a?Cd(b):ng.hb.Bb.call(this,a,b)};ng.prototype.Hb=function(a,b){return null===a?null===b?0:-1:null===b?1:null};ng.prototype.min=function(a,b){var c=this.Hb(a,b);null===c&&(c=ng.hb.min.call(this,a,b));return c};
ng.prototype.max=function(a,b){var c=this.Hb(a,b);null===c&&(c=ng.hb.max.call(this,a,b));return c};function qg(a){this.pa=a.map(function(a){return new ig(a)})}function rg(a,b,c,d){for(var e=0,f=0;f<a.pa.length&&0==e;++f)e=d(a.pa[f],b[f],c[f]);return e}m=qg.prototype;m.compare=function(a,b){return rg(this,a,b,function(a,b,e){return b==F||e==F?0:a.compare(b,e)})};m.min=function(a,b){return rg(this,a,b,function(a,b,e){return a.min(b,e)})};m.max=function(a,b){return rg(this,a,b,function(a,b,e){return a.max(b,e)})};
m.wb=function(a,b){for(var c=[!0,!0],d=0;d<this.pa.length&&(c[0]||c[1]);++d){var e=this.pa[d].wb(a[d],b[d]);c[0]=c[0]&&e[0];c[1]=c[1]&&e[1]}return c};m.Bb=function(a,b){for(var c=!0,d=0;d<this.pa.length&&c;++d)c=this.pa[d].Bb(a[d],b[d]);return c};m.jd=function(a,b){return this.pa[0].Bb(a[0],b[0])};
m.tf=function(a){var b=a.filter(function(a){return a.every(ia)});a=Array(this.pa.length);for(var c=0;c<a.length;c++)a[c]=b.map(function(a){return a[c]});a.forEach(function(a,b){a.sort(function(a,c){return this.pa[b].he(a,c)}.bind(this))},this);b=Array(b.length);for(c=0;c<b.length;c++)b[c]=a.map(function(a){return a[c]});return b.sort(function(a,b){for(var c=0,d=0;d<this.pa.length&&0==c;++d)c=this.pa[d].he(a[d],b[d]);return c}.bind(this))};m.Wd=function(a){return this.pa[0].Wd(a[0])};
m.td=function(a){var b=a.map(function(a,b){return this.pa[b].td(a)[0]},this);a=a.map(function(a,b){return this.pa[b].td(a)[1]},this);return[b,a]};m.Nd=function(a){return a.every(function(a,c){return this.pa[c].Nd(a)},this)};m.Yd=function(){return this.pa.length};function sg(a){qg.call(this,a);this.pa=a.map(function(a){return new ng(a)})}r(sg,qg);function tg(a){if(1==a.f.length)return new ig(a.f[0].order);var b=a.f.map(function(a){return a.order});return a.f.some(function(a){return a.ba.gc()})?new sg(b):new qg(b)};function ug(a){this.fa=a;this.ob=B();this.Nc=new Lf;this.za=new Lf}m=ug.prototype;m.getName=function(){return this.fa.getName()};m.add=function(a,b){null===a?(this.ob.add(b),this.Nc.add(a,1)):this.fa.add(a,b)};m.set=function(a,b){null===a?(this.ob.clear(),this.Nc.clear(),this.add(a,b)):this.fa.set(a,b)};m.remove=function(a,b){null===a?b?(this.ob.delete(b),this.Nc.remove(a,1)):(this.ob.clear(),this.Nc.clear()):this.fa.remove(a,b)};m.get=function(a){return null===a?C(this.ob):this.fa.get(a)};m.Yc=function(a){return this.fa.Yc(a)};
m.Y=function(){Mf(this.za,[this.fa.Y(),this.Nc]);return this.za};m.Va=function(a,b,c,d){b=this.fa.Va(a,b,c,d);return null!=a?b:b.concat(C(this.ob))};m.clear=function(){this.ob.clear();this.fa.clear()};m.Pa=function(a){return null===a?0!=this.ob.size:this.fa.Pa(a)};m.min=function(){return this.fa.min()};m.max=function(){return this.fa.max()};m.Ja=function(){return[new jc(-2,C(this.ob))].concat(this.fa.Ja())};m.jb=function(){return this.fa.jb()};
function vg(a,b){for(var c=-1,d=0;d<b.length;++d)if(-2==b[d].id()){c=d;break}if(-1==c)throw new D(102);d=b[c].m;b=b.slice(0);b.splice(c,1);a=a(b);var e=new ug(a);d.forEach(function(a){e.ob.add(a)});return e}m.Ma=function(){return this.fa.Ma()};function wg(a){this.A=a;this.sb=B();this.$=new ig(1)}m=wg.prototype;m.getName=g("A");m.add=function(a){if("number"!=typeof a)throw new D(103);this.sb.add(a)};m.set=function(a,b){this.add(a,b)};m.remove=function(a){this.sb.delete(a)};m.get=function(a){return this.Pa(a)?[a]:[]};m.min=function(){return this.Hb(this.$.min.bind(this.$))};m.max=function(){return this.Hb(this.$.max.bind(this.$))};
m.Hb=function(a){if(0==this.sb.size)return null;var b=C(this.sb).reduce(function(b,d){return null===b||1==a(d,b)?d:b},null);return[b,[b]]};m.Yc=function(){return this.sb.size};m.Va=function(a,b,c,d){var e=a||[Fd()];a=C(this.sb).filter(function(a){return e.some(function(b){return this.$.Bb(a,b)},this)},this);return Kf(a,b,c,d)};m.clear=function(){this.sb.clear()};m.Pa=function(a){return this.sb.has(a)};m.Ja=function(){return[new jc(0,C(this.sb))]};m.jb=g("$");
function xg(a,b){var c=new wg(a);b[0].m.forEach(function(a){c.add(a,a)});return c}m.Ma=k(!0);m.Y=function(){var a=new Lf;a.ia=this.sb.size;return a};function yg(a){this.Oa=a.b(xc);this.B=a.b(zc);this.V=a.b(yc)}yg.prototype.Ea=function(a){var b=a.oa(),c=function(){if(0==b.length)return v();var a=b.shift();return(a.Cb()?zg(this,a):Ag(this,a)).then(c)}.bind(this);return c()};function Ag(a,b){var c=a.Oa.Fb(0,[b]);a=c.I(b.getName(),b.kb.bind(b),0).get([]).then(function(a){this.V.Wb(b.getName(),a);Bg(this,b,a)}.bind(a));c.ka();return a}
function Bg(a,b,c){var d=a.B.kc.get(b.getName())||[];c.forEach(function(a){d.forEach(function(b){var c=a.nb(b.getName());b.add(c,a.id())})})}function zg(a,b){var c=a.Oa.Fb(0,[b]),d=c.I(b.getName(),b.kb,0).get([]).then(function(a){this.V.Wb(b.getName(),a)}.bind(a));a=b.Da().map(function(a){return Cg(this,a,c)},a).concat(Dg(a,b,c));c.ka();return gb(a.concat(d))}
function Cg(a,b,c){c=c.I(b.j(),lc,1);var d=tg(b);return c.get([]).then(function(a){if(0<a.length){if(Eg(b)){var c=Uf.bind(void 0,d,b.j(),b.Cc);a=vg(c,a)}else a=Uf(d,b.j(),b.Cc,a);this.B.set(b.lc,a)}}.bind(a))}function Dg(a,b,c){return c.I(pf(b),lc,1).get([]).then(function(a){0<a.length&&(a=xg(pf(b),a),this.B.set(b.getName(),a))}.bind(a))};function Fg(){this.Z=y();this.kc=y()}Fg.prototype.Ea=function(a){a.oa().forEach(function(a){var b=[];this.kc.set(a.getName(),b);var d=pf(a);if(null===this.get(d)){var e=new wg(d);b.push(e);this.Z.set(d,e)}a.Da().forEach(function(a){var c=tg(a);c=new Nf(a.j(),c,a.Cc);c=Eg(a)&&1==a.f.length?new ug(c):c;b.push(c);this.Z.set(a.j(),c)},this)},this);return v()};Fg.prototype.get=function(a){return this.Z.get(a)||null};
Fg.prototype.set=function(a,b){var c=this.kc.get(a)||null;null===c&&(c=[],this.kc.set(a,c));a=null;for(var d=0;d<c.length;d++)if(c[d].getName()==b.getName()){a=d;break}null!==a&&0<c.length?c.splice(a,1,b):c.push(b);this.Z.set(b.getName(),b)};function Gg(a,b){var c=[],d=null,e=null;oe(a,function(a){var f=b(a);null==a.getParent()?e=f:K(d,f);var l=a.getParent();null!==l&&J(l).length==J(d).length&&(l=c.indexOf(d),-1!=l&&c.splice(l,1));1<J(a).length&&c.push(f);d=null===a.h?c[c.length-1]:f});return e}function Hg(a){return Ig(a,function(a){return null===a.h})}
function Jg(a){var b=a.getParent(),c=0;null!==b&&(c=J(b).indexOf(a),b.removeChild(a));var d=J(a).slice();d.forEach(function(d,f){a.removeChild(d);null===b||le(b,d,c+f)});return{parent:b,children:d}}function Kg(a,b){J(a).slice().forEach(function(c){a.removeChild(c);K(b,c)});K(a,b)}function Lg(a){var b=ke(a,0);Jg(a);Kg(b,a);return b}
function Mg(a,b,c){var d=ke(a,0),e=J(d).slice();if(!e.some(function(a){return b(a)}))return a;Jg(a);e.forEach(function(e,h){if(b(e)){var f=c(a);me(d,h);K(f,e);le(d,f,h)}});return d}function Ng(a,b,c,d){var e=a.getParent();null!==e&&(a=J(e).indexOf(a),me(e,a),le(e,c,a));J(b).slice().forEach(function(a){b.removeChild(a);K(d,a)});return c}function Ig(a,b,c){function d(a){b(a)&&e.push(a);null!=c&&c(a)||J(a).forEach(d)}var e=[];d(a);return e}
function Og(a,b){var c=b||function(a){return a.toString()+"\n"},d="";oe(a,function(a){for(var b=0;b<je(a);b++)d+="-";d+=c(a)});return d};function Pg(a){qe.call(this);this.pb=a;this.Wa=!1}r(Pg,qe);m=Pg.prototype;m.Nb=function(){return Gg(this,function(a){if(a instanceof Pg){var b=new Pg(a.pb);b.Wa=a.Wa;a=a.W();b.sa=a;return b}return a.Nb()})};m.lb=function(a){var b=a||[];oe(this,function(a){a!=this&&a.lb(b)}.bind(this));a=B(b);return C(a)};m.s=function(a){var b=null!=a?a:B();oe(this,function(a){a!=this&&a.s(b)}.bind(this));return b};m.ud=function(a){this.Wa!=a&&(this.Wa=a,this.pb="and"==this.pb?"or":"and",J(this).forEach(function(b){return b.ud(a)}))};
m.eval=function(a){var b=J(this).map(function(b){return b.eval(a)});return Qg(this,b)};function Qg(a,b){return"and"==a.pb?Qd(b):Rd(b)}m.toString=function(){return"combined_pred_"+this.pb.toString()};m.ve=function(){if("or"==this.pb){var a=new Jd;J(this).forEach(function(b){b=b.ve().qa();a.add(b)});return a}return new Jd};m.kd=function(){return"or"==this.pb?Rg(this):!1};
function Rg(a){var b=null;return J(a).every(function(a){if(!(a instanceof se&&a.kd()))return!1;null===b&&(b=a.J);return b.j()==a.J.j()})};function Sg(a,b,c){qe.call(this);this.ga=a;this.ma=b;this.F=c;this.ce=null;a=ge();this.uc=he(a,this.ga.G(),this.F);this.mg=a.Ye.get(this.ga.G())||null}r(Sg,qe);m=Sg.prototype;m.Nb=function(){var a=new Sg(this.ga,this.ma,this.F),b=this.W();a.sa=b;return a};m.lb=function(a){return null!=a?(a.push(this.ga),a.push(this.ma),a):[this.ga,this.ma]};m.s=function(a){a=null!=a?a:B();a.add(this.ga.I());a.add(this.ma.I());return a};
m.reverse=function(){var a=this.F;switch(this.F){case "gt":a="lt";break;case "lt":a="gt";break;case "gte":a="lte";break;case "lte":a="gte"}return new Sg(this.ma,this.ga,a)};m.eval=function(a){var b=a.entries.filter(function(a){var b=H(a,this.ga);a=H(a,this.ma);return this.uc(b,a)},this);return new G(b,a.s())};m.toString=function(){return"join_pred("+this.ga.j()+" "+this.F+" "+this.ma.j()+")"};
function Tg(a,b,c){if(-1!=b.s().indexOf(Vd(a.ga.I()))){var d=b;b=c}else d=c;if(d.entries.length>b.entries.length){a:{c=a.ga;a.ga=a.ma;a.ma=c;switch(a.F){case "gt":c="lt";break;case "lt":c="gt";break;case "gte":c="lte";break;case "lte":c="gte";break;default:break a}a.F=c;a.uc=he(ge(),a.ga.G(),a.F)}return[b,d]}return[d,b]}function Ug(a){var b={};a.lb().forEach(function(a){b[a.getName()]=null});return b}
function Vg(a,b,c){null===a.ce&&(a.ce=Ug(a.ma.I()));var d=new Td(new jc(-1,a.ce),!1);return Xd(b,c,d,[Vd(a.ma.I())])}
function Wg(a,b,c,d){var e=[b,c];d||(e=Tg(a,b,c));b=e[0];c=e[1];e=b;var f=c,h=a.ga,l=a.ma;d&&(e=c,f=b,h=a.ma,l=a.ga);var p=new ed,L=[];e.entries.forEach(function(a){var b=String(H(a,h));p.set(b,a)});var ma=e.s(),ha=f.s();f.entries.forEach(function(a){var b=H(a,l),c=String(b);null!==b&&p.has(c)?p.get(c).forEach(function(b){b=Xd(a,ha,b,ma);L.push(b)}):d&&L.push(Vg(this,a,ha))}.bind(a));a=b.s().concat(c.s());return new G(L,a)}
function Xg(a,b,c,d,e){function f(a,b){b=new Td(b,1<ma.length);a=Xd(a,ha,b,ma);L.push(a)}var h=d.cg.I(),l=b,p=c;-1!=b.s().indexOf(Vd(h))&&(l=c,p=b);var L=[],ma=p.s(),ha=l.s();l.entries.forEach(function(a){var b=this.mg(H(a,d.vg));b=d.index.get(b);0!=b.length&&(d.index.Ma()?f(a,e.get(b[0])):Gf(e,b).forEach(f.bind(null,a)))},a);a=l.s().concat(p.s());return new G(L,a)};function Yg(a,b,c){return null===b?new se(a,b,c):n(b.j)?new Sg(a,b,c):new se(a,b,c)};var Zg={};q("lf.schema.DataStoreType",Zg);Zg.INDEXED_DB=0;Zg.MEMORY=1;Zg.LOCAL_STORAGE=2;Zg.FIREBASE=3;Zg.WEB_SQL=4;Zg.OBSERVABLE_STORE=5;function $g(a,b,c,d){this.lc=a;this.name=b;this.Cc=c;this.f=d}$g.prototype.j=function(){return this.lc+"."+this.name};function Eg(a){return a.f.some(function(a){return a.ba.gc()})}function Q(a,b,c,d){this.A=a;this.ta=c;this.K=b;this.qd=d;this.Ka=null}q("lf.schema.Table",Q);Q.prototype.getName=g("A");Q.prototype.getName=Q.prototype.getName;
function Vd(a){return a.Ka||a.A}Q.prototype.as=function(a){var b=new this.constructor(this.A);b.Ka=a;b.Hg=this.Hg;return b};Q.prototype.as=Q.prototype.as;Q.prototype.createRow=Q.prototype.xb;Q.prototype.deserializeRow=Q.prototype.kb;Q.prototype.Da=g("ta");Q.prototype.getIndices=Q.prototype.Da;Q.prototype.lb=g("K");Q.prototype.getColumns=Q.prototype.lb;Q.prototype.getConstraint=Q.prototype.Me;Q.prototype.Cb=g("qd");Q.prototype.persistentIndex=Q.prototype.Cb;function pf(a){return a.A+".#"};function R(a,b){this.child=a;this.Lb=b;this.Ka=null}m=R.prototype;m.getName=function(){return this.Lb+"("+this.child.getName()+")"};m.j=function(){return this.Lb+"("+this.child.j()+")"};m.I=function(){return this.child.I()};m.toString=function(){return this.j()};m.G=function(){return this.child.G()};m.Da=function(){return[]};m.Ca=k(null);m.gc=k(!1);m.as=function(a){this.Ka=a;return this};R.prototype.as=R.prototype.as;
function ah(a){for(var b=[a];a instanceof R;)b.push(a.child),a=a.child;return b}function bh(){this.Ka=null;this.U=new Q("#UnknownTable",[],[],!1)}m=bh.prototype;m.getName=k("*");m.j=function(){return this.getName()};m.toString=function(){return this.j()};m.I=g("U");m.G=k(4);m.Da=function(){return[]};m.Ca=k(null);m.gc=k(!1);q("lf.fn.avg",function(a){return new R(a,"AVG")});function ch(a){return new R(a||new bh,"COUNT")}q("lf.fn.count",ch);function dh(a){return new R(a,"DISTINCT")}q("lf.fn.distinct",dh);q("lf.fn.max",function(a){return new R(a,"MAX")});q("lf.fn.min",function(a){return new R(a,"MIN")});q("lf.fn.stddev",function(a){return new R(a,"STDDEV")});q("lf.fn.sum",function(a){return new R(a,"SUM")});q("lf.fn.geomean",function(a){return new R(a,"GEOMEAN")});function S(a,b){I.call(this);this.Tf=b}r(S,I);S.prototype.exec=function(a,b){switch(this.Tf){case 1:return eh(this,a,b);case 0:return fh(this,a,b);default:return gh(this,a,b)}};S.prototype.toString=k("dummy_node");S.prototype.Oc=function(){return this.toString()};function gh(a,b,c){return new u(function(a){a(this.ca([],b,c))}.bind(a))}function eh(a,b,c){return ke(a,0).exec(b,c).then(function(a){return this.ca(a,b,c)}.bind(a))}
function fh(a,b,c){var d=J(a).map(function(a){return a.exec(b,c)});return gb(d).then(function(a){var d=[];a.forEach(function(a){for(var b=0;b<a.length;++b)d.push(a[b])});return this.ca(d,b,c)}.bind(a))};function hh(a){S.call(this,-1,1);this.Be=a}r(hh,S);hh.prototype.toString=function(){return"aggregation("+this.Be.map(function(a){return a.j()}).toString()+")"};hh.prototype.ca=function(a){a.forEach(function(a){ih(new jh(a,this.Be))},this);return a};function jh(a,b){this.Na=a;this.K=b}
function ih(a){a.K.forEach(function(a){a=ah(a).reverse();for(var b=1;b<a.length;b++){var d=a[b],e=ah(d).slice(-1)[0],f=d.child instanceof R?Nd(this.Na,d.child):this.Na;if(null!==f.$a&&f.$a.has(d.j()))break;f=kh(d.Lb,f,e);e=this.Na;null===e.$a&&(e.$a=y());e.$a.set(d.j(),f)}},a)}
function kh(a,b,c){var d=null;switch(a){case "MIN":d=lh(b,c,function(a,b){return b<a?b:a});break;case "MAX":d=lh(b,c,function(a,b){return b>a?b:a});break;case "DISTINCT":d=mh(b,c);break;case "COUNT":d=nh(b,c);break;case "SUM":d=oh(b,c);break;case "AVG":a=nh(b,c);0<a&&(d=oh(b,c)/a);break;case "GEOMEAN":d=ph(b,c);break;default:d=qh(b,c)}return d}function lh(a,b,c){return a.entries.reduce(function(a,e){e=H(e,b);return null===e?a:null===a?e:c(a,e)},null)}
function nh(a,b){return b instanceof bh?a.entries.length:a.entries.reduce(function(a,d){return a+(null===H(d,b)?0:1)},0)}function oh(a,b){return lh(a,b,function(a,b){return b+a})}function qh(a,b){var c=[];a.entries.forEach(function(a){a=H(a,b);null===a||c.push(a)});return 0==c.length?null:vb.apply(null,c)}function ph(a,b){var c=0;a=a.entries.reduce(function(a,e){e=H(e,b);if(0==e||null===e)return a;c++;return a+Math.log(e)},0);return 0==c?null:Math.pow(Math.E,a/c)}
function mh(a,b){var c=y();a.entries.forEach(function(a){var d=H(a,b);c.set(d,a)});return new G(z(c),a.s())};function rh(a,b){this.Ha=a;this.aa=b}rh.prototype.bb=g("Ha");rh.prototype.da=g("aa");function sh(){I.call(this)}r(sh,I);function th(a,b){I.call(this);this.table=a;this.values=b}r(th,sh);function uh(a,b){th.call(this,a,b)}r(uh,th);function vh(a){I.call(this);this.table=a}r(vh,sh);vh.prototype.toString=function(){return"delete("+this.table.getName()+")"};function wh(a){I.call(this);this.table=a}r(wh,sh);wh.prototype.toString=function(){return"update("+this.table.getName()+")"};
function xh(a){I.call(this);this.O=a}r(xh,sh);xh.prototype.toString=function(){return"select("+this.O.toString()+")"};function yh(a){I.call(this);this.table=a}r(yh,sh);yh.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ka||(a+=" as "+this.table.Ka);return a+")"};function zh(){I.call(this)}r(zh,sh);zh.prototype.toString=k("cross_product");function Ah(a,b){I.call(this);this.f=a;this.Pb=b}r(Ah,sh);
Ah.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Pb){var b=this.Pb.map(function(a){return a.j()}).join(", ");a+=", groupBy("+b+")"}return a+")"};function Bh(a){I.call(this);this.N=a}r(Bh,sh);Bh.prototype.toString=function(){return"order_by("+Ce(this.N)+")"};function Ch(a){I.call(this);this.f=a}r(Ch,sh);Ch.prototype.toString=function(){return"aggregation("+this.f.toString()+")"};function Dh(a){I.call(this);this.f=a}r(Dh,sh);
Dh.prototype.toString=function(){return"group_by("+this.f.toString()+")"};function Eh(a){I.call(this);this.X=a}r(Eh,sh);Eh.prototype.toString=function(){return"limit("+this.X+")"};function Fh(a){I.call(this);this.L=a}r(Fh,sh);Fh.prototype.toString=function(){return"skip("+this.L+")"};function Gh(a,b){I.call(this);this.O=a;this.Rb=b}r(Gh,sh);Gh.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", "+this.O.toString()+")"};function Hh(){};function Ih(){}r(Ih,Hh);Ih.prototype.gb=function(a){this.H=a;this.ub(this.H);return this.H};Ih.prototype.ub=function(a){if(a instanceof xh){var b=Jh(this,a.O);b=Kh(this,b);Ng(a,a,b[0],b[1]);a==this.H&&(this.H=b[0]);a=b[0]}J(a).forEach(function(a){this.ub(a)},this)};function Jh(a,b){if(0==J(b).length||"and"!=b.pb)return[b];a=J(b).slice().map(function(a){b.removeChild(a);return Jh(this,a)},a);return Ba(a)}
function Kh(a,b){var c=null,d=null;b.map(function(a,b){a=new xh(a);0==b?c=a:K(d,a);d=a},a);return[c,d]};function Lh(){}r(Lh,Hh);Lh.prototype.gb=function(a,b){if(3>b.from.length)return a;this.H=a;this.ub(this.H);return this.H};Lh.prototype.ub=function(a){if(a instanceof zh)for(;2<J(a).length;){for(var b=new zh,c=0;2>c;c++){var d=me(a,0);K(b,d)}le(a,b,0)}J(a).forEach(function(a){this.ub(a)},this)};function Mh(){S.call(this,2,0)}r(Mh,S);Mh.prototype.toString=k("cross_product");Mh.prototype.ca=function(a){var b=a[0],c=a[1];a=[];for(var d=b.s(),e=c.s(),f=0;f<b.entries.length;f++)for(var h=0;h<c.entries.length;h++){var l=Xd(b.entries[f],d,c.entries[h],e);a.push(l)}b=b.s().concat(c.s());return[new G(a,b)]};function Nh(a,b){Fe.call(this,a,b);this.Ia=a.b(Bc);this.Ib=a.b(Cc)}r(Nh,Fe);Nh.prototype.getPriority=k(2);Nh.prototype.fe=function(a){0==this.G()?Oh(this,a):this.Lc()};function Oh(a,b){a.sd.forEach(function(a,d){a instanceof Be&&Ie(this.Ib,a,b[d])},a)}Nh.prototype.Lc=function(){var a=Ke(this.Ib,this.da());0!=a.length&&(a=new He(this.global,a),Le(this.Ia,a))};function Ph(a){we.call(this,a)}r(Ph,we);Ph.prototype.da=function(){var a=B();a.add(this.from);Qh(this,this.from.getName(),a);return a};function Qh(a,b,c){var d=Rh(a.ba.info(),b,1);Rh(a.ba.info(),b).forEach(c.add.bind(c));d.forEach(function(a){Qh(this,a.getName(),c)},a)}Ph.prototype.clone=function(){var a=new Ph(this.ba);ze(a,this);a.from=this.from;return a};Ph.prototype.bind=function(a){Ph.hb.bind.call(this,a);Ae(this,a);return this};function Sh(a){we.call(this,a)}r(Sh,we);Sh.prototype.da=function(){var a=B();a.add(this.La);var b=this.ba.info();Th(this.La.getName(),b.ff).forEach(a.add.bind(a));this.$b&&Rh(b,this.La.getName()).forEach(a.add.bind(a));return a};Sh.prototype.clone=function(){var a=new Sh(this.ba);ze(a,this);a.La=this.La;this.values&&(a.values=this.values instanceof Yd?this.values:this.values.slice());a.$b=this.$b;a.ac=this.ac;return a};
Sh.prototype.bind=function(a){Sh.hb.bind.call(this,a);this.ac&&(this.values=this.ac instanceof Yd?a[this.ac.Ca()]:this.ac.map(function(b){return b instanceof Yd?a[b.Ca()]:b}));return this};function Uh(a){we.call(this,a)}r(Uh,we);Uh.prototype.da=function(){var a=B();a.add(this.table);var b=this.set.map(function(a){return a.J.j()}),c=this.ba.info();Vh(c,b).forEach(a.add.bind(a));Wh(c,b).forEach(a.add.bind(a));return a};Uh.prototype.clone=function(){var a=new Uh(this.ba);ze(a,this);a.table=this.table;a.set=this.set?Xh(this.set):this.set;return a};Uh.prototype.bind=function(a){Uh.hb.bind.call(this,a);this.set.forEach(function(b){-1!=b.Sc&&(b.value=a[b.Sc])});Ae(this,a);return this};
function Xh(a){return a.map(function(a){var b={},d;for(d in a)b[d]=a[d];return b})};function Yh(a,b){if(null==b)return"NULL";switch(a){case 1:return b?1:0;case 3:case 4:return b;case 0:return"'"+nc(b)+"'";default:return"'"+b.toString()+"'"}}function Zh(a,b){var c=a.$b?"INSERT OR REPLACE":"INSERT",d=a.La.lb();c+=" INTO "+a.La.getName()+"(";c+=d.map(function(a){return a.getName()}).join(", ");c+=") VALUES (";return a.values.map(function(a){var e=d.map(function(c){var d=a.m[c.getName()];return b?null!=d?"#":"NULL":Yh(c.G(),d)});return c+e.join(", ")+");"}).join("\n")}
function $h(a){switch(a){case "between":return"BETWEEN";case "eq":return"=";case "gte":return">=";case "gt":return">";case "in":return"IN";case "lte":return"<=";case "lt":return"<";case "match":return"LIKE";case "neq":return"<>";default:return"UNKNOWN"}}function ai(a,b,c,d){return a instanceof Yd?"?"+a.Ca().toString():d?null!=a?"#":"NULL":"match"==b?"'"+a.toString()+"'":"in"==b?"("+a.map(function(a){return Yh(c,a)}).join(", ")+")":"between"==b?Yh(c,a[0])+" AND "+Yh(c,a[1]):Yh(c,a).toString()}
function bi(a,b){return J(a).map(function(a){return"("+ci(a,b)+")"}).join("and"==a.pb?" AND ":" OR ")}function di(a){return[a.ga.j(),$h(a.F),a.ma.j()].join(" ")}function ci(a,b){if(a instanceof se){var c=a.J.j(),d=$h(a.F);a=ai(a.value,a.F,a.J.G(),b);return"="==d&&"NULL"==a?[c,"IS NULL"].join(" "):"<>"==d&&"NULL"==a?[c,"IS NOT NULL"].join(" "):[c,d,a].join(" ")}if(a instanceof Pg)return bi(a,b);if(a instanceof Sg)return di(a);throw new D(357,typeof a);}
function ei(a,b){return(a=ci(a,b))?" WHERE "+a:""}function fi(a,b){var c="UPDATE "+a.table.getName()+" SET ";c+=a.set.map(function(a){var b=a.J.j()+" = ";return-1!=a.Sc?b+"?"+a.Sc.toString():b+Yh(a.J.G(),a.value).toString()}).join(", ");a.w&&(c+=ei(a.w,b));return c+";"}
function gi(a,b){var c="*";a.f.length&&(c=a.f.map(function(a){return a.Ka?a.j()+" AS "+a.Ka:a.j()}).join(", "));c="SELECT "+c+" FROM ";null!=a.eb&&0!=a.eb.size?c+=hi(a,b):(c+=a.from.map(ii).join(", "),a.w&&(c+=ei(a.w,b)));a.N&&(b=a.N.map(function(a){return a.J.j()+(0==a.order?" DESC":" ASC")}).join(", "),c+=" ORDER BY "+b);a.ra&&(b=a.ra.map(function(a){return a.j()}).join(", "),c+=" GROUP BY "+b);a.X&&(c+=" LIMIT "+a.X.toString());a.L&&(c+=" SKIP "+a.L.toString());return c+";"}
function ii(a){return Vd(a)!=a.getName()?a.getName()+" AS "+Vd(a):a.getName()}function hi(a,b){for(var c=Ig(a.w,function(a){return a instanceof Sg}),d=c.map(di),e=ii(a.from[0]),f=1;f<a.from.length;f++){var h=ii(a.from[f]);e=a.eb.has(c[d.length-f].W())?e+(" LEFT OUTER JOIN "+h):e+(" INNER JOIN "+h);e+=" ON ("+d[d.length-f]+")"}a=a.w;a=0<J(a).length?ke(a,0):a;a instanceof Sg||(e+=" WHERE "+ci(a,b));return e}
function ji(a,b){b=b||!1;a=a.query.clone();if(a instanceof Sh)return Zh(a,b);if(a instanceof Ph){var c="DELETE FROM "+a.from.getName();a.w&&(c+=ei(a.w,b));return c+";"}if(a instanceof Uh)return fi(a,b);if(a instanceof Be)return gi(a,b);throw new D(358,typeof a);};function T(a,b){this.global=a;this.Gg=a.b(Ac);this.Ia=a.b(Bc);this.query=b}q("lf.query.BaseBuilder",T);T.prototype.exec=function(){try{this.ab()}catch(a){return db(a)}return new u(function(a,b){var c=new Nh(this.global,[this.Ac()]);Le(this.Ia,c).then(function(b){a(Ld(b[0]))},b)},this)};T.prototype.exec=T.prototype.exec;T.prototype.Vf=function(){var a=function(a){return a.Oc(this.query)+"\n"}.bind(this);return Og(ki(this).bb(),a)};T.prototype.explain=T.prototype.Vf;
T.prototype.bind=function(a){this.query.bind(a);return this};T.prototype.bind=T.prototype.bind;T.prototype.Og=function(a){return ji(this,a)};T.prototype.toSql=T.prototype.Og;T.prototype.ab=aa();function ki(a){if(null==a.gf){var b=a.Gg;var c=a.query,d=b.pg.create(c);b=b.Dg.create(d,c);a.gf=b}return a.gf}T.prototype.Ac=function(){return{context:this.query.clone(),ie:ki(this)}};function li(a){T.call(this,a,new Ph(a.b(Dc)))}r(li,T);q("lf.query.DeleteBuilder",li);li.prototype.from=function(a){if(null!=this.query.from)throw new D(515);this.query.from=a;return this};li.prototype.from=li.prototype.from;li.prototype.w=function(a){this.Ed();this.query.w=a;return this};li.prototype.where=li.prototype.w;li.prototype.Ed=function(){if(null==this.query.from)throw new D(548);if(null!=this.query.w)throw new D(516);};
li.prototype.ab=function(){li.hb.ab.call(this);if(null==this.query.from)throw new D(517);};function mi(a,b){T.call(this,a,new Sh(a.b(Dc)));this.query.$b=b||!1}r(mi,T);q("lf.query.InsertBuilder",mi);mi.prototype.ab=function(){mi.hb.ab.call(this);var a=this.query;if(null==a.La||null==a.values)throw new D(518);if(a.$b&&null===a.La.Mb.rd)throw new D(519);};mi.prototype.La=function(a){if(null!=this.query.La)throw new D(520);this.query.La=a;return this};mi.prototype.into=mi.prototype.La;
mi.prototype.values=function(a){if(null!=this.query.values)throw new D(521);a instanceof Yd||a.some(function(a){return a instanceof Yd})?this.query.ac=a:this.query.values=a;return this};mi.prototype.values=mi.prototype.values;function ni(a){return oi("and",Array.prototype.slice.call(arguments))}q("lf.op.and",ni);q("lf.op.or",function(a){return oi("or",Array.prototype.slice.call(arguments))});function oi(a,b){var c=new Pg(a);b.forEach(function(a){K(c,a)});return c}q("lf.op.not",function(a){a.ud(!0);return a});function U(a,b){T.call(this,a,new Be(a.b(Dc)));this.Le=this.zd=!1;this.query.f=b;pi(this);qi(this)}r(U,T);q("lf.query.SelectBuilder",U);U.prototype.ab=function(){U.hb.ab.call(this);var a=this.query;if(null==a.from)throw new D(522);if(n(a.Sb)&&!n(a.X)||n(a.Zb)&&!n(a.L))throw new D(523);null!=this.query.ra?ri(this):si(this)};function pi(a){var b=a.query.f.filter(function(a){return a instanceof R&&"DISTINCT"==a.Lb},a);if(0!=b.length&&(1!=b.length||1!=a.query.f.length))throw new D(524);}
function ri(a){if(a.query.ra.some(function(a){a=a.G();return 6==a||0==a}))throw new D(525);}function si(a){var b=a.query.f.some(function(a){return a instanceof R},a);a=a.query.f.some(function(a){return!(a instanceof R)},a)||0==a.query.f.length;if(b&&a)throw new D(526);}function qi(a){a.query.f.forEach(function(a){if(a instanceof R&&!ti(a.Lb,a.G()))throw new D(527,a.j());},a)}function ui(a,b){if(null==a.query.from)throw new D(b);}
U.prototype.from=function(a){if(this.Le)throw new D(515);this.Le=!0;null==this.query.from&&(this.query.from=[]);this.query.from.push.apply(this.query.from,Array.prototype.slice.call(arguments));return this};U.prototype.from=U.prototype.from;U.prototype.w=function(a){ui(this,548);if(this.zd)throw new D(516);this.zd=!0;vi(this,a);return this};U.prototype.where=U.prototype.w;function vi(a,b){null!=a.query.w&&(b=ni(b,a.query.w));a.query.w=b}
U.prototype.gg=function(a,b){ui(this,542);if(this.zd)throw new D(547);this.query.from.push(a);vi(this,b);return this};U.prototype.innerJoin=U.prototype.gg;U.prototype.ng=function(a,b){ui(this,542);if(!(b instanceof Sg))throw new D(541);if(this.zd)throw new D(547);this.query.from.push(a);null==this.query.eb&&(this.query.eb=B());var c=b;Vd(a)!=Vd(b.ma.I())&&(c=b.reverse());this.query.eb.add(c.W());vi(this,c);return this};U.prototype.leftOuterJoin=U.prototype.ng;
U.prototype.X=function(a){if(null!=(this.query.X||this.query.Sb))throw new D(528);if(a instanceof Yd)this.query.Sb=a;else{if(0>a)throw new D(531);this.query.X=a}return this};U.prototype.limit=U.prototype.X;U.prototype.L=function(a){if(null!=(this.query.L||this.query.Zb))throw new D(529);if(a instanceof Yd)this.query.Zb=a;else{if(0>a)throw new D(531);this.query.L=a}return this};U.prototype.skip=U.prototype.L;
U.prototype.N=function(a,b){ui(this,549);null==this.query.N&&(this.query.N=[]);this.query.N.push({J:a,order:null!=b?b:1});return this};U.prototype.orderBy=U.prototype.N;U.prototype.ra=function(a){ui(this,549);if(null!=this.query.ra)throw new D(530);null==this.query.ra&&(this.query.ra=[]);this.query.ra.push.apply(this.query.ra,Array.prototype.slice.call(arguments));return this};U.prototype.groupBy=U.prototype.ra;
function ti(a,b){switch(a){case "COUNT":case "DISTINCT":return!0;case "AVG":case "GEOMEAN":case "STDDEV":case "SUM":return 4==b||3==b;case "MAX":case "MIN":return 4==b||3==b||5==b||2==b}return!1}U.prototype.clone=function(){var a=new U(this.global,this.query.f);a.query=this.query.clone();a.query.Vc=null;return a};U.prototype.clone=U.prototype.clone;function wi(a,b){T.call(this,a,new Uh(a.b(Dc)));this.query.table=b}r(wi,T);q("lf.query.UpdateBuilder",wi);wi.prototype.set=function(a,b){a={Sc:b instanceof Yd?b.Ca():-1,J:a,value:b};null!=this.query.set?this.query.set.push(a):this.query.set=[a];return this};wi.prototype.set=wi.prototype.set;wi.prototype.w=function(a){this.Ed();this.query.w=a;return this};wi.prototype.where=wi.prototype.w;wi.prototype.Ed=function(){if(null!=this.query.w)throw new D(516);};
wi.prototype.ab=function(){wi.hb.ab.call(this);if(null==this.query.set)throw new D(532);if(this.query.set.some(function(a){return a.value instanceof Yd}))throw new D(501);};function xi(a){this.query=a;this.Ha=null}xi.prototype.fc=function(){null===this.Ha&&(this.Ha=this.$c());return this.Ha};function yi(a){xi.call(this,a)}r(yi,xi);yi.prototype.$c=function(){return this.query.$b?new uh(this.query.La,this.query.values):new th(this.query.La,this.query.values)};function zi(a){xi.call(this,a)}r(zi,xi);zi.prototype.$c=function(){var a=new wh(this.query.table),b=null!=this.query.w?new xh(this.query.w.Nb()):null,c=new yh(this.query.table);null===b?K(a,c):(K(b,c),K(a,b));return a};function Ai(a,b,c){this.Ha=a;this.ke=b;this.Vb=c}Ai.prototype.fc=function(){this.Vb.forEach(function(a){this.Ha=a.gb(this.Ha,this.ke)},this);return this.Ha};function Bi(a,b){xi.call(this,a);this.Vb=b}r(Bi,xi);Bi.prototype.$c=function(){var a=new vh(this.query.from),b=null!=this.query.w?new xh(this.query.w.Nb()):null,c=new yh(this.query.from);null===b?K(a,c):(K(b,c),K(a,b));return(new Ai(a,this.query,this.Vb)).fc()};function Ci(){}r(Ci,Hh);Ci.prototype.gb=function(a,b){if(2>b.from.length)return a;this.H=a;this.ub(this.H,b);return this.H};Ci.prototype.ub=function(a,b){if(a instanceof xh&&a.O instanceof Sg){var c=a.O.W(),d=ke(a,0);d instanceof zh&&(c=null!=b.eb&&b.eb.has(c),c=new Gh(a.O,c),Ng(a,d,c,c),a==this.H&&(this.H=c),a=c)}J(a).forEach(function(a){this.ub(a,b)},this)};function Di(){this.Rc=B()}r(Di,Hh);Di.prototype.gb=function(a,b){if(!n(b.w))return a;this.Rc.clear();this.H=a;this.ub(this.H,b);this.Rc.clear();return this.H};Di.prototype.ub=function(a,b){var c=function(a){J(a).forEach(d)}.bind(this),d=function(a){if(!this.Rc.has(a)){if(a instanceof xh){var e=a.O.s(),h=function(a){return Ei(this,a,e)}.bind(this);h=Fi(this,b,a,h);this.Rc.add(a);h!=a&&(null===h.getParent()&&(this.H=h),d(h))}c(a)}}.bind(this);d(a)};
function Fi(a,b,c,d){var e=c;if(Gi(b,c))e=Lg(c),Fi(a,b,c,d);else if(Hi(c)){var f=[];e=Mg(c,d,function(a){a=new xh(a.O);f.push(a);return a});f.forEach(function(a){Fi(this,b,a,d)},a)}return e}function Ei(a,b,c){var d=B();Hg(b).forEach(function(a){d.add(a.table)},a);b instanceof yh&&d.add(b.table);return Jc(d,c)}function Hi(a){a=ke(a,0);return a instanceof zh||a instanceof Gh}
function Gi(a,b){var c=ke(b,0);if(!(c instanceof xh))return!1;if(null==a.eb)return!0;b=b.O instanceof Sg;a=a.eb.has(c.O.W());return b||!a};function Ii(a,b){xi.call(this,a);this.Vb=b;this.jf=this.bf=this.sf=this.ef=this.Ce=this.Re=this.rf=this.Ie=this.uf=null}r(Ii,xi);
Ii.prototype.$c=function(){Ji(this);2<=this.query.from.length&&(this.Ie=new zh);this.rf=null!=this.query.w?new xh(this.query.w.Nb()):null;this.query.N&&(this.ef=new Bh(this.query.N));null!=this.query.L&&0<this.query.L&&(this.sf=new Fh(this.query.L));null!=this.query.X&&(this.bf=new Eh(this.query.X));null!=this.query.ra&&(this.Re=new Dh(this.query.ra));Ki(this);this.jf=new Ah(this.query.f||[],this.query.ra||null);var a=Li(this);return(new Ai(a,this.query,this.Vb)).fc()};
function Li(a){for(var b=[a.bf,a.sf,a.jf,a.ef,a.Ce,a.Re,a.rf,a.Ie],c=-1,d=null,e=0;e<b.length;e++){var f=b[e];null!==f&&(null===d?d=f:K(b[c],f),c=e)}a.uf.forEach(function(a){K(b[c],a)});return d}function Ji(a){a.uf=a.query.from.map(function(a){return new yh(a)},a)}function Ki(a){var b=a.query.f.filter(function(a){return a instanceof R});null!=a.query.N&&a.query.N.forEach(function(a){a.J instanceof R&&b.push(a.J)});0<b.length&&(a.Ce=new Ch(b))};function Mi(){this.qe=[new Ih,new Lh,new Di,new Ci];this.Od=[new Ih]}Mi.prototype.create=function(a){if(a instanceof Sh)var b=new yi(a);else if(a instanceof Ph)b=new Bi(a,this.Od);else if(a instanceof Be)b=new Ii(a,this.qe);else if(a instanceof Uh)b=new zi(a);else throw new D(513);b=b.fc();return new rh(b,a.da())};function Ni(a){S.call(this,1,1);this.U=a}r(Ni,S);Ni.prototype.toString=function(){return"delete("+this.U.getName()+")"};Ni.prototype.ca=function(a,b){a=a[0].entries.map(function(a){return a.ua});b.remove(this.U,a);return[Pd()]};function Oi(a,b){S.call(this,0,-1);this.table=b;this.B=a.b(zc)}r(Oi,S);Oi.prototype.toString=function(){return"get_row_count("+this.table.getName()+")"};Oi.prototype.ca=function(){var a=this.B.get(pf(this.table)),b=new G([],[this.table.getName()]),c=ch();a=a.Y().ia;null===b.$a&&(b.$a=y());b.$a.set(c.j(),a);return[b]};function Pi(a,b){S.call(this,0,-1);this.V=a.b(yc);this.B=a.b(zc);this.table=b}r(Pi,S);Pi.prototype.toString=function(){var a="table_access("+this.table.getName();null===this.table.Ka||(a+=" as "+this.table.Ka);return a+")"};Pi.prototype.ca=function(){var a=this.B.get(pf(this.table)).Va();return[Sd(Gf(this.V,a),[Vd(this.table)])]};function Qi(a){this.c=a}r(Qi,Hh);Qi.prototype.gb=function(a,b){this.H=a;if(!this.Gd(b))return a;a=Ig(a,function(a){return a instanceof Pi})[0];b=new Oi(this.c,a.table);Ng(a,a,b,b);return this.H};Qi.prototype.Gd=function(a){return 1==a.f.length&&1==a.from.length&&null==a.w&&null==a.X&&null==a.L&&null==a.ra?(a=a.f[0],a instanceof R&&"COUNT"==a.Lb&&a.child instanceof bh):!1};function Ri(a){S.call(this,1,1);this.Qe=a}r(Ri,S);Ri.prototype.toString=function(){return"groupBy("+this.Qe.map(function(a){return a.j()}).toString()+")"};Ri.prototype.ca=function(a){return Si(this,a[0])};function Si(a,b){var c=new ed,d=function(a){return this.Qe.map(function(b){return H(a,b)},this).join(",")}.bind(a);b.entries.forEach(function(a){c.set(d(a),a)},a);return c.keys().map(function(a){return new G(c.get(a),b.s())},a)};function Ti(a,b,c){S.call(this,2,0);this.B=a.b(zc);this.V=a.b(yc);this.O=b;this.Rb=c;this.Cd="eq"==this.O.F?0:2;this.Te=null}r(Ti,S);var Ui=["hash","index_nested_loop","nested_loop"];Ti.prototype.toString=function(){return"join(type: "+(this.Rb?"outer":"inner")+", impl: "+Ui[this.Cd]+", "+this.O.toString()+")"};
Ti.prototype.ca=function(a){switch(this.Cd){case 0:return[Wg(this.O,a[0],a[1],this.Rb)];case 1:return[Xg(this.O,a[0],a[1],this.Te,this.V)];default:var b=this.O,c=a[0];a=a[1];var d=this.Rb,e=[c,a];d||(e=Tg(b,c,a));c=e[0];a=e[1];e=[];for(var f=c.s(),h=a.s(),l=c.entries.length,p=a.entries.length,L=p+256-1>>8,ma=0;ma<L;){for(var ha=0;ha<l;ha++){var Db=!1,eg=H(c.entries[ha],b.ga);if(null!==eg)for(var Wi=Math.min(ma+1<<8,p),Eb=ma<<8;Eb<Wi;Eb++)if(b.uc(eg,H(a.entries[Eb],b.ma))){Db=!0;var Sc=Xd(c.entries[ha],
f,a.entries[Eb],h);e.push(Sc)}d&&!Db&&e.push(Vg(b,c.entries[ha],f))}ma++}b=c.s().concat(a.s());return[new G(e,b)]}};function Vi(a,b){a.Cd=1;var c=a.B.get(b.Ca().j());a.Te={cg:b,vg:b==a.O.ga?a.O.ma:a.O.ga,index:c}};function Xi(a){S.call(this,-1,-1);this.kf=a}r(Xi,S);Xi.prototype.toString=function(){return"no_op_step("+this.kf[0].s().join(",")+")"};Xi.prototype.ca=g("kf");function Yi(){}r(Yi,Hh);Yi.prototype.gb=function(a,b){this.H=a;if(!this.Gd(b))return a;Ig(a,function(a){return a instanceof Ti}).forEach(this.Fg,this);return this.H};Yi.prototype.Gd=function(a){return 1<a.from.length};
Yi.prototype.Fg=function(a){if("eq"==a.O.F&&!a.Rb){var b=function(b){if(!(b instanceof Pi))return null;b=Vd(b.table)==Vd(a.O.ma.I())?a.O.ma:a.O.ga;return null===b.Ca()?null:b},c=b(ke(a,0));b=b(ke(a,1));if(null!==c||null!==b){b=null===b?c:b;Vi(a,b);var d=new G([],[Vd(b.I())]);ne(a,new Xi([d]),b==c?0:1)}}};function Zi(a){a=a.map(function(a){return a.qa()});a=Ab.apply(null,a);var b=[];zb(a,function(a){b.push(a)});return b}function $i(a){this.Qb=a}$i.prototype.ad=function(){return 1==this.Qb.f.length?[Fd()]:[this.Qb.f.map(function(){return Fd()})]};function aj(a,b){this.Qb=a;this.Ga=b;this.Kd=this.$e=null}
function bj(a,b){var c=y();a.Ga.keys().forEach(function(a){var d=this.Ga.get(a).map(function(a){return xe(b,a)},this),f=new Jd([Fd()]);d.forEach(function(a){f=Kd(f,a.ve())});c.set(a,f)},a);return c}aj.prototype.ad=function(a){if(this.$e==a)return this.Kd;for(var b=bj(this,a),c=this.Qb.f.length-1;0<=c;c--){var d=this.Qb.f[c];if(null!==(b.get(d.ba.getName())||null))break;b.set(d.ba.getName(),new Jd([Fd()]))}this.Kd=1==this.Qb.f.length?z(b)[0].qa():Zi(cj(this,b));this.$e=a;return this.Kd};
function cj(a,b){var c=y(),d=0;a.Qb.f.forEach(function(a){c.set(a.ba.getName(),d);d++});return ic(b).sort(function(a,b){return c.get(a)-c.get(b)}).map(function(a){return b.get(a)})};function dj(a,b){this.wd=b;this.B=a.b(zc)}function ej(a){a=a.B.get(pf(a.wd));return Math.floor(.02*a.Y().ia)}function fj(a,b,c){c=c.filter(a.jg,a);if(0==c.length)return null;a=gj(a,c);if(0==a.length)return null;if(1==a.length)return a[0];var d=Number.MAX_VALUE;return a.reduce(function(a,c){var e=hj(c,b);return e<d?(d=e,c):a},null)}
function gj(a,b){return a.wd.Da().map(function(a){a=new ij(this.B,a);jj(a,b);return a},a).filter(function(a){if(null===a.Ga)a=!1;else{for(var b=!1,c=!0,f=0;f<a.cb.f.length;f++){var h=a.Ga.has(a.cb.f[f].ba.getName());if(b&&h){c=!1;break}h||(b=!0)}a=c}return a})}dj.prototype.jg=function(a){return a instanceof se?!a.kd()||a.J.I()!=this.wd||"in"==a.F&&a.value.length>ej(this)?!1:!0:a instanceof Pg?a.kd()&&ke(a,0).J.I()==this.wd?J(a).length<=ej(this):!1:!1};
function ij(a,b){this.B=a;this.cb=b;this.dg=B(this.cb.f.map(function(a){return a.ba.getName()}));this.Zd=this.Ga=null}function kj(a){null===a.Zd&&(a.Zd=new aj(a.cb,a.Ga));return a.Zd}function jj(a,b){b.forEach(function(a){var b=a.lb()[0].getName();this.dg.has(b)&&(null===this.Ga&&(this.Ga=new ed),this.Ga.set(b,a.W()))},a)}function hj(a,b){b=kj(a).ad(b);var c=a.B.get(a.cb.j());return b.reduce(function(a,b){return a+c.Yc(b)},0)};function lj(a,b,c,d){S.call(this,0,-1);this.B=a.b(zc);this.index=b;this.Ze=c;this.oe=d;this.Qc=this.Pc=!1}r(lj,S);lj.prototype.toString=function(){return"index_range_scan("+this.index.j()+", ?, "+(this.oe?"reverse":"natural")+(this.Pc?", limit:?":"")+(this.Qc?", skip:?":"")+")"};lj.prototype.Oc=function(a){var b=this.toString(),c=this.Ze.ad(a);b=b.replace("?",c.toString());this.Pc&&(b=b.replace("?",a.X.toString()));this.Qc&&(b=b.replace("?",a.L.toString()));return b};
lj.prototype.ca=function(a,b,c){a=this.Ze.ad(c);b=this.B.get(this.index.j());c=(1==a.length&&a[0]instanceof E&&Gd(a[0])?Kf(b.get(a[0].from),!1,this.Pc?c.X:void 0,this.Qc?c.L:void 0):b.Va(a,this.oe,this.Pc?c.X:void 0,this.Qc?c.L:void 0)).map(function(a){return new jc(a,{})},this);return[Sd(c,[this.index.lc])]};function mj(){S.call(this,-1,0)}r(mj,S);mj.prototype.toString=k("multi_index_range_scan()");
mj.prototype.ca=function(a){var b=y();a.forEach(function(a){a.entries.forEach(function(a){b.set(a.ua.id(),a)})});var c=z(b);return[new G(c,a[0].s())]};function nj(a){S.call(this,1,1);this.ic=a}r(nj,S);nj.prototype.toString=k("select(?)");nj.prototype.Oc=function(a){a=xe(a,this.ic);return this.toString().replace("?",a.toString())};nj.prototype.ca=function(a,b,c){return[xe(c,this.ic).eval(a[0])]};function oj(a,b){S.call(this,1,1);this.V=a.b(yc);this.U=b}r(oj,S);oj.prototype.toString=function(){return"table_access_by_row_id("+this.U.getName()+")"};oj.prototype.ca=function(a){return[Sd(Gf(this.V,Md(a[0])),[Vd(this.U)])]};function pj(a){this.c=a}r(pj,Hh);pj.prototype.gb=function(a,b){this.H=a;Ig(a,function(a){return a instanceof Pi}).forEach(function(a){var c=qj(a);if(0!=c.length){var e=fj(new dj(this.c,a.table),b,c.map(function(a){return xe(b,a.ic)}));if(null!==e){var f=y();c.forEach(function(a){f.set(a.ic,a)},this);this.H=rj(this,e,f,a)}}},this);return this.H};function qj(a){var b=[];for(a=a.getParent();a;){if(a instanceof nj)b.push(a);else if(a instanceof Ti)break;a=a.getParent()}return b}
function rj(a,b,c,d){(null===b.Ga?[]:b.Ga.values()).map(function(a){return c.get(a)}).forEach(Jg);b=new lj(a.c,b.cb,kj(b),!1);a=new oj(a.c,d.table);K(a,b);Ng(d,d,a,b);return b.bb()};function sj(a,b){S.call(this,0,-1);this.B=a.b(zc);this.U=b}r(sj,S);sj.prototype.toString=function(){return"insert("+this.U.getName()+")"};sj.prototype.ca=function(a,b,c){tj(this.U,c.values,this.B);b.Ab(this.U,c.values);return[Sd(c.values,[this.U.getName()])]};function tj(a,b,c){a=a.Mb.rd;if(null===a?0:a.f[0].autoIncrement){var d=a.f[0].ba.getName();c=c.get(a.j()).Y().Ec;var e=null===c?0:c;b.forEach(function(a){if(0==a.m[d]||null==a.m[d])e++,a.m[d]=e})}}
function uj(a,b){S.call(this,0,-1);this.B=a.b(zc);this.U=b}r(uj,S);uj.prototype.toString=function(){return"insert_replace("+this.U.getName()+")"};uj.prototype.ca=function(a,b,c){tj(this.U,c.values,this.B);b.Vd(this.U,c.values);return[Sd(c.values,[this.U.getName()])]};function vj(){S.call(this,1,1)}r(vj,S);vj.prototype.toString=k("limit(?)");vj.prototype.Oc=function(a){return this.toString().replace("?",a.X.toString())};vj.prototype.ca=function(a,b,c){a[0].entries.splice(c.X);return a};function wj(a){S.call(this,-1,1);this.N=a}r(wj,S);m=wj.prototype;m.toString=function(){return"order_by("+Ce(this.N)+")"};m.ca=function(a){if(1==a.length){var b=a[0];for(var c=null,d=0;d<this.N.length;d++){var e=dh(this.N[d].J);if(null!==b.$a&&b.$a.has(e.j())){c=e;break}}b=c;(null===b?a[0]:Nd(a[0],b)).entries.sort(this.Sf.bind(this))}else a.sort(this.Ig.bind(this));return a};
m.$=function(a,b){var c=-1;do{c++;var d=this.N[c].J;var e=this.N[c].order;var f=a(d);d=b(d)}while(f==d&&c+1<this.N.length);a=f<d?-1:f>d?1:0;return 1==e?a:-a};m.Ig=function(a,b){return this.$(function(b){return b instanceof R?Nd(a,b):H(a.entries[a.entries.length-1],b)},function(a){return a instanceof R?Nd(b,a):H(b.entries[b.entries.length-1],a)})};m.Sf=function(a,b){return this.$(function(b){return H(a,b)},function(a){return H(b,a)})};function xj(a,b){this.Na=a;this.K=b}function yj(a){return a.K.some(function(a){return a instanceof R},a)?zj(a):Aj(a)}function zj(a){if(1==a.K.length&&"DISTINCT"==a.K[0].Lb)return a=Nd(a.Na,a.K[0]).entries.map(function(a){var b=new Td(new jc(-1,{}),1<this.Na.M.size);Wd(b,this.K[0],H(a,this.K[0].child));return b},a),new G(a,[]);var b=new Td(new jc(-1,{}),1<a.Na.M.size);a.K.forEach(function(a){var c=a instanceof R?Nd(this.Na,a):H(this.Na.entries[0],a);Wd(b,a,c)},a);return new G([b],a.Na.s())}
function Aj(a){var b=Array(a.Na.entries.length),c=1<a.Na.M.size;a.Na.entries.forEach(function(a,e){b[e]=new Td(new jc(a.ua.id(),{}),c);this.K.forEach(function(c){Wd(b[e],c,H(a,c))},this)},a);return new G(b,a.Na.s())}function Bj(a,b){var c=a.map(function(a){return yj(new xj(a,b)).entries[0]});return new G(c,a[0].s())};function Cj(a,b){S.call(this,-1,1);this.f=a;this.Pb=b}r(Cj,S);Cj.prototype.toString=function(){var a="project("+this.f.toString();if(null!==this.Pb){var b=this.Pb.map(function(a){return a.j()}).join(", ");a+=", groupBy("+b+")"}return a+")"};Cj.prototype.ca=function(a){0==a.length?a=[Pd()]:1==a.length?(a=a[0],a=[0==this.f.length?a:yj(new xj(a,this.f))]):a=[Bj(a,this.f)];return a};function Dj(a){return a.f.some(function(a){return a instanceof R})||null!==a.Pb};function Ej(){S.call(this,1,1)}r(Ej,S);Ej.prototype.toString=k("skip(?)");Ej.prototype.Oc=function(a){return this.toString().replace("?",a.L.toString())};Ej.prototype.ca=function(a,b,c){return[new G(a[0].entries.slice(c.L),a[0].s())]};function Fj(){}r(Fj,Hh);Fj.prototype.gb=function(a,b){if(!n(b.X)&&!n(b.L))return a;var c=Gj(a);if(null===c)return a;Ig(a,function(a){return a instanceof vj||a instanceof Ej}).forEach(function(a){a instanceof vj?c.Pc=!0:c.Qc=!0;Jg(a)},this);return c.bb()};function Gj(a){a=Ig(a,function(a){return a instanceof lj},function(a){return a instanceof Cj&&Dj(a)||a instanceof wj||1!=J(a).length||a instanceof nj});return 0<a.length?a[0]:null};function Hj(a){this.c=a}r(Hj,Hh);Hj.prototype.gb=function(a,b){this.H=a;var c=Ij(this,b);if(0==c.length)return this.H;var d=0;do{var e=c[d++];a=Jj(this,e,b)}while(null===a&&d<c.length);if(null===a)return this.H;b=Kj(this,a[0].cb.lc);return null===b?this.H:this.H=Lj(this,e,b,a)};function Ij(a,b){return Ig(a.H,function(a){if(!(a instanceof nj))return!1;a=xe(b,a.ic);return a instanceof Pg&&"or"==a.pb})}
function Kj(a,b){return Ig(a.H,function(a){return a instanceof Pi&&a.table.getName()==b})[0]||null}function Jj(a,b,c){b=xe(c,b.ic);var d=b.s();if(1!=d.size)return null;d=C(d)[0];var e=new dj(a.c,d),f=null;return J(b).every(function(a){a=fj(e,c,[a]);null===a||(null===f?f=[a]:f.push(a));return null!==a})?f:null}function Lj(a,b,c,d){var e=new oj(a.c,c.table),f=new mj;K(e,f);d.forEach(function(a){a=new lj(this.c,a.cb,kj(a),!1);K(f,a)},a);Jg(b);Ng(c,c,e,f);return f.bb()};function Mj(a){this.c=a}r(Mj,Hh);Mj.prototype.gb=function(a,b){b=Nj(a,b);if(null===b)return a;a:{var c=b;a=Oj(ke(b,0));if(null!==a){var d=b.N;for(var e=null,f=a.table.Da(),h=0;h<f.length&&null===e;h++)e=Pj(f[h],d);d=e;if(null===d){a=c;break a}c=new lj(this.c,d.cb,new $i(d.cb),d.We);d=new oj(this.c,a.table);K(d,c);Jg(b);c=Ng(a,a,d,c)}a=c}a==b&&(a=b,c=Qj(ke(b,0)),null!==c&&(d=Pj(c.index,b.N),null!==d&&(c.oe=d.We,a=Jg(b).parent)));return a.bb()};
function Qj(a){a=Ig(a,function(a){return a instanceof lj},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Oj(a){a=Ig(a,function(a){return a instanceof Pi},function(a){return 1!=J(a).length});return 0<a.length?a[0]:null}function Nj(a,b){return n(b.N)?Ig(a,function(a){return a instanceof wj})[0]:null}function Pj(a,b){if(a.f.length!=b.length||!b.every(function(b,d){return b.J.getName()==a.f[d].ba.getName()}))return null;b=Rj(b,a);return b[0]||b[1]?{cb:a,We:b[1]}:null}
function Rj(a,b){var c=a.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0),d=b.f.reduce(function(a,b){return a<<1|(0==b.order?0:1)},0);c^=d;return[0==c,c==Math.pow(2,Math.max(a.length,b.f.length))-1]};function Sj(a,b,c){this.Ha=a;this.ke=b;this.Vb=c}Sj.prototype.fc=function(){this.Vb.forEach(function(a){this.Ha=a.gb(this.Ha,this.ke)},this);return this.Ha};function Tj(a){S.call(this,1,1);this.U=a}r(Tj,S);Tj.prototype.toString=function(){return"update("+this.U.getName()+")"};Tj.prototype.ca=function(a,b,c){a=a[0].entries.map(function(a){var b=this.U.kb(a.ua.Ja());c.set.forEach(function(a){b.m[a.J.getName()]=a.value},this);return b},this);b.update(this.U,a);return[Pd()]};function Uj(a){this.c=a;this.qe=[new Yi,new pj(this.c),new Hj(this.c),new Mj(this.c),new Fj,new Qi(this.c)];this.Od=[new pj(this.c)]}Uj.prototype.create=function(a,b){var c=a.bb();if(c instanceof uh||c instanceof th)return Vj(this,a,b);if(c instanceof Ah||c instanceof Eh||c instanceof Fh)return Vj(this,a,b,this.qe);if(c instanceof vh||c instanceof wh)return Vj(this,a,b,this.Od);throw new D(8);};
function Vj(a,b,c,d){a=Gg(b.bb(),a.sg.bind(a));null!=d&&(a=(new Sj(a,c,d)).fc());return new De(a,b.da())}
Uj.prototype.sg=function(a){if(a instanceof Ah)return new Cj(a.f,a.Pb);if(a instanceof Dh)return new Ri(a.f);if(a instanceof Ch)return new hh(a.f);if(a instanceof Bh)return new wj(a.N);if(a instanceof Fh)return new Ej;if(a instanceof Eh)return new vj;if(a instanceof xh)return new nj(a.O.W());if(a instanceof zh)return new Mh;if(a instanceof Gh)return new Ti(this.c,a.O,a.Rb);if(a instanceof yh)return new Pi(this.c,a.table);if(a instanceof vh)return new Ni(a.table);if(a instanceof wh)return new Tj(a.table);
if(a instanceof uh)return new uj(this.c,a.table);if(a instanceof th)return new sj(this.c,a.table);throw new D(514);};function Wj(a){this.pg=new Mi;this.Dg=new Uj(a)};function Xj(){this.cf=y()}function Yj(a,b){var c=a.cf.get(b.getName())||null;null===c&&(c=new Zj,a.cf.set(b.getName(),c));return c}function ak(a,b,c,d){c.forEach(function(a){a=Yj(this,a);0==d?(a.fb=null,a.vc=b):3==d?(null===a.Yb&&(a.Yb=B()),a.Yb.add(b),null===a.Ya&&(a.Ya=B()),a.Ya.delete(b)):1==d?(null===a.Ya&&(a.Ya=B()),a.Ya.add(b)):2==d&&(a.fb=b)},a)}
function bk(a,b,c,d){var e=!0;c.forEach(function(a){if(e){a=Yj(this,a);var c=null===a.Ya||0==a.Ya.size;e=0==d?(null===a.Yb||0==a.Yb.size)&&c&&null===a.vc&&null!==a.fb&&a.fb==b:3==d?null===a.vc&&null===a.fb&&null!==a.Ya&&a.Ya.has(b):1==d?null===a.fb:c&&(null===a.fb||a.fb==b)}},a);return e}function ck(a,b,c,d){var e=bk(a,b,c,d);e&&ak(a,b,c,d);return e}Xj.prototype.releaseLock=function(a,b){b.forEach(function(b){Yj(this,b).releaseLock(a)},this)};
function dk(a,b){b.forEach(function(a){Yj(this,a).fb=null},a)}function Zj(){this.Yb=this.Ya=this.fb=this.vc=null}Zj.prototype.releaseLock=function(a){this.vc==a&&(this.vc=null);this.fb==a&&(this.fb=null);null===this.Ya||this.Ya.delete(a);null===this.Yb||this.Yb.delete(a)};function ek(){this.Ub=new fk;this.Dc=new Xj}function Le(a,b){(2>b.getPriority()||2>b.getPriority())&&dk(a.Dc,b.da());a.Ub.Ab(b);gk(a);return b.Db.ha}function gk(a){for(var b=a.Ub.qa(),c=0;c<b.length;c++){var d=b[c];if(0==d.G()?hk(a,d,1,3):hk(a,d,2,0)){a.Ub.remove(d);var e=a;d.exec().then(e.Ag.bind(e,d),e.zg.bind(e,d))}}}function hk(a,b,c,d){var e=!1;ck(a.Dc,b.W(),b.da(),c)&&(e=ck(a.Dc,b.W(),b.da(),d));return e}ek.prototype.Ag=function(a,b){this.Dc.releaseLock(a.W(),a.da());a.Db.resolve(b);gk(this)};
ek.prototype.zg=function(a,b){this.Dc.releaseLock(a.W(),a.da());a.Db.reject(b);gk(this)};function fk(){this.Ub=[]}fk.prototype.Ab=function(a){Jf(this.Ub,a,function(a,c){var b=a.getPriority()-c.getPriority();return 0==b?a.W()-c.W():b})};fk.prototype.qa=function(){return this.Ub.slice()};fk.prototype.remove=function(a){var b=this.Ub;a=ua(b,a);var c;(c=0<=a)&&Array.prototype.splice.call(b,a,1);return c};function ik(){this.Mc=y()}var jk;function kk(){jk||(jk=new ik);return jk}ik.prototype.clear=function(){this.Mc.clear()};ik.prototype.clear=ik.prototype.clear;ik.prototype.rb=function(a,b){this.Mc.set(a.toString(),b);return b};ik.prototype.registerService=ik.prototype.rb;ik.prototype.b=function(a){var b=this.Mc.get(a.toString())||null;if(null===b)throw new D(7,a.toString());return b};ik.prototype.getService=ik.prototype.b;ik.prototype.ld=function(a){return this.Mc.has(a.toString())};
ik.prototype.isRegistered=ik.prototype.ld;function lk(){var a=kk();return ic(a.Mc)};function mk(a,b,c,d){return null!=a?null!=b?nk(a,b,c,d):ok(a):pk()}function qk(a){var b="";try{b=JSON.stringify(a)}catch(c){}return b}function rk(a){var b=kk();a=new wc("ns_"+a);return b.ld(a)?b.b(a):null}function pk(){var a={};lk().forEach(function(b){"ns_"==b.substring(0,3)&&(b=b.substring(3),a[b]=rk(b).b(Dc).version())});return qk(a)}function ok(a){a=rk(a);var b={};if(null!=a){var c=a.b(zc);a.b(Dc).oa().forEach(function(a){b[a.getName()]=c.get(pf(a)).Y().ia})}return qk(b)}
function nk(a,b,c,d){var e=rk(a);a=[];if(null!=e){var f=null;try{f=e.b(Dc).table(b)}catch(h){}null!=f&&(b=e.b(zc),e=e.b(yc),c=b.get(pf(f)).Va(void 0,!1,c,d),c.length&&(a=Gf(e,c).map(function(a){return a.m})))}return qk(a)};function sk(a,b){this.Pd=ge();this.le=a;this.nd=b;this.K=tk(this)}function tk(a){if(0<a.le.f.length)return a.le.f;var b=[];a.le.from.forEach(function(a){a.lb().forEach(function(a){b.push(a)})});return b}sk.prototype.$=function(a,b){return this.K.every(function(c){return 6==c.G()||0==c.G()?H(a,c)===H(b,c):he(this.Pd,c.G(),"eq")(H(a,c),H(b,c))},this)};
function uk(a,b,c){var d=null===b?[]:b.entries,e=rb(d,c.entries,a.$.bind(a),function(a){return d[a]});b=[];for(var f=0,h=0;h<d.length;h++){var l=d[h];e[f]==l?f++:(l=a.nd.splice(f,1),l=vk(h,l,0,a.nd),b.push(l))}e=rb(d,c.entries,a.$.bind(a),function(a,b){return c.entries[b]});for(h=f=0;h<c.entries.length;h++)l=c.entries[h],e[f]==l?f++:(a.nd.splice(h,0,l.ua.m),l=vk(h,[],1,a.nd),b.push(l));return b}function vk(a,b,c,d){return{addedCount:c,index:a,object:d,removed:b,type:"splice"}};function wk(){this.ec=y()}wk.prototype.Bd=function(a,b){var c=la(a.query).toString(),d=this.ec.get(c)||null;null===d&&(d=new xk(a),this.ec.set(c,d));d.Bd(b)};wk.prototype.me=function(a,b){a=la(a.query).toString();var c=this.ec.get(a)||null;c.me(b);0<c.Gc.size||this.ec.delete(a)};function Ke(a,b){var c=B();b.forEach(function(a){c.add(a.getName())});var d=[];a.ec.forEach(function(a){a=a.Ac();a.context.from.some(function(a){return c.has(a.getName())})&&d.push(a)});return d}
function Ie(a,b,c){b=la(null!=b.Vc?b.Vc:b).toString();a=a.ec.get(b)||null;null!==a&&yk(a,c)}function xk(a){this.Gf=a;this.Gc=B();this.xg=[];this.af=null;this.Qf=new sk(a.query,this.xg)}xk.prototype.Bd=function(a){this.Gc.has(a)||this.Gc.add(a)};xk.prototype.me=function(a){this.Gc.delete(a)};xk.prototype.Ac=function(){var a=this.Gf;return{context:a.query,ie:ki(a)}};function yk(a,b){var c=uk(a.Qf,a.af,b);a.af=b;0<c.length&&a.Gc.forEach(function(a){a(c)})};function zk(a,b){var c=a.b(Dc),d=b||{};b=new Ff(c);a.rb(yc,b);b=null;var e=!1;null!=d.storeType?b=d.storeType:(b=gc(),b=b.eg?0:b.Tg?4:1);switch(b){case 0:b=new kf(a,c);break;case 1:b=new sf(c);break;case 5:b=new uf(c);break;case 4:b=new Cf(a,c,d.webSqlDbSize);break;case 3:b=new Xe(c,d.firebase);e=!0;break;default:throw new D(300);}a.rb(xc,b);var f=new Fg;a.rb(zc,f);return b.Ea(d.onUpgrade).then(function(){var b=new Wj(a);a.rb(Ac,b);b=new ek;a.rb(Bc,b);b=new wk;a.rb(Cc,b);return f.Ea(c)}).then(function(){if(e){var b=
new Me(a);b.Oa.subscribe(b.de.bind(b))}d.enableInspector&&(window.top["#lfInspect"]=mk);return(new yg(a)).Ea(c)})};function Ak(a){this.c=a;this.g=a.b(Dc);this.aa=B(this.g.oa());this.Db=w()}function Bk(a){var b=a.c.b(zc),c=a.c.b(yc),d={};a.g.oa().forEach(function(a){var e=b.get(pf(a)).Va();e=Gf(c,e).map(function(a){return a.m});d[a.getName()]=e});return{name:a.g.name(),version:a.g.version(),tables:d}}m=Ak.prototype;m.exec=function(){var a=Bk(this);a=new Td(new jc(-1,a),!0);return v([new G([a],[])])};m.G=k(0);m.da=g("aa");m.W=function(){return la(this)};m.getPriority=k(0);function Ck(a,b){this.c=a;this.g=a.b(Dc);this.aa=B(this.g.oa());this.Db=w();this.Ba=b;this.Oa=a.b(xc);this.V=a.b(yc);this.B=a.b(zc)}m=Ck.prototype;
m.exec=function(){if(!(this.Oa instanceof kf||this.Oa instanceof sf||this.Oa instanceof Cf))throw new D(300);a:{var a=this.g.oa();for(var b=0;b<a.length;++b)if(0<this.B.get(pf(a[b])).Y().ia){a=!1;break a}a=!0}if(!a)throw new D(110);if(this.g.name()!=this.Ba.name||this.g.version()!=this.Ba.version)throw new D(111);if(null==this.Ba.tables)throw new D(112);return Dk(this)};m.G=k(1);m.da=g("aa");m.W=function(){return la(this)};m.getPriority=k(0);
function Dk(a){var b=new wd(a.c,a.aa);b=a.Oa.Fb(a.G(),C(a.aa),b);for(var c in a.Ba.tables){var d=a.g.table(c),e=a.Ba.tables[c].map(function(a){return d.xb(a)}),f=b.I(c,d.kb,0);a.V.Wb(c,e);var h=a.B.kc.get(c)||[];e.forEach(function(a){h.forEach(function(b){var c=a.nb(b.getName());b.add(c,a.id())})});f.put(e)}return b.ka()};function Ek(a,b){this.c=a;this.Oa=a.b(xc);this.Ia=a.b(Bc);this.Ib=a.b(Cc);this.aa=B(b);this.Ra=new wd(this.c,this.aa);this.Db=w();this.wc=w();this.ye=w()}m=Ek.prototype;m.exec=function(){this.ye.resolve();return this.wc.ha};m.G=k(1);m.da=g("aa");m.W=function(){return la(this)};m.getPriority=k(2);function Fk(a){Le(a.Ia,a);return a.ye.ha}
function Gk(a,b){b=b.Ac();return b.ie.bb().exec(a.Ra,b.context).then(function(a){return Ld(a[0])},function(a){this.Ra.Jb();var b=new lb(a.name);this.wc.reject(b);throw a;}.bind(a))}m.ka=function(){this.ja=this.Oa.Fb(this.G(),C(this.aa),this.Ra);this.ja.ka().then(function(){this.Lc();this.wc.resolve()}.bind(this),function(a){this.Ra.Jb();this.wc.reject(a)}.bind(this));return this.Db.ha};m.Jb=function(){this.Ra.Jb();this.wc.resolve();return this.Db.ha};
m.Lc=function(){var a=Ke(this.Ib,this.aa);0!=a.length&&(a=new He(this.c,a),Le(this.Ia,a))};m.Y=function(){var a=null;null!=this.ja&&(a=this.ja.Y());return null===a?new A(!1,0,0,0,0):a};function V(a){this.c=a;this.Ia=a.b(Bc);this.Kb=null;this.Ta=0;0==Hk.size&&(Hk.set(0,B([1,4])),Hk.set(1,B([2])),Hk.set(2,B([3,5,6])),Hk.set(3,B([2,7])),Hk.set(4,B([7])),Hk.set(5,B([7])),Hk.set(6,B([7])))}q("lf.proc.Transaction",V);var Hk=y();function Ik(a,b){var c=Hk.get(a.Ta)||null;if(null===c||!c.has(b))throw new D(107,a.Ta,b);a.Ta=b}
V.prototype.exec=function(a){Ik(this,4);var b=[];try{a.forEach(function(a){a.ab();b.push(a.Ac())},this)}catch(c){return Ik(this,7),db(c)}this.Kb=new Nh(this.c,b);return Le(this.Ia,this.Kb).then(function(a){Ik(this,7);return a.map(function(a){return Ld(a)})}.bind(this),function(a){Ik(this,7);throw a;}.bind(this))};V.prototype.exec=V.prototype.exec;V.prototype.Ef=function(a){Ik(this,1);this.Kb=new Ek(this.c,a);return Fk(this.Kb).then(function(){Ik(this,2)}.bind(this))};V.prototype.begin=V.prototype.Ef;
V.prototype.Df=function(a){Ik(this,3);try{a.ab()}catch(b){return Ik(this,7),db(b)}return Gk(this.Kb,a).then(function(a){Ik(this,2);return a}.bind(this),function(a){Ik(this,7);throw a;}.bind(this))};V.prototype.attach=V.prototype.Df;V.prototype.ka=function(){Ik(this,5);return this.Kb.ka().then(function(){Ik(this,7)}.bind(this))};V.prototype.commit=V.prototype.ka;V.prototype.Jb=function(){Ik(this,6);return this.Kb.Jb().then(function(){Ik(this,7)}.bind(this))};V.prototype.rollback=V.prototype.Jb;
V.prototype.Y=function(){if(7!=this.Ta)throw new D(105);return this.Kb.Y()};V.prototype.stats=V.prototype.Y;function W(a){this.c=a;this.g=a.b(Dc);this.gd=!1}q("lf.proc.Database",W);W.prototype.Ea=function(a){this.c.rb(Dc,this.g);return zk(this.c,a).then(function(){this.gd=!0;this.Ia=this.c.b(Bc);return this}.bind(this))};W.prototype.init=W.prototype.Ea;W.prototype.zb=g("g");W.prototype.getSchema=W.prototype.zb;function Jk(a){if(!a.gd)throw new D(2);}W.prototype.select=function(a){Jk(this);return new U(this.c,1!=arguments.length||null!=arguments[0]?Array.prototype.slice.call(arguments):[])};
W.prototype.select=W.prototype.select;W.prototype.Ab=function(){Jk(this);return new mi(this.c)};W.prototype.insert=W.prototype.Ab;W.prototype.Vd=function(){Jk(this);return new mi(this.c,!0)};W.prototype.insertOrReplace=W.prototype.Vd;W.prototype.update=function(a){Jk(this);return new wi(this.c,a)};W.prototype.update=W.prototype.update;W.prototype.delete=function(){Jk(this);return new li(this.c)};W.prototype["delete"]=W.prototype.delete;
W.prototype.observe=function(a,b){Jk(this);this.c.b(Cc).Bd(a,b)};W.prototype.observe=W.prototype.observe;W.prototype.unobserve=function(a,b){Jk(this);this.c.b(Cc).me(a,b)};W.prototype.unobserve=W.prototype.unobserve;W.prototype.Mf=function(){Jk(this);return new V(this.c)};W.prototype.createTransaction=W.prototype.Mf;W.prototype.close=function(){try{this.c.b(xc).close()}catch(a){}this.c.clear();this.gd=!1};W.prototype.close=W.prototype.close;
W.prototype.Wf=function(){Jk(this);var a=new Ak(this.c);return Le(this.Ia,a).then(function(a){return Ld(a[0])[0]})};W.prototype["export"]=W.prototype.Wf;W.prototype.import=function(a){Jk(this);a=new Ck(this.c,a);return Le(this.Ia,a).then(k(null))};W.prototype["import"]=W.prototype.import;function X(a,b,c,d,e,f){this.U=a;this.A=b;this.Xe=c;this.Ve=d;this.wf=e;this.Ka=f||null}q("lf.schema.BaseColumn",X);m=X.prototype;m.getName=g("A");m.j=function(){return Vd(this.U)+"."+this.A};m.toString=function(){return this.j()};m.I=g("U");m.G=g("wf");X.prototype.getType=X.prototype.G;X.prototype.Da=function(){null==this.ta&&(this.ta=[],this.I().Da().forEach(function(a){-1!=a.f.map(function(a){return a.ba.getName()}).indexOf(this.A)&&this.ta.push(a)},this));return this.ta};
X.prototype.Ca=function(){if(!n(this.fa)){var a=this.Da().filter(function(a){return 1!=a.f.length?!1:a.f[0].ba.getName()==this.getName()},this);this.fa=0<a.length?a[0]:null}return this.fa};X.prototype.gc=g("Ve");X.prototype.isNullable=X.prototype.gc;X.prototype.Cc=g("Xe");X.prototype.Qa=function(a){return Yg(this,a,"eq")};X.prototype.eq=X.prototype.Qa;X.prototype.df=function(a){return Yg(this,a,"neq")};X.prototype.neq=X.prototype.df;X.prototype.qg=function(a){return Yg(this,a,"lt")};
X.prototype.lt=X.prototype.qg;X.prototype.rg=function(a){return Yg(this,a,"lte")};X.prototype.lte=X.prototype.rg;X.prototype.$f=function(a){return Yg(this,a,"gt")};X.prototype.gt=X.prototype.$f;X.prototype.ag=function(a){return Yg(this,a,"gte")};X.prototype.gte=X.prototype.ag;X.prototype.match=function(a){return Yg(this,a,"match")};X.prototype.match=X.prototype.match;X.prototype.Ff=function(a,b){return Yg(this,[a,b],"between")};X.prototype.between=X.prototype.Ff;
X.prototype.bg=function(a){return Yg(this,a,"in")};X.prototype["in"]=X.prototype.bg;X.prototype.lg=function(){return this.Qa(null)};X.prototype.isNull=X.prototype.lg;X.prototype.kg=function(){return this.df(null)};X.prototype.isNotNull=X.prototype.kg;X.prototype.as=function(a){return new X(this.U,this.A,this.Xe,this.Ve,this.wf,a)};X.prototype.as=X.prototype.as;function Kk(a){this.g=a;this.Hd=new ed;this.ne=new ed;this.ff=new ed;this.He=y();this.h=new ed;this.De=new ed;this.lf=new ed;this.Ge=new ed;Lk(this)}function Lk(a){a.g.oa().forEach(function(a){var b=a.getName();a.Mb.Td.forEach(function(c){this.ff.set(b,this.g.table(c.Xa));this.h.set(c.Xa,a);0==c.action?(this.ne.set(c.Xa,c),this.lf.set(c.Xa,a)):(this.Hd.set(c.Xa,c),this.De.set(c.Xa,a));this.He.set(a.getName()+"."+c.vb,c.Xa);this.Ge.set(c.Xa+"."+c.Ic,a.getName())},this)},a)}
function md(a,b,c){if(null!=c)return 1==c?a.Hd.get(b):a.ne.get(b);c=a.Hd.get(b);a=a.ne.get(b);return null===c&&null===a?null:(c||[]).concat(a||[])}function Th(a,b){a=b.get(a);return null===a?[]:a}function Vh(a,b){var c=B();b.forEach(function(a){(a=this.He.get(a))&&c.add(a)},a);return C(c).map(function(a){return this.g.table(a)},a)}function Rh(a,b,c){return null!=c?0==c?Th(b,a.lf):Th(b,a.De):Th(b,a.h)}
function Wh(a,b){var c=B();b.forEach(function(a){(a=this.Ge.get(a))&&a.forEach(function(a){c.add(a)})},a);return C(c).map(function(a){return this.g.table(a)},a)};function Mk(a,b,c){this.rd=a;this.wg=b;this.Td=c}q("lf.schema.Constraint",Mk);Mk.prototype.Zf=g("rd");Mk.prototype.getPrimaryKey=Mk.prototype.Zf;Mk.prototype.Yf=g("Td");Mk.prototype.getForeignKeys=Mk.prototype.Yf;function Nk(a,b,c){var d=a.ref.split(".");if(2!=d.length)throw new D(540,c);this.Fe=b;this.vb=a.local;this.Xa=d[0];this.Ic=d[1];this.name=b+"."+c;this.action=a.action;this.timing=a.timing};function Y(a){Ok(a);this.Pd=ge();this.A=a;this.K=y();this.yd=B();this.nc=B();this.md=B();this.Fa=null;this.ta=y();this.qd=!1;this.yb=[]}q("lf.schema.TableBuilder",Y);function Pk(a){this.name=a.name;this.order=a.order;this.autoIncrement=a.autoIncrement}var Qk=B([0,6]);function Ok(a){if(!/^[A-Za-z_][A-Za-z0-9_]*$/.test(a))throw new D(502,a);}function Rk(a,b){if(b==a.A)throw new D(546,b);if(a.K.has(b)||a.ta.has(b)||a.nc.has(b))throw new D(503,a.A+"."+b);}
function Sk(a,b){var c=!1;b.forEach(function(a){var b=this.K.get(a.name);c=c||a.autoIncrement;if(a.autoIncrement&&3!=b)throw new D(504);},a);if(c&&1<b.length)throw new D(505);}function Tk(a){if(null!==a.Fa){var b=a.ta.get(a.Fa).map(function(a){return a.name}),c=0;if(a.yb.some(function(a,e){c=e;return-1!=b.indexOf(a.vb)},a))throw new D(543,a.yb[c].name);}}
function Uk(a){if(null!==a.Fa){var b=function(a){return a.name},c=JSON.stringify(a.ta.get(a.Fa).map(b));a.ta.forEach(function(a,e){if(e!=this.Fa&&(a=a.map(b),JSON.stringify(a)==c))throw new D(544,this.A+"."+e);},a)}}function Vk(a){null===a.Fa||a.ta.get(a.Fa).forEach(function(a){if(this.md.has(a.name))throw new D(545,this.A+"."+a.name);},a)}Y.prototype.yf=function(a,b){Ok(a);Rk(this,a);this.K.set(a,b);Qk.has(b)&&this.Ae([a]);return this};Y.prototype.addColumn=Y.prototype.yf;
Y.prototype.Af=function(a,b){var c=this.A;this.Fa="pk"+(c[0].toUpperCase()+c.substring(1));Ok(this.Fa);Rk(this,this.Fa);a=Wk(this,a,!0,void 0,b);Sk(this,a);1==a.length&&this.yd.add(a[0].name);this.nc.add(this.Fa);this.ta.set(this.Fa,a);return this};Y.prototype.addPrimaryKey=Y.prototype.Af;
Y.prototype.zf=function(a,b){Ok(a);Rk(this,a);b=new Nk(b,this.A,a);n(b.action)||(b.action=0);n(b.timing)||(b.timing=0);if(1==b.action&&1==b.timing)throw new D(506);if(!this.K.has(b.vb))throw new D(540,a);this.yb.push(b);this.ze(a,[b.vb],this.yd.has(b.vb));return this};Y.prototype.addForeignKey=Y.prototype.zf;Y.prototype.Bf=function(a,b){Ok(a);Rk(this,a);b=Wk(this,b,!0);1==b.length&&(this.yd.add(b[0].name),Xk(this,b[0].name));this.ta.set(a,b);this.nc.add(a);return this};Y.prototype.addUnique=Y.prototype.Bf;
function Xk(a,b){a.yb.forEach(function(a){a.vb==b&&this.nc.add(a.name.split(".")[1])},a)}Y.prototype.Ae=function(a){Wk(this,a,!1).forEach(function(a){this.md.add(a.name)},this);return this};Y.prototype.addNullable=Y.prototype.Ae;Y.prototype.ze=function(a,b,c,d){Ok(a);Rk(this,a);b=Wk(this,b,!0,d);c&&this.nc.add(a);this.ta.set(a,b);return this};Y.prototype.addIndex=Y.prototype.ze;Y.prototype.Cb=ba("qd");Y.prototype.persistentIndex=Y.prototype.Cb;
Y.prototype.zb=function(){Tk(this);Uk(this);Vk(this);return new (Yk(this))};Y.prototype.getSchema=Y.prototype.zb;function Wk(a,b,c,d,e){var f=b;f="string"==typeof b[0]?b.map(function(a){return new Pk({name:a,order:null!=d?d:1,autoIncrement:e||!1})}):b.map(function(a){return new Pk(a)});f.forEach(function(a){if(!this.K.has(a.name))throw new D(508,this.A,a.name);if(c){var b=this.K.get(a.name);if(0==b||6==b)throw new D(509,this.A,a.name);}},a);return f}
function Yk(a){function b(){function b(b){return a.ta.get(b).map(function(a){return{ba:this[a.name],order:a.order,autoIncrement:a.autoIncrement}},this)}var d=ic(a.K).map(function(b){this[b]=new X(this,b,a.yd.has(b),a.md.has(b),a.K.get(b));return this[b]},this),e=ic(a.ta).map(function(c){return new $g(a.A,c,a.nc.has(c),b.call(this,c))},this);Q.call(this,a.A,d,e,a.qd);var f=null===a.Fa?null:new $g(a.A,a.Fa,!0,b.call(this,a.Fa)),h=d.filter(function(b){return!a.md.has(b.getName())});this.Mb=new Mk(f,
h,a.yb);this.pf=Zk(a,d,e)}r(b,Q);b.prototype.xb=function(a){return new this.pf(kc++,a)};b.prototype.createRow=b.prototype.xb;b.prototype.kb=function(a){var b={};this.lb().forEach(function(c){var d=c.getName();c=c.G();var e=a.value[d];if(0==c)if(c=e,null!=c&&""!=c){0!=c.length%2&&(c="0"+c);e=new ArrayBuffer(c.length/2);for(var l=new Uint8Array(e),p=0,L=0;p<c.length;p+=2)l[L++]=parseInt(c.substr(p,2),16);c=e}else c=null;else c=2==c?null!=e?new Date(e):null:e;b[d]=c},this);return new this.pf(a.id,b)};
b.prototype.deserializeRow=b.prototype.kb;b.prototype.Me=g("Mb");b.prototype.getConstraint=b.prototype.Me;return b}
function Zk(a,b,c){function d(a,d){this.K=b;this.ta=c;jc.call(this,a,d)}r(d,jc);d.prototype.Je=function(){var a={};this.K.forEach(function(b){a[b.getName()]=b.gc()?null:dd[b.G()]});return a};d.prototype.vf=function(){var a={};this.K.forEach(function(b){var c=b.getName();b=b.G();var d=this.m[c];a[c]=0==b?null!=d?nc(d):null:2==b?null!=d?d.getTime():null:6==b?null!=d?d:null:d},this);return a};var e=function(a){var b=this.K.get(a.getName()),c=this.Pd.Ye.get(b)||null;return function(b){return c(b[a.getName()])}}.bind(a),
f=function(a){var b=a.map(function(a){return e(a.ba)});return function(a){return b.map(function(b){return b(a)})}}.bind(a),h={};c.forEach(function(a){var b=a.j();a=1==a.f.length?e(a.f[0].ba):f(a.f);h[b]=a});d.prototype.nb=function(a){return-1!=a.indexOf("#")?this.id():h.hasOwnProperty(a)?h[a](this.m):null};return d};function $k(a,b){this.g=new Z(a,b);this.tb=y();this.xc=!1;this.i=null;this.Xc=!1}q("lf.schema.Builder",$k);function al(a,b){b.yb.forEach(function(a){var c=a.Xa;if(!this.tb.has(c))throw new D(536,a.name);c=this.tb.get(c).zb();var e=a.Ic;if(!c.hasOwnProperty(e))throw new D(537,a.name);if(b.zb()[a.vb].G()!=c[e].G())throw new D(538,a.name);if(!c[e].Cc())throw new D(539,a.name);},a)}
$k.prototype.Jf=function(a){a.yb.forEach(function(a){this.tb.get(a.Xa).yb.forEach(function(b){if(b.vb==a.Ic)throw new D(534,a.name);},this)},this)};function bl(a){a.xc||(a.tb.forEach(function(a){al(this,a);a=a.zb();this.g.M.set(a.getName(),a)},a),z(a.tb).forEach(a.Jf,a),cl(a),a.tb.clear(),a.xc=!0)}function dl(a,b,c){b.xe||(b.xe=!0,b.ee=!0,b.Ke.forEach(function(a){a=c.get(a);if(!a.xe)dl(this,a,c);else if(a.ee&&b!=a)throw new D(533);},a));b.ee=!1}
function cl(a){var b=y();a.g.M.forEach(function(a,d){b.set(d,new el(d))},a);a.tb.forEach(function(a,d){a.yb.forEach(function(a){b.get(a.Xa).Ke.add(d)})});z(b).forEach(function(a){dl(this,a,b)},a)}function el(a){this.ee=this.xe=!1;this.Ke=B();this.lc=a}$k.prototype.zb=function(){this.xc||bl(this);return this.g};$k.prototype.getSchema=$k.prototype.zb;$k.prototype.Pe=function(){var a=new wc("ns_"+this.g.name()),b=kk();if(b.ld(a))var c=b.b(a);else c=new ik,b.rb(a,c);return c};$k.prototype.getGlobal=$k.prototype.Pe;
$k.prototype.connect=function(a){if(this.Xc||null!==this.i&&this.i.gd)throw new D(113);this.Xc=!0;if(null===this.i){var b=this.Pe();b.ld(Dc)||b.rb(Dc,this.zb());this.i=new W(b)}return this.i.Ea(a).then(function(a){this.Xc=!1;return a}.bind(this),function(a){this.Xc=!1;this.i.close();throw a;}.bind(this))};$k.prototype.connect=$k.prototype.connect;$k.prototype.Lf=function(a){if(this.tb.has(a))throw new D(503,a);if(this.xc)throw new D(535);this.tb.set(a,new Y(a));return this.tb.get(a)};
$k.prototype.createTable=$k.prototype.Lf;$k.prototype.re=function(a){if(this.xc)throw new D(535);this.g.re(a);return this};$k.prototype.setPragma=$k.prototype.re;function Z(a,b){this.A=a;this.Ua=b;this.M=y();this.je={Rf:!1}}q("lf.schema.DatabaseSchema",Z);Z.prototype.name=g("A");Z.prototype.name=Z.prototype.name;Z.prototype.version=g("Ua");Z.prototype.version=Z.prototype.version;Z.prototype.oa=function(){return z(this.M)};Z.prototype.tables=Z.prototype.oa;
Z.prototype.table=function(a){if(!this.M.has(a))throw new D(101,a);return this.M.get(a)};Z.prototype.table=Z.prototype.table;Z.prototype.info=function(){this.Ue||(this.Ue=new Kk(this));return this.Ue};Z.prototype.Eg=g("je");Z.prototype.pragma=Z.prototype.Eg;Z.prototype.re=ba("je");q("lf.schema.create",function(a,b){return new $k(a,b)});u.prototype.catch=u.prototype.ue;u.prototype["catch"]=u.prototype.catch;
try{if(module){module.exports=lf;}}catch(e){}}.bind(window))();
//# sourceMappingURL=lovefield.min.js.map
